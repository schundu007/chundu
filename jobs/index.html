<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GGNQHMGCLH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GGNQHMGCLH');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings | Sudhakar Chundu</title>
    <meta name="description" content="Live US job listings from top tech companies - Cloud Architect, Platform Engineering, DevOps & SRE roles. Bay Area, Texas, Florida, North Carolina.">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Theme JS (load early to prevent flash) -->
    <script src="../assets/js/theme.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- docx library for Word document generation -->
    <script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        /* Dark Theme Variables (Default) */
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #111118;
            --bg-tertiary: #18181f;
            --bg-card: rgba(255, 255, 255, 0.03);
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --accent-blue: #3b82f6;
            --accent-purple: #8b5cf6;
            --accent-cyan: #06b6d4;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-border-hover: rgba(255, 255, 255, 0.15);
            --white: #ffffff;
            --light: #18181f;
            --light-alt: #1f1f28;
            --dark: #ffffff;
            --border: rgba(255, 255, 255, 0.1);
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: rgba(59, 130, 246, 0.2);
            --radius: 8px;
            --radius-lg: 12px;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        /* Light Theme Variables */
        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f1f5f9;
            --bg-card: rgba(0, 0, 0, 0.02);
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --accent-blue: #2563eb;
            --accent-purple: #7c3aed;
            --accent-cyan: #0891b2;
            --glass-bg: rgba(0, 0, 0, 0.02);
            --glass-border: rgba(0, 0, 0, 0.08);
            --glass-border-hover: rgba(0, 0, 0, 0.15);
            --white: #ffffff;
            --light: #f1f5f9;
            --light-alt: #e2e8f0;
            --dark: #0f172a;
            --border: rgba(0, 0, 0, 0.1);
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: rgba(37, 99, 235, 0.15);
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        /* Light theme specific overrides */
        [data-theme="light"] .jobs-topbar {
            background: #ffffff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        [data-theme="light"] .jobs-table-wrapper {
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        [data-theme="light"] .jobs-table th {
            background: #f1f5f9;
        }

        [data-theme="light"] .jobs-table tr:hover {
            background: rgba(59, 130, 246, 0.04);
        }

        [data-theme="light"] .company-tag {
            background: #f1f5f9;
            border-color: #e2e8f0;
        }

        [data-theme="light"] .company-tag:hover {
            background: #e2e8f0;
        }

        [data-theme="light"] .jd-modal {
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        [data-theme="light"] .jd-modal-overlay {
            background: rgba(0, 0, 0, 0.5);
        }

        [data-theme="light"] .pagination {
            background: #ffffff;
        }

        [data-theme="light"] .search-box input,
        [data-theme="light"] .filter-select {
            background: #ffffff;
            border-color: #e2e8f0;
        }

        [data-theme="light"] .ticker-bar {
            background: linear-gradient(90deg, #1e3a5f, #1e40af);
        }

        /* Theme Toggle Button */
        .theme-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }

        .theme-toggle:hover {
            background: var(--primary-light);
            border-color: var(--primary);
            color: var(--primary);
            transform: rotate(15deg);
        }

        .theme-toggle i {
            font-size: 1rem;
            transition: transform 0.3s ease;
        }

        .theme-toggle .fa-sun {
            display: none;
        }

        .theme-toggle .fa-moon {
            display: block;
        }

        [data-theme="light"] .theme-toggle .fa-sun {
            display: block;
        }

        [data-theme="light"] .theme-toggle .fa-moon {
            display: none;
        }

        body {
            background: var(--bg-primary) !important;
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Full Screen Jobs Page - Hide nav */
        nav {
            display: none !important;
        }

        /* Hide neural background for cleaner look */
        #neural-bg {
            display: none !important;
        }

        /* Override shared CSS for full-width jobs page */
        .main-content {
            max-width: 100%;
            padding: 0;
            margin: 0;
            background: var(--bg-primary);
            min-height: 100vh;
        }

        .page-header {
            display: none !important;
        }

        footer {
            display: none !important;
        }

        /* Jobs section takes full viewport */
        .jobs-section {
            padding-top: 0 !important;
            min-height: calc(100vh - 200px);
        }

        .jobs-container {
            max-width: 100% !important;
            padding: 0.5rem 1rem !important;
        }

        /* Document Manager at bottom - FORCE VISIBLE */
        .doc-manager-section {
            display: block !important;
            margin-top: 1rem;
            position: relative !important;
            z-index: 50 !important;
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%) !important;
            border-top: 3px solid #3b82f6 !important;
            padding: 1.5rem 1rem !important;
            box-shadow: 0 -4px 20px rgba(59, 130, 246, 0.2) !important;
        }

        .doc-manager-section h3 {
            font-size: 1rem !important;
            color: #fff !important;
        }

        /* Minimal Top Bar */
        .jobs-topbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem 1rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .jobs-topbar-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .jobs-topbar-title span {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .jobs-topbar-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .topbar-link {
            color: var(--text-secondary);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            transition: color 0.2s;
        }

        .topbar-link:hover {
            color: var(--primary);
        }

        /* Fresh Jobs Ticker - Compact */
        .fresh-jobs-ticker {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 6px 0;
            overflow: hidden;
            position: relative;
            border-bottom: 1px solid var(--primary);
        }

        .ticker-label {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            background: var(--primary);
            color: white;
            padding: 6px 12px;
            font-weight: 600;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 6px;
            z-index: 10;
            box-shadow: 3px 0 10px rgba(0,0,0,0.3);
        }

        .ticker-label i {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .ticker-wrapper {
            margin-left: 100px;
            overflow: hidden;
        }

        .ticker-content {
            display: flex;
            animation: scroll 120s linear infinite;
            width: max-content;
        }

        .ticker-content:hover {
            animation-play-state: paused;
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 0 20px;
            white-space: nowrap;
            font-size: 0.8rem;
            border-right: 1px solid rgba(255,255,255,0.2);
        }

        .ticker-item:last-child {
            border-right: none;
        }

        .ticker-item .company {
            color: var(--primary);
            font-weight: 600;
        }

        .ticker-item .title {
            color: #fff;
        }

        .ticker-item .time {
            color: #4ade80;
            font-size: 0.65rem;
            background: rgba(74, 222, 128, 0.15);
            padding: 1px 6px;
            border-radius: 8px;
        }

        .ticker-item a {
            color: inherit;
            text-decoration: none;
        }

        .ticker-item a:hover .title {
            text-decoration: underline;
        }

        .jobs-section {
            padding: 20px 1rem 30px;
            background: var(--bg-primary);
        }

        .jobs-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .jobs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .jobs-header h2 {
            font-size: 1.1rem;
            margin: 0;
        }

        .jobs-header h2 span {
            color: var(--primary);
        }

        .jobs-stats {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .jobs-stat {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .jobs-stat strong {
            color: var(--primary);
            font-family: var(--font-mono);
        }

        /* Filters - Compact */
        .filters-bar {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 180px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 0.5rem 0.75rem 0.5rem 2rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            font-size: 0.8rem;
            font-family: var(--font-sans);
            transition: all 0.2s;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        .search-box i {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .filter-select {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            font-size: 0.75rem;
            font-family: var(--font-sans);
            background: var(--bg-secondary);
            color: var(--text-primary);
            cursor: pointer;
            min-width: 120px;
        }

        .filter-select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .refresh-btn {
            padding: 0.5rem 0.75rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: var(--radius);
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.3rem;
            transition: all 0.2s;
        }

        .refresh-btn:hover {
            background: var(--primary-dark);
        }

        .refresh-btn.loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Jobs Table - Compact */
        .jobs-table-wrapper {
            overflow-x: auto;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            background: var(--bg-secondary);
        }

        .jobs-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.75rem;
        }

        .jobs-table th {
            background: var(--bg-tertiary);
            padding: 0.5rem 0.75rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.7rem;
            color: var(--text-primary);
            border-bottom: 1px solid var(--glass-border);
            white-space: nowrap;
            position: sticky;
            top: 0;
        }

        .jobs-table th.sortable {
            cursor: pointer;
            user-select: none;
        }

        .jobs-table th.sortable:hover {
            background: var(--light-alt);
        }

        .jobs-table th i {
            margin-left: 0.3rem;
            font-size: 0.6rem;
            opacity: 0.5;
        }

        .jobs-table td {
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid var(--glass-border);
            vertical-align: middle;
            color: var(--text-secondary);
        }

        .jobs-table tr:hover {
            background: var(--bg-tertiary);
        }

        .jobs-table tr:last-child td {
            border-bottom: none;
        }

        /* Column Styles - Compact */
        .col-role {
            min-width: 180px;
        }

        .col-company {
            min-width: 100px;
        }

        .col-location {
            min-width: 100px;
        }

        .col-distance {
            min-width: 80px;
            white-space: nowrap;
        }

        .col-date {
            min-width: 70px;
            white-space: nowrap;
        }

        .col-salary {
            min-width: 100px;
            white-space: nowrap;
        }

        .salary-text {
            font-size: 0.75rem;
            color: #22c55e;
            font-weight: 600;
        }

        .salary-text.no-salary {
            color: var(--text-muted);
            font-weight: 400;
            font-style: italic;
        }

        .col-worktype {
            min-width: 70px;
            white-space: nowrap;
        }

        .worktype-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .worktype-badge.remote {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;
        }

        .worktype-badge.hybrid {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
        }

        .worktype-badge.onsite {
            background: rgba(249, 115, 22, 0.15);
            color: #f97316;
        }

        .col-description {
            min-width: 250px;
            max-width: 400px;
            cursor: pointer;
        }

        .col-description:hover {
            background: rgba(59, 130, 246, 0.05);
        }

        .col-apply {
            min-width: 70px;
            text-align: center;
        }

        .role-title {
            font-weight: 600;
            color: var(--text-primary);
            display: block;
            font-size: 0.8rem;
            line-height: 1.3;
        }

        .role-dept {
            font-size: 0.65rem;
            color: var(--text-muted);
        }

        .company-name {
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.75rem;
        }

        .company-logo {
            width: 18px;
            height: 18px;
            border-radius: 3px;
            object-fit: contain;
            background: var(--bg-tertiary);
        }

        .location-text {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: var(--text-muted);
            font-size: 0.7rem;
        }

        .location-text i {
            font-size: 0.6rem;
            color: var(--primary);
        }

        .remote-badge {
            display: inline-block;
            padding: 0.1rem 0.4rem;
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
            font-size: 0.6rem;
            font-weight: 600;
            border-radius: 50px;
            margin-left: 0.3rem;
        }

        /* ATS Match Score Badges */
        .ats-score-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.3rem 0.6rem;
            font-size: 0.75rem;
            font-weight: 700;
            border-radius: 6px;
            cursor: help;
        }

        .ats-score-badge i {
            font-size: 0.65rem;
        }

        .ats-excellent {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(34, 197, 94, 0.1));
            color: #16a34a;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .ats-good {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1));
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .ats-fair {
            background: linear-gradient(135deg, rgba(234, 179, 8, 0.2), rgba(234, 179, 8, 0.1));
            color: #ca8a04;
            border: 1px solid rgba(234, 179, 8, 0.3);
        }

        .ats-low {
            background: linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(249, 115, 22, 0.1));
            color: #ea580c;
            border: 1px solid rgba(249, 115, 22, 0.3);
        }

        .ats-poor {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.1));
            color: #dc2626;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .ats-tooltip {
            position: relative;
        }

        .ats-tooltip .ats-tooltip-content {
            display: none;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 8px;
            padding: 0.75rem;
            min-width: 200px;
            max-width: 280px;
            z-index: 1000;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            margin-bottom: 8px;
        }

        .ats-tooltip:hover .ats-tooltip-content {
            display: block;
        }

        .ats-tooltip-content h4 {
            font-size: 0.8rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .ats-tooltip-content .ats-breakdown {
            font-size: 0.7rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .ats-tooltip-content .ats-keywords {
            font-size: 0.65rem;
            color: var(--text-muted);
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
        }

        .ats-tooltip-content .ats-keyword-tag {
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
        }

        .col-ats {
            width: 90px;
            text-align: center;
        }

        /* ATS Filter Highlight */
        .ats-filter-active {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(59, 130, 246, 0.1)) !important;
            border-color: #16a34a !important;
        }

        .date-text {
            color: var(--text-muted);
        }

        .date-new {
            color: #16a34a;
            font-weight: 600;
        }

        .distance-badge {
            display: inline-block;
            padding: 0.15rem 0.4rem;
            font-size: 0.6rem;
            font-weight: 600;
            border-radius: 50px;
            white-space: nowrap;
        }

        /* Distance priority colors - green (close) to yellow/orange (far) */
        .priority-1 { background: rgba(34, 197, 94, 0.15); color: #16a34a; }
        .priority-2 { background: rgba(34, 197, 94, 0.12); color: #22c55e; }
        .priority-3 { background: rgba(132, 204, 22, 0.15); color: #65a30d; }
        .priority-4 { background: rgba(234, 179, 8, 0.15); color: #ca8a04; }
        .priority-5 { background: rgba(249, 115, 22, 0.12); color: #ea580c; }
        .priority-6 { background: rgba(37, 99, 235, 0.12); color: #2563eb; }
        .priority-7 { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        .priority-8 { background: rgba(236, 72, 153, 0.12); color: #db2777; }
        .priority-9 { background: rgba(168, 85, 247, 0.12); color: #a855f7; }
        .priority-10 { background: rgba(6, 182, 212, 0.12); color: #0891b2; }
        .priority-11 { background: rgba(148, 163, 184, 0.15); color: #64748b; }
        .priority-12 { background: rgba(148, 163, 184, 0.12); color: #94a3b8; }
        .priority-99 { background: rgba(239, 68, 68, 0.1); color: #dc2626; }

        .description-text {
            color: var(--text-muted);
            line-height: 1.4;
            font-size: 0.7rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            cursor: pointer;
        }

        .description-text:hover {
            color: var(--accent-blue);
        }

        .desc-focus {
            color: var(--accent-purple);
            font-weight: 500;
        }

        .desc-tools {
            color: var(--accent-cyan);
            font-family: monospace;
            font-size: 0.65rem;
        }

        .desc-pay {
            color: #16a34a;
            font-weight: 600;
        }

        .desc-remote {
            color: #f59e0b;
            font-size: 0.6rem;
        }

        /* Job Description Modal */
        .jd-modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .jd-modal-overlay.active {
            display: flex;
        }

        .jd-modal {
            background: var(--bg-secondary);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            max-width: 900px;
            width: 100%;
            max-height: 85vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .jd-modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--glass-border);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .jd-modal-title h2 {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .jd-modal-title .company {
            color: var(--accent-blue);
            font-size: 0.9rem;
        }

        .jd-modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: color 0.2s;
        }

        .jd-modal-close:hover {
            color: var(--text-primary);
        }

        .jd-modal-body {
            padding: 1.5rem;
            overflow-y: auto;
            flex: 1;
        }

        .jd-section {
            margin-bottom: 1.5rem;
        }

        .jd-section h3 {
            font-size: 0.9rem;
            color: var(--accent-purple);
            margin-bottom: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .jd-section ul {
            list-style: none;
            padding: 0;
        }

        .jd-section li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .jd-section li::before {
            content: 'â–¸';
            position: absolute;
            left: 0;
            color: var(--accent-cyan);
        }

        .jd-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .jd-tag {
            padding: 0.35rem 0.75rem;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 50px;
            font-size: 0.75rem;
            color: var(--accent-blue);
            font-family: monospace;
        }

        .jd-pay-box {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 8px;
            padding: 1rem;
        }

        .jd-pay-box .pay-range {
            font-size: 1.25rem;
            font-weight: 700;
            color: #16a34a;
        }

        .jd-pay-box .pay-detail {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .jd-full-desc {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-size: 0.8rem;
            color: var(--text-secondary);
            line-height: 1.7;
            white-space: pre-wrap;
        }

        .jd-modal-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid var(--glass-border);
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .apply-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.35rem 0.6rem;
            background: var(--primary);
            color: var(--white);
            text-decoration: none;
            border-radius: var(--radius);
            font-size: 0.65rem;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .apply-btn:hover {
            background: var(--primary-dark);
            color: var(--white);
        }

        .apply-actions {
            display: flex;
            gap: 0.3rem;
            align-items: center;
        }

        .cover-letter-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--bg-tertiary);
            color: var(--primary);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .cover-letter-btn:hover {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .cover-letter-btn i {
            font-size: 0.7rem;
        }

        .resume-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--bg-tertiary);
            color: #4ade80;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .resume-btn:hover {
            background: #16a34a;
            color: var(--white);
            border-color: #16a34a;
            transform: translateY(-1px);
        }

        .resume-btn i {
            font-size: 0.85rem;
        }

        .exclude-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--bg-tertiary);
            color: #ef4444;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .exclude-btn:hover {
            background: #ef4444;
            color: var(--white);
            border-color: #ef4444;
        }

        .exclude-btn i {
            font-size: 0.7rem;
        }

        .restore-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--bg-tertiary);
            color: #22c55e;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .restore-btn:hover {
            background: #22c55e;
            color: var(--white);
            border-color: #22c55e;
        }

        .restore-btn i {
            font-size: 0.7rem;
        }

        .excluded-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--bg-secondary);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .excluded-toggle:hover {
            border-color: var(--primary);
        }

        .excluded-toggle.active {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
            color: #ef4444;
        }

        .excluded-toggle .count {
            background: var(--bg-tertiary);
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
            font-size: 0.65rem;
            font-weight: 600;
        }

        .excluded-toggle.active .count {
            background: rgba(239, 68, 68, 0.2);
        }

        .backup-controls {
            display: flex;
            gap: 0.25rem;
            margin-left: 0.5rem;
            padding-left: 0.5rem;
            border-left: 1px solid var(--border);
        }

        .backup-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }

        .backup-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .backup-btn i {
            font-size: 0.8rem;
        }

        .excluded-row {
            opacity: 0.6;
            background: rgba(239, 68, 68, 0.05) !important;
        }

        .applied-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--bg-tertiary);
            color: #f59e0b;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .applied-btn:hover {
            background: #f59e0b;
            color: var(--white);
            border-color: #f59e0b;
        }

        .applied-btn i {
            font-size: 0.7rem;
        }

        .applied-btn.is-applied {
            background: #f59e0b;
            color: var(--white);
            border-color: #f59e0b;
        }

        .applied-btn.is-applied:hover {
            background: #d97706;
            border-color: #d97706;
        }

        .applied-row {
            background: rgba(245, 158, 11, 0.08) !important;
        }

        .applied-row .role-title {
            color: #f59e0b;
        }

        .applied-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.6rem;
            color: #f59e0b;
            background: rgba(245, 158, 11, 0.15);
            padding: 0.1rem 0.4rem;
            border-radius: 4px;
            margin-left: 0.5rem;
        }

        .applied-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid #f59e0b;
            border-radius: var(--radius);
            font-size: 0.75rem;
            color: #f59e0b;
            text-decoration: none;
            transition: all 0.2s;
        }

        .applied-link:hover {
            background: #f59e0b;
            color: var(--white);
        }

        .applied-link .count {
            background: rgba(245, 158, 11, 0.2);
            padding: 0.1rem 0.4rem;
            border-radius: 10px;
            font-size: 0.65rem;
            font-weight: 600;
        }

        .applied-link:hover .count {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Loading State */
        .loading-row td {
            padding: 2rem;
            text-align: center;
            color: var(--text-muted);
        }

        .loading-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--glass-border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
            vertical-align: middle;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 3rem;
            color: var(--glass-border);
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: var(--radius);
            border: 1px solid var(--glass-border);
        }

        .pagination-info {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .pagination-btns {
            display: flex;
            gap: 0.5rem;
        }

        .page-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--glass-border);
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border-radius: var(--radius);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-btn:hover:not(:disabled) {
            border-color: var(--primary);
            color: var(--primary);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Company Filter Tags */
        .company-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .company-tag {
            padding: 0.4rem 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .company-tag:hover,
        .company-tag.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .company-tag .count {
            background: rgba(0,0,0,0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 50px;
            font-size: 0.65rem;
        }

        .company-tag.active .count {
            background: rgba(255,255,255,0.2);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .jobs-table {
                font-size: 0.8rem;
            }

            .col-description {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .jobs-section {
                padding: 30px 1rem 40px;
            }

            .jobs-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .filters-bar {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }

            .filter-select {
                width: 100%;
            }

            .col-location, .col-distance, .col-date {
                display: none;
            }

            .pagination {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Company Link Buttons */
        .company-link-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
        }

        .company-link-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
        }

        .company-link-logo {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            object-fit: contain;
            flex-shrink: 0;
        }

        /* Document Manager Section */
        .doc-manager-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .doc-manager-title h3 {
            font-size: 1.1rem;
            margin: 0;
            color: var(--text-primary);
        }

        .upload-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            border: 2px solid var(--primary);
            background: rgba(37, 99, 235, 0.05);
            color: var(--primary);
            border-radius: var(--radius);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upload-btn:hover {
            background: var(--primary);
            color: white;
        }

        /* GitHub Token Settings */
        .github-settings {
            background: var(--bg-tertiary);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .github-settings-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
        }

        .github-settings-header h4 {
            margin: 0;
            font-size: 0.9rem;
            color: #fbbf24;
        }

        .github-settings-content {
            display: none;
        }

        .github-settings-content.show {
            display: block;
        }

        .github-settings input[type="password"] {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid rgba(251, 191, 36, 0.4);
            border-radius: 6px;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            box-sizing: border-box;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .github-settings .btn-save-token {
            padding: 0.4rem 0.75rem;
            background: #d97706;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            font-weight: 500;
        }

        .github-settings .btn-save-token:hover {
            background: #b45309;
        }

        .github-settings p {
            font-size: 0.8rem;
            color: #fbbf24;
            margin: 0 0 0.75rem 0;
            line-height: 1.4;
        }

        .token-status {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-left: auto;
        }

        .token-status.configured {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .token-status.not-configured {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .updating-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .updating-indicator i {
            animation: spin 1s linear infinite;
        }

        /* Upload Section */
        .upload-section {
            background: var(--bg-tertiary);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .upload-section-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .upload-section-header h4 {
            margin: 0;
            font-size: 0.9rem;
            color: #4ade80;
        }

        .upload-section-content {
            display: none;
            margin-top: 0.75rem;
        }

        .upload-section-content.show {
            display: block;
        }

        .upload-form {
            display: grid;
            gap: 0.75rem;
        }

        .upload-form-row {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .upload-form-group {
            flex: 1;
            min-width: 200px;
        }

        .upload-form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 600;
            color: #4ade80;
            margin-bottom: 0.25rem;
        }

        .upload-form-group input[type="text"],
        .upload-form-group select {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 6px;
            font-size: 0.85rem;
            box-sizing: border-box;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .upload-form-group input[type="file"] {
            width: 100%;
            padding: 0.4rem;
            border: 2px dashed rgba(34, 197, 94, 0.4);
            border-radius: 6px;
            font-size: 0.8rem;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
        }

        .upload-form-group input[type="file"]:hover {
            background: var(--bg-tertiary);
            border-color: #4ade80;
        }

        .btn-upload {
            padding: 0.6rem 1.25rem;
            background: #16a34a;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-upload:hover {
            background: #15803d;
        }

        .btn-upload:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .upload-status {
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 6px;
            border: 1px solid rgba(34, 197, 94, 0.3);
            font-size: 0.85rem;
            color: #4ade80;
            display: none;
        }

        .upload-status.show {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .upload-status.error {
            border-color: rgba(239, 68, 68, 0.4);
            color: #f87171;
            background: rgba(239, 68, 68, 0.1);
        }

        .upload-status.success {
            border-color: rgba(34, 197, 94, 0.4);
            color: #4ade80;
            background: rgba(34, 197, 94, 0.1);
        }

        /* Delete Button */
        .btn-delete {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-delete:hover {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }

        .btn-delete:disabled {
            background: var(--bg-tertiary);
            color: var(--text-muted);
            border-color: var(--glass-border);
            cursor: not-allowed;
        }

        .delete-confirm-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .delete-confirm-dialog {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            text-align: center;
            border: 1px solid var(--glass-border);
        }

        .delete-confirm-dialog h3 {
            margin: 0 0 0.5rem;
            color: #f87171;
        }

        .delete-confirm-dialog p {
            margin: 0 0 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .delete-confirm-dialog .filename {
            background: var(--bg-tertiary);
            padding: 0.5rem;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            word-break: break-all;
            color: var(--text-primary);
        }

        .delete-confirm-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }

        .delete-confirm-buttons button {
            padding: 0.6rem 1.25rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .btn-cancel {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .btn-cancel:hover {
            background: var(--glass-border);
        }

        .btn-confirm-delete {
            background: #dc2626;
            color: white;
        }

        .btn-confirm-delete:hover {
            background: #b91c1c;
        }

        /* ============ SLIDE-OUT PANEL ============ */
        .slideout-panel {
            position: fixed;
            top: 0;
            right: -420px;
            width: 400px;
            height: 100vh;
            background: var(--bg-secondary);
            border-left: 1px solid var(--glass-border);
            z-index: 1000;
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
            box-shadow: -4px 0 30px rgba(0, 0, 0, 0.4);
        }

        .slideout-panel.open {
            right: 0;
        }

        .slideout-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .slideout-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .slideout-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.25rem;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--glass-border);
        }

        .slideout-header h3 {
            font-size: 1rem;
            margin: 0;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .slideout-header h3 i {
            color: var(--primary);
        }

        .slideout-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.25rem;
            transition: color 0.2s;
        }

        .slideout-close:hover {
            color: var(--text-primary);
        }

        .slideout-tabs {
            display: flex;
            border-bottom: 1px solid var(--glass-border);
        }

        .slideout-tab {
            flex: 1;
            padding: 0.75rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
        }

        .slideout-tab:hover {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .slideout-tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            background: rgba(59, 130, 246, 0.05);
        }

        .slideout-content {
            flex: 1;
            overflow-y: auto;
            padding: 1rem 1.25rem;
        }

        .slideout-section {
            display: none;
        }

        .slideout-section.active {
            display: block;
        }

        /* Quick Links in Panel */
        .panel-quick-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .panel-link-group {
            margin-bottom: 1rem;
        }

        .panel-link-group-title {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            padding-bottom: 0.25rem;
            border-bottom: 1px solid var(--glass-border);
        }

        .panel-link-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.4rem;
        }

        .panel-link {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.5rem 0.6rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 500;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
        }

        .panel-link:hover {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .panel-link img {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            object-fit: contain;
        }

        /* Documents in Panel */
        .panel-docs {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .panel-github-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 6px;
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
        }

        .panel-github-link:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .panel-github-link i {
            font-size: 1rem;
        }

        .panel-doc-list {
            background: var(--bg-tertiary);
            border-radius: 8px;
            padding: 0.75rem;
            border: 1px solid var(--glass-border);
        }

        /* Toggle Button (Right Side) */
        .slideout-toggle {
            position: fixed;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: none;
            padding: 1rem 0.5rem;
            border-radius: 8px 0 0 8px;
            cursor: pointer;
            z-index: 998;
            box-shadow: -2px 0 15px rgba(59, 130, 246, 0.4);
            transition: all 0.2s;
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }

        .slideout-toggle:hover {
            padding-right: 0.75rem;
            box-shadow: -4px 0 20px rgba(59, 130, 246, 0.6);
        }

        .slideout-toggle span {
            color: white;
            font-weight: 600;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .slideout-toggle i {
            font-size: 0.9rem;
        }

        .slideout-toggle.hidden {
            display: none;
        }

        /* Mobile responsive */
        @media (max-width: 480px) {
            .slideout-panel {
                width: 100%;
                right: -100%;
            }
            .panel-link-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Neural Network Background -->
    <canvas id="neural-bg"></canvas>

    <!-- Password Protection Overlay -->
    <div id="password-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #0a0a0f 0%, #111118 100%); z-index: 99999; display: flex; align-items: center; justify-content: center;">
        <div style="background: #18181f; padding: 40px; border-radius: 12px; text-align: center; max-width: 400px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);">
            <i class="fas fa-lock" style="font-size: 48px; color: #3b82f6; margin-bottom: 20px;"></i>
            <h2 style="margin: 0 0 10px; color: #ffffff;">Private Page</h2>
            <p style="color: #a1a1aa; margin-bottom: 20px;">This page is restricted. Enter password to continue.</p>
            <input type="password" id="password-input" placeholder="Enter password"
                   style="width: 100%; padding: 12px 16px; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; font-size: 16px; margin-bottom: 15px; box-sizing: border-box; background: #111118; color: #ffffff;"
                   onkeypress="if(event.key==='Enter') checkPassword()">
            <button onclick="checkPassword()"
                    style="width: 100%; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; font-weight: 600;">
                Unlock
            </button>
            <p id="password-error" style="color: #f87171; margin-top: 15px; display: none;">Incorrect password</p>
        </div>
    </div>

    <script>
        // Simple password protection (password: chundu2025)
        const correctHash = '8a5da52ed126447d359e70c05721a8aa'; // MD5 of chundu2025

        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString(16);
        }

        function checkPassword() {
            const input = document.getElementById('password-input').value;
            // Simple check - password is: chundu2025
            if (input === 'chundu2025') {
                sessionStorage.setItem('jobs_auth', 'true');
                document.getElementById('password-overlay').style.display = 'none';
            } else {
                document.getElementById('password-error').style.display = 'block';
                document.getElementById('password-input').style.borderColor = '#ef4444';
            }
        }

        // Check if already authenticated this session
        if (sessionStorage.getItem('jobs_auth') === 'true') {
            document.getElementById('password-overlay').style.display = 'none';
        }
    </script>

    <!-- Simple Navigation -->
    <nav style="background: #111827; border-bottom: none;">
        <div class="nav-container" style="justify-content: space-between;">
            <a href="../" class="logo" style="color: white;">
                <i class="fas fa-arrow-left" style="margin-right: 0.5rem;"></i>
                Back to Portfolio
            </a>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">
                    <i class="fas fa-briefcase" style="color: var(--primary); margin-right: 0.5rem;"></i>
                    Job Listings Dashboard
                </span>
            </div>
        </div>
    </nav>

    <!-- Minimal Top Bar for Full Screen Mode -->
    <div class="jobs-topbar">
        <div class="jobs-topbar-title">
            <i class="fas fa-briefcase"></i>
            Job <span>Listings</span>
        </div>
        <div class="jobs-topbar-actions">
            <a href="../" class="topbar-link">
                <i class="fas fa-home"></i> Portfolio
            </a>
            <a href="../resume/" class="topbar-link">
                <i class="fas fa-file-alt"></i> Resume
            </a>
            <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme" style="background: none; border: none; cursor: pointer; color: var(--text-secondary); font-size: 1rem;">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>

    <!-- Fresh Jobs Ticker - Last 6 Hours -->
    <div class="fresh-jobs-ticker">
        <div class="ticker-label">
            <i class="fas fa-bolt"></i> LAST 6 HRS
        </div>
        <div class="ticker-wrapper">
            <div class="ticker-content" id="freshJobsTicker">
                <span class="ticker-item">Loading fresh job postings...</span>
            </div>
        </div>
    </div>

    <!-- Slide-out Panel Toggle Button -->
    <button class="slideout-toggle" onclick="toggleSlideoutPanel()">
        <span><i class="fas fa-folder-open"></i> Resources</span>
    </button>

    <!-- Slide-out Panel Overlay -->
    <div class="slideout-overlay" id="slideout-overlay" onclick="toggleSlideoutPanel()"></div>

    <!-- Slide-out Panel -->
    <div class="slideout-panel" id="slideout-panel">
        <div class="slideout-header">
            <h3><i class="fas fa-briefcase"></i> Resources</h3>
            <button class="slideout-close" onclick="toggleSlideoutPanel()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="slideout-tabs">
            <button class="slideout-tab active" onclick="switchTab('quick-links')">
                <i class="fas fa-link"></i> Quick Links
            </button>
            <button class="slideout-tab" onclick="switchTab('documents')">
                <i class="fas fa-file-alt"></i> Documents
            </button>
        </div>
        <div class="slideout-content">
            <!-- Quick Links Section -->
            <div class="slideout-section active" id="section-quick-links">
                <div class="panel-quick-links">
                    <!-- LinkedIn Recent Jobs -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">LinkedIn - Recent Jobs</div>
                        <div class="panel-link-grid">
                            <a href="https://www.linkedin.com/jobs/search/?keywords=%22Staff%20DevOps%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="panel-link"><i class="fab fa-linkedin" style="color: #0077b5;"></i> Staff DevOps (3h)</a>
                            <a href="https://www.linkedin.com/jobs/search/?keywords=%22DevOps%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="panel-link"><i class="fab fa-linkedin" style="color: #0077b5;"></i> DevOps (3h)</a>
                            <a href="https://www.linkedin.com/jobs/search/?keywords=%22Site%20Reliability%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="panel-link"><i class="fab fa-linkedin" style="color: #0077b5;"></i> SRE (3h)</a>
                            <a href="https://www.linkedin.com/jobs/search/?keywords=%22Infrastructure%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="panel-link"><i class="fab fa-linkedin" style="color: #0077b5;"></i> Infra Eng (3h)</a>
                            <a href="https://www.linkedin.com/jobs/search/?keywords=%22ML%20infrastructure%22%20OR%20%22AI%20infrastructure%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="panel-link"><i class="fab fa-linkedin" style="color: #0077b5;"></i> AI/ML Infra (6h)</a>
                            <a href="https://www.linkedin.com/jobs/search/?keywords=%22Forward%20Deployed%20Engineer%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="panel-link"><i class="fab fa-linkedin" style="color: #0077b5;"></i> FDE (6h)</a>
                        </div>
                    </div>
                    <!-- Big Tech -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">Big Tech</div>
                        <div class="panel-link-grid">
                            <a href="https://jobs.careers.microsoft.com/global/en/search?q=devops%20engineer&l=en_us&pg=1&pgSz=20&o=Recent" target="_blank" class="panel-link"><img src="../assets/images/logos/microsoft.png" alt="MS"> Microsoft</a>
                            <a href="https://amazon.jobs/en/search?offset=0&result_limit=10&sort=recent&country%5B%5D=USA&base_query=devops%20engineer" target="_blank" class="panel-link"><img src="../assets/images/logos/amazon.png" alt="AWS"> Amazon/AWS</a>
                            <a href="https://www.google.com/about/careers/applications/jobs/results/?q=devops%20engineer&location=United%20States" target="_blank" class="panel-link"><img src="../assets/images/logos/google.png" alt="Google"> Google</a>
                            <a href="https://www.metacareers.com/jobs/?q=devops%20engineer&offices[0]=United%20States" target="_blank" class="panel-link"><img src="../assets/images/logos/meta.png" alt="Meta"> Meta</a>
                            <a href="https://jobs.apple.com/en-us/search?search=devops%20engineer&sort=newest" target="_blank" class="panel-link"><img src="../assets/images/logos/apple.png" alt="Apple"> Apple</a>
                            <a href="https://nvidia.wd5.myworkdayjobs.com/NVIDIAExternalCareerSite?locationCountry=bc33aa3152ec42d4995f4791a106ed09&q=devops%20engineer" target="_blank" class="panel-link"><img src="../assets/images/logos/nvidia.png" alt="NVIDIA"> NVIDIA</a>
                        </div>
                    </div>
                    <!-- AI Companies -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">AI Companies</div>
                        <div class="panel-link-grid">
                            <a href="https://jobs.ashbyhq.com/openai" target="_blank" class="panel-link"><img src="../assets/images/logos/openai.png" alt="OpenAI"> OpenAI</a>
                            <a href="https://boards.greenhouse.io/anthropic" target="_blank" class="panel-link"><i class="fas fa-robot" style="color: #d97706;"></i> Anthropic</a>
                            <a href="https://boards.greenhouse.io/xai" target="_blank" class="panel-link"><i class="fas fa-bolt" style="color: #1d9bf0;"></i> xAI</a>
                            <a href="https://boards.greenhouse.io/characterai" target="_blank" class="panel-link"><i class="fas fa-comments" style="color: #8b5cf6;"></i> Character.AI</a>
                        </div>
                    </div>
                    <!-- AI Infrastructure -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">AI Infrastructure</div>
                        <div class="panel-link-grid">
                            <a href="https://boards.greenhouse.io/coreweave" target="_blank" class="panel-link"><i class="fas fa-server" style="color: #22c55e;"></i> CoreWeave</a>
                            <a href="https://boards.greenhouse.io/crusoe" target="_blank" class="panel-link"><i class="fas fa-cloud" style="color: #3b82f6;"></i> Crusoe</a>
                            <a href="https://jobs.lever.co/lambdalabs" target="_blank" class="panel-link"><i class="fas fa-microchip" style="color: #8b5cf6;"></i> Lambda</a>
                            <a href="https://boards.greenhouse.io/togetherai" target="_blank" class="panel-link"><i class="fas fa-cubes" style="color: #f59e0b;"></i> Together AI</a>
                            <a href="https://boards.greenhouse.io/baseten" target="_blank" class="panel-link"><i class="fas fa-layer-group" style="color: #ef4444;"></i> Baseten</a>
                            <a href="https://scale.com/careers#open-roles" target="_blank" class="panel-link"><img src="../assets/images/logos/scaleai.png" alt="Scale AI"> Scale AI</a>
                        </div>
                    </div>
                    <!-- Social/Consumer -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">Social/Consumer</div>
                        <div class="panel-link-grid">
                            <a href="https://careers.tiktok.com/position?keywords=devops%20engineer&category=&location=CT_243&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="panel-link"><img src="../assets/images/logos/tiktok.png" alt="TikTok"> TikTok</a>
                            <a href="https://jobs.bytedance.com/en/position?keywords=devops&category=&location=&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="panel-link"><img src="../assets/images/logos/bytedance.png" alt="ByteDance"> ByteDance</a>
                            <a href="https://careers.salesforce.com/en/jobs/?search=devops%20engineer&country=United%20States" target="_blank" class="panel-link"><img src="../assets/images/logos/salesforce.png" alt="Salesforce"> Salesforce</a>
                            <a href="https://careers.adobe.com/us/en/search-results?keywords=devops%20engineer" target="_blank" class="panel-link"><i class="fab fa-adobe" style="color: #ff0000;"></i> Adobe</a>
                        </div>
                    </div>
                    <!-- Finance -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">Finance</div>
                        <div class="panel-link-grid">
                            <a href="https://www.capitalonecareers.com/search-jobs?k=devops%20engineer" target="_blank" class="panel-link"><img src="../assets/images/logos/capitalone.png" alt="CapitalOne"> Capital One</a>
                            <a href="https://jpmorgan.fa.oraclecloud.com/hcmUI/CandidateExperience/en/sites/CX_1001/requisitions?keyword=devops" target="_blank" class="panel-link"><img src="../assets/images/logos/jpmorgan.png" alt="JPMorgan"> JPMorgan</a>
                            <a href="https://usa.visa.com/careers/job-search.html?q=devops%20engineer" target="_blank" class="panel-link"><img src="../assets/images/logos/visa.png" alt="Visa"> Visa</a>
                        </div>
                    </div>
                    <!-- Enterprise -->
                    <div class="panel-link-group">
                        <div class="panel-link-group-title">Enterprise</div>
                        <div class="panel-link-grid">
                            <a href="https://jobs.intuit.com/search-jobs?k=devops%20engineer&l=United%20States" target="_blank" class="panel-link"><img src="../assets/images/logos/intuit.png" alt="Intuit"> Intuit</a>
                            <a href="https://careers.oracle.com/jobs/#en/sites/jobsearch/requisitions?keyword=devops%20engineer&location=United%20States" target="_blank" class="panel-link"><img src="../assets/images/logos/oracle.png" alt="Oracle"> Oracle</a>
                            <a href="https://www.ibm.com/careers/search?field_keyword_18[0]=DevOps" target="_blank" class="panel-link"><img src="../assets/images/logos/ibm.png" alt="IBM"> IBM</a>
                            <a href="https://jobs.cisco.com/jobs/SearchJobs/devops%20engineer?21178=%5B169482%5D&21178_format=6020" target="_blank" class="panel-link"><img src="../assets/images/logos/cisco.png" alt="Cisco"> Cisco</a>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Documents Section -->
            <div class="slideout-section" id="section-documents">
                <div class="panel-docs">
                    <a href="https://github.com/schundu007/chundu/tree/main/assets/resume" target="_blank" class="panel-github-link">
                        <i class="fab fa-github"></i> Manage Files on GitHub
                    </a>
                    <div class="panel-doc-list" id="panel-doc-list">
                        <p style="color: var(--text-muted); text-align: center; font-size: 0.8rem;">Loading documents...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <main class="main-content">
    <!-- Page Header -->
    <header class="page-header">
        <h1>Job <span>Listings</span></h1>
    </header>

    <!-- Quick Links and Documents moved to slide-out panel -->
    <!-- Jobs Section -->
    <section class="jobs-section">
        <div class="jobs-container">
            <!-- Header with Stats -->
            <div class="jobs-header">
                <h2>Live Job <span>Listings</span></h2>
                <div class="jobs-stats">
                    <div class="jobs-stat">
                        <i class="fas fa-briefcase"></i>
                        <span>Total Jobs: <strong id="total-jobs">0</strong></span>
                    </div>
                    <div class="jobs-stat">
                        <i class="fas fa-building"></i>
                        <span>Companies: <strong id="total-companies">0</strong></span>
                    </div>
                    <div class="jobs-stat">
                        <i class="fas fa-clock"></i>
                        <span>Updated: <strong id="last-updated">--</strong></span>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Search jobs by title, company, or keywords...">
                </div>
                <select class="filter-select" id="location-filter">
                    <option value="us" selected>All US Locations</option>
                    <option value="remote">Remote (US)</option>
                    <option value="sanjose">San Jose / Milpitas / Santa Clara</option>
                    <option value="bayarea">SF Bay Area / California</option>
                    <option value="texas">Texas</option>
                    <option value="florida">Florida</option>
                    <option value="nc">North Carolina</option>
                    <option value="ny">New York</option>
                    <option value="seattle">Seattle / Washington</option>
                </select>
                <select class="filter-select" id="date-filter">
                    <option value="">All Dates</option>
                    <option value="0.125">Last 3 hours</option>
                    <option value="0.25">Last 6 hours</option>
                    <option value="0.5" selected>Last 12 hours</option>
                    <option value="1">Last 24 hours</option>
                    <option value="3">Last 3 days</option>
                    <option value="7">Last 7 days</option>
                    <option value="14">Last 14 days</option>
                    <option value="30">Last 30 days</option>
                </select>
                <button class="refresh-btn" id="refresh-btn">
                    <i class="fas fa-sync-alt"></i>
                    Refresh
                </button>
                <button class="excluded-toggle" id="excluded-toggle" title="Show/Hide excluded jobs">
                    <i class="fas fa-eye-slash"></i>
                    Hidden
                    <span class="count" id="excluded-count">0</span>
                </button>
                <a href="applied/" class="applied-link" title="View applied jobs">
                    <i class="fas fa-check-circle"></i>
                    Applied
                    <span class="count" id="applied-count">0</span>
                </a>
                <div class="backup-controls">
                    <button class="backup-btn" id="export-data-btn" title="Export applied & hidden jobs to file">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="backup-btn" id="import-data-btn" title="Import applied & hidden jobs from file">
                        <i class="fas fa-upload"></i>
                    </button>
                    <input type="file" id="import-file-input" accept=".json" style="display: none;">
                </div>
            </div>

            <!-- Company Tags -->
            <div class="company-tags" id="company-tags">
                <!-- Populated by JavaScript -->
            </div>

            <!-- ATS Score Distribution - Hidden by default since ATS filter is off -->
            <div class="ats-distribution" id="ats-distribution" style="display: none;"></div>

            <!-- Jobs Table -->
            <div class="jobs-table-wrapper">
                <table class="jobs-table">
                    <thead>
                        <tr>
                            <th class="col-role sortable" data-sort="title">Role <i class="fas fa-sort"></i></th>
                            <th class="col-description">Description <i class="fas fa-expand-alt" style="font-size: 0.65rem; opacity: 0.5; margin-left: 0.25rem;" title="Click rows to expand"></i></th>
                            <th class="col-date sortable" data-sort="date">Posted <i class="fas fa-sort"></i></th>
                            <th class="col-salary sortable" data-sort="salary">Salary <i class="fas fa-sort"></i></th>
                            <th class="col-company sortable" data-sort="company">Company <i class="fas fa-sort"></i></th>
                            <th class="col-location">Location</th>
                            <th class="col-distance sortable" data-sort="distance">Distance <i class="fas fa-sort"></i></th>
                            <th class="col-worktype">Type</th>
                            <th class="col-apply">Action</th>
                        </tr>
                    </thead>
                    <tbody id="jobs-tbody">
                        <tr class="loading-row">
                            <td colspan="10">
                                <span class="loading-spinner"></span>
                                Loading jobs from company career portals...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination" style="display: none;">
                <div class="pagination-info">
                    Showing <span id="showing-start">1</span>-<span id="showing-end">25</span> of <span id="showing-total">0</span> jobs
                </div>
                <div class="pagination-btns" id="pagination-btns">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Document Manager Section - Hidden (moved to slide-out panel) -->
    <section id="document-manager" class="doc-manager-section" style="display: none !important;">
        <div style="max-width: 1400px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <i class="fas fa-folder-open" style="color: var(--primary); font-size: 1.25rem;"></i>
                    <h3 style="font-size: 1.1rem; margin: 0; color: var(--text-primary);">Document Manager</h3>
                </div>
                <a href="https://github.com/schundu007/chundu/tree/main/assets/resume" target="_blank" class="upload-btn" style="text-decoration: none;">
                    <i class="fab fa-github"></i>
                    Manage Files on GitHub
                </a>
            </div>

            <!-- GitHub Token Settings -->
            <div class="github-settings">
                <div class="github-settings-header" onclick="toggleGithubSettings()">
                    <i class="fas fa-key" style="color: #d97706;"></i>
                    <h4>GitHub Auto-Sync Settings</h4>
                    <span id="token-status" class="token-status not-configured">Not Configured</span>
                    <i id="settings-chevron" class="fas fa-chevron-down" style="color: #92400e; margin-left: 0.5rem;"></i>
                </div>
                <div id="github-settings-content" class="github-settings-content">
                    <p>
                        <i class="fas fa-info-circle"></i>
                        Enter your GitHub Personal Access Token (with repo scope) to automatically update the manifest when you set active documents.
                        <a href="https://github.com/settings/tokens/new?scopes=repo&description=Resume%20Manager" target="_blank" style="color: #d97706;">Create token</a>
                    </p>
                    <input type="password" id="github-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" />
                    <button class="btn-save-token" onclick="saveGithubToken()">
                        <i class="fas fa-save"></i> Save Token
                    </button>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <div class="upload-section-header" onclick="toggleUploadSection()">
                    <i class="fas fa-cloud-upload-alt" style="color: #16a34a;"></i>
                    <h4>Upload New Document</h4>
                    <i id="upload-chevron" class="fas fa-chevron-down" style="color: #166534; margin-left: 0.5rem;"></i>
                </div>
                <div id="upload-section-content" class="upload-section-content">
                    <div class="upload-form">
                        <div class="upload-form-row">
                            <div class="upload-form-group">
                                <label for="upload-file">Select File (PDF, DOC, DOCX)</label>
                                <input type="file" id="upload-file" accept=".pdf,.doc,.docx" onchange="handleFileSelect(this)" />
                            </div>
                            <div class="upload-form-group">
                                <label for="upload-type">Document Type</label>
                                <select id="upload-type">
                                    <option value="resume">Resume</option>
                                    <option value="coverLetter">Cover Letter</option>
                                </select>
                            </div>
                        </div>
                        <div class="upload-form-row">
                            <div class="upload-form-group">
                                <label for="upload-name">Display Name</label>
                                <input type="text" id="upload-name" placeholder="e.g., Google SRE Resume" />
                            </div>
                        </div>
                        <div>
                            <button class="btn-upload" id="btn-upload" onclick="uploadDocument()" disabled>
                                <i class="fas fa-upload"></i> Upload to GitHub
                            </button>
                        </div>
                        <div id="upload-status" class="upload-status"></div>
                    </div>
                </div>
            </div>

            <div id="doc-manager-content" style="background: var(--bg-tertiary); border-radius: 12px; padding: 1.5rem; border: 1px solid var(--border); margin-top: 1rem;">
                <p style="color: var(--text-muted); text-align: center;">Loading documents...</p>
            </div>
        </div>
    </section>
    </main>

    <!-- Job Description Modal -->
    <div class="jd-modal-overlay" id="jd-modal-overlay" onclick="closeJDModal(event)">
        <div class="jd-modal" onclick="event.stopPropagation()">
            <div class="jd-modal-header">
                <div class="jd-modal-title">
                    <h2 id="jd-modal-title">Job Title</h2>
                    <p class="company" id="jd-modal-company">Company Name</p>
                </div>
                <button class="jd-modal-close" onclick="closeJDModal()">&times;</button>
            </div>
            <div class="jd-modal-body" id="jd-modal-body">
                <!-- Content populated by JavaScript -->
            </div>
            <div class="jd-modal-footer">
                <span id="jd-modal-source" style="color: var(--text-muted); font-size: 0.75rem; margin-right: auto;">Source: â€”</span>
                <button class="btn btn-secondary" id="jd-modal-resume" title="Download tailored resume">
                    <i class="fas fa-file-download"></i> Resume
                </button>
                <button class="btn btn-secondary" id="jd-modal-cover" title="Download cover letter">
                    <i class="fas fa-file-alt"></i> Cover Letter
                </button>
                <a href="#" id="jd-modal-apply" class="btn btn-primary" target="_blank">
                    <i class="fas fa-external-link-alt"></i> Apply Now
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="padding: 1.5rem 2rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <a href="../" style="color: white; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-arrow-left"></i> Back to Portfolio
            </a>
            <p style="opacity: 0.6; font-size: 0.8rem; margin: 0;">&copy; 2025 Sudhakar Chundu. Private job listings dashboard.</p>
        </div>
    </footer>

    <script>
        // ============ THEME TOGGLE ============
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme') || 'dark';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('jobsTheme', newTheme);

            // Update toggle button icon
            const toggle = document.querySelector('.theme-toggle');
            if (toggle) {
                toggle.innerHTML = newTheme === 'dark'
                    ? '<i class="fas fa-moon"></i>'
                    : '<i class="fas fa-sun"></i>';
            }
        }

        // Initialize theme from localStorage
        (function() {
            const savedTheme = localStorage.getItem('jobsTheme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);

            // Set correct icon on load
            document.addEventListener('DOMContentLoaded', function() {
                const toggle = document.querySelector('.theme-toggle');
                if (toggle) {
                    toggle.innerHTML = savedTheme === 'dark'
                        ? '<i class="fas fa-moon"></i>'
                        : '<i class="fas fa-sun"></i>';
                }
            });
        })();

        // ============ SLIDE-OUT PANEL FUNCTIONS ============
        function toggleSlideoutPanel() {
            const panel = document.getElementById('slideout-panel');
            const overlay = document.getElementById('slideout-overlay');
            const toggle = document.querySelector('.slideout-toggle');

            panel.classList.toggle('open');
            overlay.classList.toggle('open');
            toggle.classList.toggle('hidden');
        }

        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.slideout-tab').forEach(tab => tab.classList.remove('active'));
            event.target.closest('.slideout-tab').classList.add('active');

            // Update sections
            document.querySelectorAll('.slideout-section').forEach(section => section.classList.remove('active'));
            document.getElementById('section-' + tabName).classList.add('active');

            // Load documents if Documents tab is selected
            if (tabName === 'documents') {
                loadPanelDocuments();
            }
        }

        function loadPanelDocuments() {
            const container = document.getElementById('panel-doc-list');
            if (!container) return;

            // Fetch documents from manifest
            fetch('../assets/resume/manifest.json')
                .then(res => res.json())
                .then(data => {
                    let html = '<div style="display: flex; flex-direction: column; gap: 0.5rem;">';

                    // Resumes section
                    if (data.resumes && data.resumes.length > 0) {
                        html += '<div style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-bottom: 0.25rem;">Resumes</div>';
                        data.resumes.forEach(doc => {
                            const isActive = doc.active ? '<span style="color: #22c55e; font-size: 0.65rem; margin-left: auto;"><i class="fas fa-check-circle"></i></span>' : '';
                            html += `
                                <a href="../assets/resume/${doc.file}" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem; background: var(--bg-secondary); border-radius: 6px; text-decoration: none; color: var(--text-secondary); font-size: 0.75rem; border: 1px solid var(--glass-border);">
                                    <i class="fas fa-file-alt" style="color: #3b82f6;"></i>
                                    <span style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${doc.name}</span>
                                    ${isActive}
                                </a>
                            `;
                        });
                    }

                    // Cover Letters section
                    if (data.coverLetters && data.coverLetters.length > 0) {
                        html += '<div style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.5px; color: var(--text-muted); margin-top: 0.75rem; margin-bottom: 0.25rem;">Cover Letters</div>';
                        data.coverLetters.forEach(doc => {
                            const isActive = doc.active ? '<span style="color: #22c55e; font-size: 0.65rem; margin-left: auto;"><i class="fas fa-check-circle"></i></span>' : '';
                            html += `
                                <a href="../assets/resume/${doc.file}" target="_blank" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem; background: var(--bg-secondary); border-radius: 6px; text-decoration: none; color: var(--text-secondary); font-size: 0.75rem; border: 1px solid var(--glass-border);">
                                    <i class="fas fa-envelope" style="color: #8b5cf6;"></i>
                                    <span style="flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${doc.name}</span>
                                    ${isActive}
                                </a>
                            `;
                        });
                    }

                    html += '</div>';

                    if ((!data.resumes || data.resumes.length === 0) && (!data.coverLetters || data.coverLetters.length === 0)) {
                        container.innerHTML = '<p style="color: var(--text-muted); text-align: center; font-size: 0.8rem;">No documents found</p>';
                    } else {
                        container.innerHTML = html;
                    }
                })
                .catch(() => {
                    container.innerHTML = '<p style="color: var(--text-muted); text-align: center; font-size: 0.8rem;">Could not load documents</p>';
                });
        }

        // ============ UTILITY FUNCTIONS (MUST BE FIRST) ============

        // Extract job description (not company overview)
        function stripHtml(html) {
            if (!html) return '';
            try {
                const tmp = document.createElement('div');

                // Step 1: Decode HTML entities (handles double-encoded content like &lt; -> <)
                tmp.innerHTML = html;
                let decoded = tmp.innerHTML; // First decode

                // Step 2: Now set as innerHTML again to parse as actual HTML and extract text
                tmp.innerHTML = decoded;
                let text = tmp.textContent || tmp.innerText || '';

                // Step 3: Check if still contains HTML tags (triple-encoded edge case)
                if (text.includes('<') && text.includes('>')) {
                    tmp.innerHTML = text;
                    text = tmp.textContent || tmp.innerText || '';
                }

                // Clean up whitespace
                text = text.replace(/\s+/g, ' ').trim();

                // Find job-related section (skip company intro)
                const jobMarkers = [
                    'what you\'ll do',
                    'what you will do',
                    'responsibilities',
                    'the role',
                    'about the role',
                    'in this role',
                    'your impact',
                    'the opportunity',
                    'job summary',
                    'position overview'
                ];

                const lowerText = text.toLowerCase();
                let bestIdx = text.length;
                let foundMarker = '';

                for (const marker of jobMarkers) {
                    const idx = lowerText.indexOf(marker);
                    if (idx !== -1 && idx < bestIdx && idx < text.length * 0.6) {
                        bestIdx = idx;
                        foundMarker = marker;
                    }
                }

                // Extract from the job section if found
                if (bestIdx < text.length && foundMarker) {
                    text = text.substring(bestIdx + foundMarker.length).trim();
                    // Remove leading punctuation
                    text = text.replace(/^[:\s-]+/, '').trim();
                }

                // Truncate
                if (text.length > 300) {
                    text = text.substring(0, 300) + '...';
                }

                return text || 'View job details on company website';
            } catch (e) {
                return 'View job details on company website';
            }
        }

        // Extract salary from job description
        function extractSalary(text) {
            if (!text) return null;

            // Common salary patterns in job descriptions
            const patterns = [
                // Annual Salary: $XXX,XXX - $XXX,XXX USD (Anthropic style)
                /annual\s*salary[:\s]*\$\s*([\d,]+)\s*[-â€“â€”]\s*\$\s*([\d,]+)/gi,
                // Base Pay Range / Base Salary Range: $XXX,XXX - $XXX,XXX (Zscaler style)
                /base\s*(?:pay|salary)\s*range[:\s]*\$\s*([\d,]+)\s*[-â€“â€”]\s*\$\s*([\d,]+)/gi,
                // "is $XXX,XXX to $XXX,XXX" or "is: $XXX,XXXâ€“$XXX,XXX" (Scale AI / Discord style)
                /is[:\s]*\$\s*([\d,]+)\s*(?:to|[-â€“â€”])\s*\$\s*([\d,]+)/gi,
                // $XXX,XXX to $XXX,XXX + equity (Discord style)
                /\$\s*([\d,]+)\s+to\s+\$\s*([\d,]+)/gi,
                // $XXX,XXX - $XXX,XXX USD
                /\$\s*([\d,]+)\s*[-â€“â€”]\s*\$\s*([\d,]+)\s*(?:USD|usd)?/gi,
                // $XXX,XXX - $XXX,XXX or $XXXK - $XXXK
                /\$\s*([\d,]+)\s*[kK]?\s*[-â€“â€”]+\s*\$?\s*([\d,]+)\s*[kK]?/gi,
                // $XXX,XXX/year or $XXX,XXX per year
                /\$\s*([\d,]+)\s*[kK]?\s*(?:\/|\s*per\s*)(?:year|yr|annual)/gi,
                // salary/compensation/pay context with range
                /(?:salary|compensation|pay|range)[:\s]*\$?\s*([\d,]+)\s*[kK]?\s*[-â€“â€”to]+\s*\$?\s*([\d,]+)\s*[kK]?/gi,
                // XXXk - XXXk or XXXk to XXXk
                /([\d]+)\s*[kK]\s*(?:[-â€“â€”]|to)\s*([\d]+)\s*[kK]/gi,
                // Base salary: $XXX,XXX - $XXX,XXX
                /base\s*(?:salary)?[:\s]*\$\s*([\d,]+)(?:\s*[-â€“â€”]\s*\$\s*([\d,]+))?/gi,
            ];

            for (const pattern of patterns) {
                const match = pattern.exec(text);
                if (match) {
                    let low = match[1].replace(/,/g, '');
                    let high = match[2] ? match[2].replace(/,/g, '') : null;

                    // Convert to number
                    low = parseInt(low);
                    if (high) high = parseInt(high);

                    // Handle K notation (e.g., 150K = 150000)
                    if (low < 1000) low *= 1000;
                    if (high && high < 1000) high *= 1000;

                    // Validate reasonable salary range (50K - 1M)
                    if (low >= 50000 && low <= 1000000) {
                        if (high && high >= 50000 && high <= 1000000) {
                            return { low, high, display: `$${Math.round(low/1000)}K - $${Math.round(high/1000)}K` };
                        }
                        return { low, high: null, display: `$${Math.round(low/1000)}K+` };
                    }
                }
            }

            return null;
        }

        // Format salary for display
        function formatSalary(salary) {
            if (!salary) return '<span class="salary-text no-salary">â€”</span>';
            return `<span class="salary-text">${salary.display}</span>`;
        }

        // Extract work type (Remote/Hybrid/Onsite) from location and description
        function extractWorkType(location, description) {
            const text = ((location || '') + ' ' + (description || '')).toLowerCase();

            // Check for remote indicators
            if (text.includes('remote') || text.includes('work from home') || text.includes('wfh')) {
                if (text.includes('hybrid') || text.includes('flexible')) {
                    return 'Hybrid';
                }
                return 'Remote';
            }

            // Check for hybrid
            if (text.includes('hybrid') || text.includes('flexible location')) {
                return 'Hybrid';
            }

            // Check for onsite indicators
            if (text.includes('onsite') || text.includes('on-site') || text.includes('in-office') || text.includes('in office')) {
                return 'Onsite';
            }

            // Default to Onsite if location is specified (most jobs without remote mention are onsite)
            return 'Onsite';
        }

        // PRECISE filter for DevOps/SRE/Cloud/Platform/Infrastructure roles
        // Target: Staff/Senior/Principal level DevOps, SRE, Platform, Cloud, Infrastructure
        // Required: Terraform, Kubernetes, Ansible, AWS, Azure, GCP experience
        function isRelevantJob(job) {
            const title = (job.title || '').toLowerCase();
            const desc = (job.description || '').toLowerCase();

            // ===== PRIORITY 1: Exact role matches (Senior/Staff level) =====
            const exactRolePatterns = [
                // DevOps roles with seniority
                /\b(staff|senior|principal|lead|head)\s*(of\s*)?(devops|dev[\s-]?ops)/i,
                /devops\s*(architect|engineer|lead)/i,

                // SRE roles with seniority
                /\b(staff|senior|principal|lead)\s*sre\b/i,
                /\b(staff|senior|principal|lead)\s*site\s*reliability/i,
                /site\s*reliability\s*(architect|engineer|lead)/i,

                // Platform Engineering with seniority
                /\b(staff|senior|principal|lead)\s*platform\s*engineer/i,
                /platform\s*(architect|engineering\s*lead)/i,

                // Cloud roles with seniority
                /\b(staff|senior|principal|lead)\s*cloud\s*(engineer|architect)/i,
                /cloud\s*architect/i,
                /cloud\s*platform\s*engineer/i,

                // Infrastructure roles with seniority (excluding ML/AI/Data)
                /\b(staff|senior|principal|lead)\s*infrastructure\s*(engineer|architect)/i,
                /infrastructure\s*architect/i,
                /solutions\s*architect/i,

                // Kubernetes specific
                /\b(staff|senior|principal|lead)\s*kubernetes\s*engineer/i,
                /kubernetes\s*(architect|platform)/i,
                /k8s\s*engineer/i,
            ];

            // ===== PRIORITY 2: General role patterns =====
            const generalRolePatterns = [
                /\bdevops\b/i,
                /\bdev[\s-]?ops\b/i,
                /\bsre\b/i,
                /site\s*reliability/i,
                /reliability\s*engineer/i,
                /platform\s*engineer/i,
                /cloud\s*engineer/i,
                /production\s*engineer/i,
                /operations\s*engineer/i,
                /build\s*engineer/i,
                /release\s*engineer/i,
                /developer\s*productivity/i,
                /\bmlops\b/i,
                /\baiops\b/i,
            ];

            // ===== PRIORITY 3: Infrastructure Engineer with tool requirements =====
            const isInfraEngineer = /infrastructure\s*engineer/i.test(title) &&
                                    !/\b(ml|ai|data|machine\s*learning|research|training|inference|database)\b/i.test(title);

            // Check matches
            const hasExactMatch = exactRolePatterns.some(p => p.test(title));
            const hasGeneralMatch = generalRolePatterns.some(p => p.test(title));

            // Infrastructure engineer needs tool validation in description
            const hasRelevantTools = /\b(terraform|kubernetes|k8s|ansible|aws|azure|gcp|docker|helm|argocd|jenkins|gitlab[\s-]?ci|github\s*actions)\b/i.test(desc);

            // STAFF/SENIOR Infrastructure roles
            const isStaffInfra = /\b(staff|senior|principal|lead)\b/i.test(title) &&
                                 /infrastructure/i.test(title) &&
                                 !/\b(ml|ai|data|machine\s*learning|research|training)\b/i.test(title);

            // Must match at least one pattern
            if (!hasExactMatch && !hasGeneralMatch && !isInfraEngineer && !isStaffInfra) return false;

            // For generic "Infrastructure Engineer" without seniority, require relevant tools
            if (isInfraEngineer && !hasExactMatch && !isStaffInfra && !hasRelevantTools) return false;

            // ===== EXCLUSION patterns - reject if these appear in title =====
            const excludePatterns = [
                // Junior/Entry roles
                /\bintern\b/i,
                /\bjunior\b/i,
                /entry[\s-]?level/i,
                /new\s*grad/i,
                /\bassociate\b.*engineer/i,
                /engineer\s*[i1]\b/i,

                // AI/ML Infrastructure (NOT pure DevOps/SRE)
                /\bml\s*infrastructure/i,
                /\bai\s*infrastructure/i,
                /\bml\s*infra\b/i,
                /\bai\s*infra\b/i,
                /pre[\s-]?training/i,
                /research\s*engineer/i,
                /research\s*infrastructure/i,
                /training\s*infrastructure/i,
                /inference\s*infrastructure/i,
                /model\s*infrastructure/i,
                /\bsafeguards\b/i,
                /\balignment\b/i,

                // Data Engineering (separate domain)
                /\bdata\s*engineer/i,
                /\bdata\s*scientist/i,
                /\bdata\s*platform/i,
                /\bdata\s*infrastructure/i,
                /\bdatabase\s*infrastructure/i,
                /\banalytics\s*engineer/i,

                // ML/AI Engineering (not infra)
                /machine\s*learning\s*engineer/i,
                /\bml\s*engineer\b/i,

                // Non-infra roles
                /\bfrontend\b/i,
                /\bfront[\s-]?end\b/i,
                /\bbackend\b/i,
                /\bback[\s-]?end\b/i,
                /\bfullstack\b/i,
                /\bfull[\s-]?stack\b/i,
                /\bmobile\s*engineer/i,
                /\bios\s*engineer/i,
                /\bandroid\s*engineer/i,
                /\bui\s*engineer/i,
                /\bux\s*engineer/i,

                // Security (separate domain)
                /\bsecurity\s*engineer/i,
                /\bappsec\b/i,
                /\binfosec\b/i,

                // QA/Testing
                /\bqa\s*engineer/i,
                /\btest\s*engineer/i,
                /\bsdet\b/i,

                // Support
                /\bsupport\s*engineer/i,
                /technical\s*support/i,

                // Non-technical
                /\bproduct\s*manager/i,
                /\bprogram\s*manager/i,
                /\bsales\b/i,
                /\bmarketing\b/i,
                /\brecruiter\b/i,

                // Other non-matching
                /\bmaps\s*infrastructure/i,
                /\bautonomy\b/i,
                /\bapi\s*infrastructure/i,
            ];

            const isExcluded = excludePatterns.some(pattern => pattern.test(title));
            return !isExcluded;
        }

        // ============ DISTANCE PRIORITY FROM SAN JOSE ============
        // Returns priority score (lower = closer to San Jose)
        function getDistancePriority(location) {
            if (!location) return 999;
            const loc = location.toLowerCase();

            // Priority 1: San Jose and immediate neighbors (0-15 miles)
            if (/san jose|san josÃ©|santa clara|milpitas|sunnyvale|cupertino|campbell|los gatos|saratoga|mountain view/i.test(loc)) {
                return 1;
            }

            // Priority 2: South Bay / Peninsula (15-30 miles)
            if (/palo alto|menlo park|redwood city|fremont|newark|union city|hayward|foster city|san mateo|burlingame|belmont/i.test(loc)) {
                return 2;
            }

            // Priority 3: SF and East Bay (30-50 miles)
            if (/san francisco|sf,|oakland|berkeley|emeryville|alameda|walnut creek|pleasanton|dublin|livermore|daly city/i.test(loc)) {
                return 3;
            }

            // Priority 4: Greater Bay Area (50-80 miles)
            if (/bay area|south bay|peninsula|east bay|napa|sonoma|santa cruz|gilroy|morgan hill|concord|richmond/i.test(loc)) {
                return 4;
            }

            // Priority 5: California (other)
            if (/california|ca,|\bca\b|los angeles|san diego|sacramento|irvine|pasadena|la,/i.test(loc)) {
                return 5;
            }

            // Priority 6: Remote (US-based)
            if (/remote/i.test(loc) && /us|usa|united states|america/i.test(loc)) {
                return 6;
            }

            // Priority 7: Remote (unspecified)
            if (/remote/i.test(loc)) {
                return 7;
            }

            // Priority 8: Texas (user's secondary preference)
            if (/texas|tx,|\btx\b|austin|dallas|houston|san antonio|plano|irving/i.test(loc)) {
                return 8;
            }

            // Priority 9: Florida (user's preference)
            if (/florida|fl,|\bfl\b|miami|orlando|tampa|jacksonville|fort lauderdale/i.test(loc)) {
                return 9;
            }

            // Priority 10: North Carolina (user's preference)
            if (/north carolina|nc,|\bnc\b|charlotte|raleigh|durham|research triangle/i.test(loc)) {
                return 10;
            }

            // Priority 11: Other major tech hubs
            if (/seattle|washington|new york|ny,|\bny\b|boston|chicago|denver|portland|atlanta|phoenix/i.test(loc)) {
                return 11;
            }

            // Priority 12: Other US locations
            if (/united states|usa|\bus\b/i.test(loc)) {
                return 12;
            }

            // Priority 99: Everything else (non-US)
            return 99;
        }

        // Get human-readable distance label
        function getDistanceLabel(priority) {
            const labels = {
                1: 'San Jose Area (0-15 mi)',
                2: 'South Bay/Peninsula (15-30 mi)',
                3: 'SF/East Bay (30-50 mi)',
                4: 'Greater Bay Area (50-80 mi)',
                5: 'California',
                6: 'Remote (US)',
                7: 'Remote',
                8: 'Texas',
                9: 'Florida',
                10: 'North Carolina',
                11: 'Other Tech Hub',
                12: 'Other US',
                99: 'Outside US'
            };
            return labels[priority] || 'Unknown';
        }

        // ============ USER PROFILE FOR COVER LETTER & RESUME ============
        const USER_PROFILE = {
            name: 'Sudhakar Chundu',
            title: 'Distinguished Cloud AI Architect',
            email: 'chundubabu@gmail.com',
            phone: '(513) 666-0099',
            linkedin: 'linkedin.com/in/schundu',
            github: 'github.com/schundu007',
            website: 'sudhakarchundu.org',
            location: 'San Jose, CA',
            yearsExperience: '18+',
            summary: 'Distinguished Cloud AI Architect and Platform Engineering Leader with 18+ years of hands-on experience building and operating large-scale GPU compute platforms, AI/ML infrastructure, and distributed systems at planetary scale. Expert in Slurm cluster management, GPU scheduling (NVIDIA A100/V100/T4/DGX), Kubernetes orchestration, and multi-cloud architecture (AWS, Azure, OCI). Lead global teams of 13+ engineers across Infrastructure, Security, Networking, and DevOps, managing $15M+ budgets while delivering $8M+ in documented cost savings.',
            keyMetrics: [
                { value: '$8M+', label: 'Annual Savings | 73% Cost Reduction' },
                { value: '10M+', label: 'Users Served | 15+ Regions' },
                { value: '99.99%', label: 'GPU Cluster Uptime' }
            ],
            skills: {
                'GPU/HPC Computing': 'Slurm, Slinky, NVIDIA BCM/DGX, vcluster, CUDA, TensorRT, A100/V100/T4 scheduling, Triton Inference Server, vLLM',
                'AI/ML Infrastructure': 'PyTorch, Ray, Flyte, MLflow, Kubeflow, SageMaker, Azure ML, TorchServe, KServe, distributed training',
                'Cloud Platforms': 'AWS (EKS, EC2, SageMaker, EMR), Azure (AKS, APIM, ML), OCI',
                'Container Orchestration': 'Kubernetes (EKS/AKS), Docker, Helm, Istio Service Mesh, KEDA, ArgoCD, FluxCD',
                'Infrastructure as Code': 'Terraform (5+ modules), Ansible, ARM/Bicep, CloudFormation, Packer, GitOps, OPA, Checkov',
                'Big Data & Streaming': 'Databricks, Apache Spark, Flink, Kafka, Hadoop/HDFS, Hive, Trino, Airflow, Delta Lake',
                'Security & Compliance': 'SOC2, HIPAA, FedRAMP, ISO 27001, HITRUST, DevSecOps (Snyk, SonarQube), Vault, ZTNA',
                'SRE & Observability': 'SLI/SLO/SLA, error budgets, chaos engineering, Prometheus, Grafana, Datadog, OpenTelemetry'
            },
            experience: [
                {
                    title: 'Distinguished Cloud AI Architect / Director of Platform Engineering',
                    company: 'Trackonomy Systems',
                    location: 'San Jose, CA',
                    dates: 'Oct 2023 â€“ Present',
                    bullets: [
                        'Platform Architecture: Designed and built K8s microservices platform from ground up; migrated 40+ workloads from VMs, VMSS, Azure WebApps, Function Apps, and datacenter Java applications to containerized architecture',
                        'GPU/HPC Infrastructure: Designed Slurm-based GPU compute platform â€” 65 GPUs across 8 nodes using Slurm, Slinky (Slurm-on-Kubernetes), and NVIDIA BCM; achieved 99.99% uptime serving 12+ enterprise clients for AI inference and training',
                        'DevSecOps & Compliance: Led SOC2 Type II, FedRAMP, and HIPAA certification; implemented Trivy, Falco, OPA, Gitleaks, and HashiCorp Vault for GenAI/LLM platform security',
                        'Cloud FinOps: Reduced cloud costs 73% ($10Mâ†’$2.7M/year) through GPU utilization optimization, fair-share scheduling, reserved instance planning, and vendor consolidation',
                        'Platform Engineering: Built CI/CD pipelines for 100+ applications using GitHub Actions, Docker, Terraform, and GitOps (ArgoCD, FluxCD); reduced deployment time 95% (daysâ†’15 minutes)',
                        'Leadership: Built team 0â†’6 engineers | Managed $15M+ budgets | Led incident response and on-call rotations'
                    ]
                },
                {
                    title: 'Senior SRE / Cloud Architect â€” ML Infrastructure',
                    company: 'Wipro Technologies â€” OSDU Data Platform',
                    location: 'Seattle, WA',
                    dates: 'Feb 2020 â€“ Oct 2023',
                    bullets: [
                        'Platform: Architected OSDU R3 data platform processing exabytes of seismic data on GPU-accelerated Kubernetes clusters (EKS/Fargate) with Docker, Spark, Kafka, and Hadoop/HDFS for ExxonMobil, Chevron, BP, Shell',
                        'Infrastructure: Delivered GPU cluster management at scale with Kubernetes, Istio, and KEDA, ensuring 99.99% availability for ML inference workloads across multi-region deployments',
                        'IaC & GitOps: Created 5+ Terraform modules (VPC, EKS, RDS, DynamoDB, S3, SageMaker, IAM); implemented GitOps (ArgoCD/FluxCD) with Jenkins pipelines; reduced deployment time 80%',
                        'Security & Quality: Integrated Trivy, Kube-bench, and SonarQube into CI/CD; implemented OPA policies and Ansible automation for compliance enforcement',
                        'Observability: Built observability stack with Prometheus/Grafana/ELK and GPU metrics; created automation in Go/Python reducing manual operations 85%; led 24x7 on-call rotations'
                    ]
                },
                {
                    title: 'Multi-Cloud Architect / Senior Infrastructure Engineer',
                    company: 'Tata Consultancy Services',
                    location: 'Multiple Locations (Boston, Chicago, Dallas)',
                    dates: 'May 2007 â€“ Feb 2020',
                    bullets: [
                        'Cloud Architect â€” Harvard Pilgrim Health Care (Jun 2018 â€“ Feb 2020): Led cloud modernization for HIPAA/HITRUST-regulated AI/ML applications to AWS; implemented GPU-enabled EKS clusters with NFS-backed persistent storage; Jenkins/Ansible CI/CD pipelines; DevSecOps (HashiCorp Vault, SonarQube, OWASP); managed $6M infrastructure budget',
                        'Cloud Senior Engineer â€” CNA Insurance (May 2015 â€“ Jun 2018): Managed Kubernetes/Helm deployments on AWS; built reproducible K8s applications; automated provisioning with Ansible playbooks; Led cloud migrations to AWS, Azure, OpenStack; pioneered Docker/Kubernetes adoption (2013-2014); implemented CI/CD with Jenkins/Ansible',
                        'Solutions Architect â€” PwC (Jan 2011 â€“ Apr 2015): Led infrastructure deployments for 20+ facility buildouts including branch offices, call centers, and data centers; managed $15M+ annual budgets; Integrated Chef/Jenkins deployment pipelines; migrated VMware VMs to AWS (EC2, S3, ELB)',
                        'Middleware Engineer â€” Verizon, Owens Corning (May 2007 â€“ Jan 2011): Deep Linux/Unix administration with WebSphere/WebLogic middleware; JVM optimization, clustering, and HA configurations; Managed large-scale production systems on bare-metal serving millions of users; led capacity planning, performance testing, and 24x7 L3 operations'
                    ]
                }
            ],
            certifications: [
                'AWS Solutions Architect Professional',
                'Azure Solutions Architect Expert',
                'AWS ML Specialty',
                'Azure AI Engineer',
                'NVIDIA DLI Infrastructure',
                'CKA (Kubernetes)',
                'HashiCorp Terraform',
                'Databricks Certified',
                'TOGAF 9',
                'ITIL v4'
            ],
            education: {
                degree: 'Bachelor of Engineering in Mechanical Engineering',
                school: 'Acharya Nagarjuna University'
            }
        };

        // ============ ATS MATCHING SYSTEM ============
        // Extract keywords from USER_PROFILE for ATS matching
        const ATS_KEYWORDS = {
            // Core role titles (high weight)
            titles: [
                'devops', 'sre', 'site reliability', 'platform engineer', 'infrastructure engineer',
                'cloud architect', 'cloud engineer', 'staff engineer', 'senior engineer', 'principal',
                'ml infrastructure', 'ai infrastructure', 'data engineer', 'systems engineer'
            ],
            // Technical skills from resume (medium-high weight)
            skills: [
                // GPU/HPC
                'gpu', 'cuda', 'nvidia', 'a100', 'v100', 'h100', 'dgx', 'slurm', 'hpc', 'tensorrt', 'vllm', 'triton',
                // AI/ML
                'pytorch', 'tensorflow', 'ray', 'mlflow', 'kubeflow', 'sagemaker', 'azure ml', 'kserve', 'torchserve',
                'machine learning', 'ml ops', 'mlops', 'ai/ml', 'distributed training', 'model serving', 'inference',
                // Cloud Platforms
                'aws', 'azure', 'oci', 'oracle cloud', 'multi-cloud', 'hybrid cloud', 'eks', 'aks', 'gke',
                'ec2', 'sagemaker', 'emr', 'lambda', 'fargate',
                // Containers & Orchestration
                'kubernetes', 'k8s', 'docker', 'helm', 'istio', 'service mesh', 'keda', 'argocd', 'fluxcd',
                'openshift', 'rancher', 'container', 'microservices',
                // Infrastructure as Code
                'terraform', 'ansible', 'cloudformation', 'arm templates', 'bicep', 'pulumi', 'packer',
                'gitops', 'opa', 'checkov', 'infrastructure as code', 'iac',
                // Big Data & Streaming
                'databricks', 'spark', 'apache spark', 'flink', 'kafka', 'hadoop', 'hdfs', 'hive', 'trino',
                'airflow', 'delta lake', 'data pipeline', 'etl',
                // Security & Compliance
                'soc2', 'hipaa', 'fedramp', 'iso 27001', 'hitrust', 'devsecops', 'snyk', 'sonarqube',
                'vault', 'hashicorp vault', 'zero trust', 'security', 'compliance',
                // Observability
                'prometheus', 'grafana', 'datadog', 'splunk', 'elk', 'elasticsearch', 'opentelemetry',
                'monitoring', 'observability', 'logging', 'alerting', 'sli', 'slo', 'sla',
                // CI/CD
                'jenkins', 'github actions', 'gitlab ci', 'circleci', 'ci/cd', 'cicd', 'pipeline',
                'continuous integration', 'continuous deployment',
                // Languages
                'python', 'go', 'golang', 'bash', 'shell', 'java', 'typescript',
                // Databases
                'postgresql', 'mysql', 'mongodb', 'redis', 'dynamodb', 'rds', 'database'
            ],
            // Certifications (bonus weight)
            certifications: [
                'aws solutions architect', 'azure solutions architect', 'aws certified', 'azure certified',
                'cka', 'ckad', 'cks', 'kubernetes certified', 'terraform certified', 'hashicorp certified',
                'databricks certified', 'togaf', 'itil'
            ],
            // Experience indicators (context weight)
            experience: [
                'migration', 'modernization', 'cost reduction', 'cost optimization', 'finops',
                'incident response', 'on-call', 'reliability', 'uptime', 'availability',
                'scalability', 'performance', 'optimization', 'automation',
                'team lead', 'leadership', 'mentor', 'architect'
            ]
        };

        // Flatten all keywords for quick lookup
        const ALL_ATS_KEYWORDS = [
            ...ATS_KEYWORDS.titles,
            ...ATS_KEYWORDS.skills,
            ...ATS_KEYWORDS.certifications,
            ...ATS_KEYWORDS.experience
        ];

        // Calculate ATS match score for a job
        function calculateATSScore(job) {
            const titleLower = (job.title || '').toLowerCase();
            const descLower = (job.description || '').toLowerCase();
            const deptLower = (job.department || '').toLowerCase();
            const fullText = `${titleLower} ${descLower} ${deptLower}`;

            let matchedKeywords = new Set();
            let titleMatches = 0;
            let skillMatches = 0;
            let certMatches = 0;
            let expMatches = 0;

            // Check title matches (highest weight)
            ATS_KEYWORDS.titles.forEach(keyword => {
                if (fullText.includes(keyword)) {
                    matchedKeywords.add(keyword);
                    titleMatches++;
                }
            });

            // Check skill matches
            ATS_KEYWORDS.skills.forEach(keyword => {
                if (fullText.includes(keyword)) {
                    matchedKeywords.add(keyword);
                    skillMatches++;
                }
            });

            // Check certification matches
            ATS_KEYWORDS.certifications.forEach(keyword => {
                if (fullText.includes(keyword)) {
                    matchedKeywords.add(keyword);
                    certMatches++;
                }
            });

            // Check experience matches
            ATS_KEYWORDS.experience.forEach(keyword => {
                if (fullText.includes(keyword)) {
                    matchedKeywords.add(keyword);
                    expMatches++;
                }
            });

            // Calculate weighted score
            // Weights: titles=30%, skills=50%, certs=10%, experience=10%
            const titleScore = Math.min((titleMatches / 3) * 30, 30); // Max 30 points from 3+ title matches
            const skillScore = Math.min((skillMatches / 10) * 50, 50); // Max 50 points from 10+ skill matches
            const certScore = Math.min((certMatches / 2) * 10, 10); // Max 10 points from 2+ cert matches
            const expScore = Math.min((expMatches / 3) * 10, 10); // Max 10 points from 3+ exp matches

            const totalScore = Math.round(titleScore + skillScore + certScore + expScore);

            return {
                score: Math.min(totalScore, 100), // Cap at 100
                matchedKeywords: Array.from(matchedKeywords),
                breakdown: {
                    title: titleMatches,
                    skills: skillMatches,
                    certs: certMatches,
                    experience: expMatches
                }
            };
        }

        // Get ATS score badge color
        function getATSBadgeClass(score) {
            if (score >= 85) return 'ats-excellent';
            if (score >= 75) return 'ats-good';
            if (score >= 60) return 'ats-fair';
            if (score >= 40) return 'ats-low';
            return 'ats-poor';
        }

        // Get ATS score label
        function getATSLabel(score) {
            if (score >= 85) return 'Excellent';
            if (score >= 75) return 'Good';
            if (score >= 60) return 'Fair';
            if (score >= 40) return 'Low';
            return 'Poor';
        }

        // Minimum ATS score filter (default 0 = show all)
        let minATSScore = 0;

        // ============ COVER LETTER GENERATOR ============
        function generateCoverLetter(job) {
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const skillsList = Object.keys(USER_PROFILE.skills).slice(0, 4).join(', ');
            const exp = USER_PROFILE.experience[0];

            const coverLetter = `${USER_PROFILE.name}
${USER_PROFILE.location}
${USER_PROFILE.email} | ${USER_PROFILE.phone}
${USER_PROFILE.linkedin} | ${USER_PROFILE.website}

${today}

Hiring Manager
${job.company}
${job.location}

Dear Hiring Manager,

I am writing to express my strong interest in the ${job.title} position at ${job.company}. With ${USER_PROFILE.yearsExperience} years of experience in cloud infrastructure, platform engineering, and AI/ML systems, I am excited about the opportunity to contribute to your team.

${USER_PROFILE.summary}

Key qualifications that align with this role:

â€¢ ${exp.bullets[0]}
â€¢ ${exp.bullets[1]}
â€¢ ${exp.bullets[2]}
â€¢ ${exp.bullets[3]}

My technical expertise spans ${skillsList}, which directly aligns with the requirements for this position. I am particularly drawn to ${job.company}'s mission and the opportunity to work on ${job.department ? job.department + ' initiatives' : 'cutting-edge infrastructure challenges'}.

I am confident that my experience leading large-scale platform engineering initiatives, combined with my passion for building reliable and scalable systems, would make me a valuable addition to your team.

I would welcome the opportunity to discuss how my background and skills can contribute to ${job.company}'s continued success. Thank you for considering my application.

Sincerely,
${USER_PROFILE.name}
${USER_PROFILE.title}`;

            return coverLetter;
        }

        // ============ TAILORED RESUME GENERATOR ============
        function generateResume(job) {
            const jobTitle = job.title.toLowerCase();
            const jobDesc = (job.description || '').toLowerCase();

            // Determine which skills to highlight based on job
            let relevantSkillCategories = [];
            if (jobTitle.includes('ml') || jobTitle.includes('ai') || jobTitle.includes('machine learning') || jobDesc.includes('ml') || jobDesc.includes('machine learning')) {
                relevantSkillCategories.push('AI/ML Infrastructure', 'GPU/HPC Computing');
            }
            if (jobTitle.includes('sre') || jobTitle.includes('reliability') || jobDesc.includes('sre') || jobDesc.includes('reliability')) {
                relevantSkillCategories.push('SRE & Observability', 'Container Orchestration');
            }
            if (jobTitle.includes('devops') || jobDesc.includes('devops') || jobDesc.includes('ci/cd')) {
                relevantSkillCategories.push('Infrastructure as Code', 'Container Orchestration');
            }
            if (jobTitle.includes('cloud') || jobTitle.includes('architect') || jobDesc.includes('aws') || jobDesc.includes('azure')) {
                relevantSkillCategories.push('Cloud Platforms', 'Infrastructure as Code');
            }
            if (jobTitle.includes('platform') || jobDesc.includes('platform') || jobDesc.includes('kubernetes')) {
                relevantSkillCategories.push('Container Orchestration', 'Cloud Platforms');
            }
            if (jobTitle.includes('data') || jobDesc.includes('spark') || jobDesc.includes('kafka')) {
                relevantSkillCategories.push('Big Data & Streaming');
            }

            // Default skills if none matched
            if (relevantSkillCategories.length === 0) {
                relevantSkillCategories = ['Cloud Platforms', 'Container Orchestration', 'Infrastructure as Code', 'SRE & Observability'];
            }

            // Remove duplicates and limit to 6
            relevantSkillCategories = [...new Set(relevantSkillCategories)].slice(0, 6);

            // Build skills section
            let skillsSection = '';
            relevantSkillCategories.forEach(cat => {
                if (USER_PROFILE.skills[cat]) {
                    skillsSection += `${cat.toUpperCase()}\n${USER_PROFILE.skills[cat]}\n\n`;
                }
            });

            // Add remaining skills
            Object.keys(USER_PROFILE.skills).forEach(cat => {
                if (!relevantSkillCategories.includes(cat)) {
                    skillsSection += `${cat.toUpperCase()}\n${USER_PROFILE.skills[cat]}\n\n`;
                }
            });

            // Build experience section
            let experienceSection = '';
            USER_PROFILE.experience.forEach(exp => {
                experienceSection += `${exp.title}\n${exp.company} | ${exp.location} | ${exp.dates}\n`;
                exp.bullets.forEach(bullet => {
                    experienceSection += `â€¢ ${bullet}\n`;
                });
                experienceSection += '\n';
            });

            // Build resume
            const resume = `================================================================================
                              ${USER_PROFILE.name.toUpperCase()}
                         ${USER_PROFILE.title}
================================================================================

${USER_PROFILE.location} | ${USER_PROFILE.phone} | ${USER_PROFILE.email}
${USER_PROFILE.linkedin} | ${USER_PROFILE.github} | ${USER_PROFILE.website}

================================================================================
                           PROFESSIONAL SUMMARY
================================================================================

${USER_PROFILE.summary}

================================================================================
                            KEY ACHIEVEMENTS
================================================================================

${USER_PROFILE.keyMetrics.map(m => `â€¢ ${m.value} - ${m.label}`).join('\n')}

================================================================================
                          CORE TECHNICAL SKILLS
================================================================================
(Tailored for: ${job.title} at ${job.company})

${skillsSection}
================================================================================
                         PROFESSIONAL EXPERIENCE
================================================================================

${experienceSection}
================================================================================
                        EDUCATION & CERTIFICATIONS
================================================================================

${USER_PROFILE.education.degree}
${USER_PROFILE.education.school}

CERTIFICATIONS:
${USER_PROFILE.certifications.map(c => `â€¢ ${c}`).join('\n')}

================================================================================
                              END OF RESUME
        Generated for: ${job.title} at ${job.company}
        Date: ${new Date().toLocaleDateString()}
================================================================================
`;

            return resume;
        }

        // Download cover letter as Word document - TAILORED TO EACH JOB
        async function downloadCoverLetter(job) {
            const { Document, Packer, Paragraph, TextRun, AlignmentType, HeadingLevel } = docx;
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const exp = USER_PROFILE.experience[0];

            // Use cached full description if available for better tailoring
            const fullDesc = fullDescriptionCache[job.id] || job.description || '';
            const jobWithFullDesc = { ...job, description: fullDesc };

            // Parse the job description for tailoring
            const parsedJD = parseJobDescription(jobWithFullDesc);
            const toolsFromJD = parsedJD.allFoundTools.slice(0, 6).map(t => t.toUpperCase()).join(', ');
            const focusAreas = parsedJD.focusAreas.join(', ');

            // Select relevant bullets based on job focus
            let relevantBullets = [];
            if (parsedJD.focusAreas.includes('GPU/HPC') || parsedJD.focusAreas.includes('AI/ML')) {
                relevantBullets = [exp.bullets[0], exp.bullets[1], exp.bullets[2]]; // GPU, Serverless AI, Cloud FinOps
            } else if (parsedJD.focusAreas.includes('SRE')) {
                relevantBullets = [exp.bullets[0], exp.bullets[4], exp.bullets[5]]; // GPU uptime, Security, Leadership
            } else if (parsedJD.focusAreas.includes('Platform Engineering') || parsedJD.focusAreas.includes('DevOps')) {
                relevantBullets = [exp.bullets[3], exp.bullets[4], exp.bullets[2]]; // CI/CD, Security, FinOps
            } else {
                relevantBullets = [exp.bullets[0], exp.bullets[2], exp.bullets[3]]; // Default
            }

            const doc = new Document({
                sections: [{
                    properties: {},
                    children: [
                        // Header with contact info
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.name, bold: true, size: 28 })],
                            alignment: AlignmentType.LEFT
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.title, italics: true, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: `${USER_PROFILE.location} | ${USER_PROFILE.email} | ${USER_PROFILE.phone}`, size: 20 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: `${USER_PROFILE.linkedin} | ${USER_PROFILE.website}`, size: 20 })]
                        }),
                        new Paragraph({ children: [] }), // Empty line
                        // Date
                        new Paragraph({
                            children: [new TextRun({ text: today, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Recipient
                        new Paragraph({
                            children: [new TextRun({ text: 'Hiring Manager', size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: job.company, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: job.location, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Salutation
                        new Paragraph({
                            children: [new TextRun({ text: 'Dear Hiring Manager,', size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Body paragraph 1 - Tailored opening with job-specific focus
                        new Paragraph({
                            children: [new TextRun({
                                text: `I am writing to express my strong interest in the ${job.title} position at ${job.company}. With ${USER_PROFILE.yearsExperience} years of experience in ${focusAreas || 'cloud infrastructure, platform engineering, and AI/ML systems'}, I am excited about the opportunity to contribute to your team.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Body paragraph 2 - Mention specific technologies from JD
                        new Paragraph({
                            children: [new TextRun({
                                text: toolsFromJD
                                    ? `Your job description highlights the need for expertise in ${toolsFromJD}, which aligns directly with my experience. ${USER_PROFILE.summary}`
                                    : USER_PROFILE.summary,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Key qualifications header
                        new Paragraph({
                            children: [new TextRun({ text: 'Key qualifications that align with this role:', bold: true, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Bullet points - Selected based on job focus
                        new Paragraph({
                            children: [new TextRun({ text: `â€¢ ${relevantBullets[0]}`, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: `â€¢ ${relevantBullets[1]}`, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: `â€¢ ${relevantBullets[2]}`, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Body paragraph 3 - Mention specific technologies from JD
                        new Paragraph({
                            children: [new TextRun({
                                text: toolsFromJD
                                    ? `My hands-on experience with ${toolsFromJD} directly aligns with the requirements for this position. I am particularly drawn to ${job.company}'s mission and the opportunity to work on ${focusAreas || 'cutting-edge infrastructure challenges'}.`
                                    : `My technical expertise in cloud infrastructure, Kubernetes, and platform engineering directly aligns with the requirements for this position. I am particularly drawn to ${job.company}'s mission and the opportunity to work on ${job.department ? job.department + ' initiatives' : 'cutting-edge infrastructure challenges'}.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Closing paragraph
                        new Paragraph({
                            children: [new TextRun({
                                text: `I am confident that my experience leading large-scale platform engineering initiatives, combined with my passion for building reliable and scalable systems, would make me a valuable addition to your team.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        new Paragraph({
                            children: [new TextRun({
                                text: `I would welcome the opportunity to discuss how my background and skills can contribute to ${job.company}'s continued success. Thank you for considering my application.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Signature
                        new Paragraph({
                            children: [new TextRun({ text: 'Sincerely,', size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.name, bold: true, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.title, size: 22 })]
                        })
                    ]
                }]
            });

            const blob = await Packer.toBlob(doc);
            saveAs(blob, `Cover_Letter_${job.company.replace(/[^a-zA-Z0-9]/g, '_')}_${job.title.replace(/[^a-zA-Z0-9]/g, '_').substring(0, 30)}.docx`);
        }

        // ============ USER'S SKILLS EXTRACTED FROM PROFILE ============
        const MY_SKILLS = [
            // GPU/HPC Computing
            'slurm', 'nvidia', 'dgx', 'cuda', 'tensorrt', 'a100', 'v100', 't4', 'triton', 'vllm', 'gpu', 'hpc',
            // AI/ML Infrastructure
            'pytorch', 'ray', 'flyte', 'mlflow', 'kubeflow', 'sagemaker', 'azure ml', 'torchserve', 'kserve', 'distributed training', 'ml', 'ai',
            // Cloud Platforms
            'aws', 'eks', 'ec2', 'emr', 'azure', 'aks', 'oci', 'cloud',
            // Container Orchestration
            'kubernetes', 'k8s', 'docker', 'helm', 'istio', 'service mesh', 'keda', 'argocd', 'fluxcd', 'gitops',
            // Infrastructure as Code
            'terraform', 'ansible', 'arm', 'bicep', 'cloudformation', 'packer', 'opa', 'checkov', 'iac',
            // Big Data & Streaming
            'databricks', 'spark', 'apache spark', 'flink', 'kafka', 'hadoop', 'hdfs', 'hive', 'trino', 'airflow', 'delta lake',
            // Security & Compliance
            'soc2', 'hipaa', 'fedramp', 'iso 27001', 'hitrust', 'devsecops', 'snyk', 'sonarqube', 'vault', 'ztna', 'security',
            // SRE & Observability
            'sli', 'slo', 'sla', 'chaos engineering', 'prometheus', 'grafana', 'datadog', 'opentelemetry', 'observability', 'monitoring',
            // Languages & Tools
            'python', 'go', 'golang', 'bash', 'shell', 'java', 'jenkins', 'ci/cd', 'cicd',
            // Additional from experience
            'mysql', 'postgresql', 'redis', 'mongodb', 'rest api', 'microservices', 'linux', 'unix'
        ];

        // ============ JOB DESCRIPTION PARSER ============
        function parseJobDescription(job) {
            const desc = (job.description || '');
            const descLower = desc.toLowerCase();
            const title = (job.title || '').toLowerCase();

            // Extract tools/technologies mentioned in JD - COMPREHENSIVE LIST
            const allTools = {
                cloud: ['aws', 'azure', 'gcp', 'google cloud', 'oracle cloud', 'oci', 'multi-cloud', 'hybrid cloud'],
                containers: ['kubernetes', 'k8s', 'docker', 'helm', 'istio', 'envoy', 'eks', 'aks', 'gke', 'openshift', 'rancher', 'containerd'],
                iac: ['terraform', 'pulumi', 'cloudformation', 'arm templates', 'bicep', 'ansible', 'puppet', 'chef', 'saltstack'],
                cicd: ['jenkins', 'github actions', 'gitlab ci', 'circleci', 'argocd', 'fluxcd', 'spinnaker', 'tekton', 'bamboo'],
                monitoring: ['prometheus', 'grafana', 'datadog', 'splunk', 'elk', 'elasticsearch', 'new relic', 'dynatrace', 'opentelemetry', 'pagerduty', 'opsgenie', 'victorops', 'kibana', 'klodfuse'],
                gpu: ['gpu', 'cuda', 'nvidia', 'a100', 'v100', 'h100', 'dgx', 'slurm', 'hpc', 'tensorrt'],
                ml: ['pytorch', 'tensorflow', 'mlflow', 'kubeflow', 'sagemaker', 'ray', 'mlops', 'model serving', 'inference'],
                data: ['spark', 'kafka', 'hadoop', 'hdfs', 'flink', 'airflow', 'databricks', 'snowflake', 'redshift', 'bigquery', 'mysql', 'postgresql', 'postgres', 'mongodb', 'redis', 'cassandra', 'dynamodb'],
                languages: ['python', 'go', 'golang', 'java', 'bash', 'shell', 'rust', 'typescript', 'javascript', 'c++', 'scala', 'ruby'],
                security: ['vault', 'soc2', 'hipaa', 'fedramp', 'pci', 'iso 27001', 'devsecops', 'sast', 'dast', 'opa', 'trivy', 'saml', 'oauth', 'sso', 'ldap', 'okta'],
                networking: ['tcp/ip', 'dns', 'load balancer', 'cdn', 'vpn', 'firewall', 'nginx', 'haproxy', 'packet capture', 'wireshark']
            };

            const foundTools = {};
            Object.keys(allTools).forEach(category => {
                foundTools[category] = allTools[category].filter(tool =>
                    descLower.includes(tool) || title.includes(tool)
                );
            });

            // Extract key responsibilities patterns
            const responsibilities = [];
            const respPatterns = [
                /(?:responsible for|will be|you will|responsibilities include)[:\s]+([^.]+)/gi,
                /(?:design|build|develop|implement|manage|lead|architect|maintain|deploy|automate|optimize|scale)[^.]{10,80}/gi
            ];
            respPatterns.forEach(pattern => {
                const matches = descLower.match(pattern);
                if (matches) {
                    matches.slice(0, 5).forEach(m => {
                        const clean = m.replace(/^(responsible for|will be|you will|responsibilities include)[:\s]+/i, '').trim();
                        if (clean.length > 20 && clean.length < 150) {
                            responsibilities.push(clean.charAt(0).toUpperCase() + clean.slice(1));
                        }
                    });
                }
            });

            // Extract requirements/qualifications
            const requirements = [];
            const reqPatterns = [
                /(\d+\+?\s*years?)[^.]*(?:experience|working)[^.]+/gi,
                /(?:experience with|expertise in|proficiency in|strong knowledge of)[:\s]+([^.]+)/gi,
                /(?:bachelor|master|phd|degree)[^.]+/gi
            ];
            reqPatterns.forEach(pattern => {
                const matches = descLower.match(pattern);
                if (matches) {
                    matches.slice(0, 3).forEach(m => {
                        if (m.length > 15 && m.length < 150) {
                            requirements.push(m.trim());
                        }
                    });
                }
            });

            // Determine job focus areas
            const focusAreas = [];
            if (foundTools.gpu.length > 0 || descLower.includes('hpc') || descLower.includes('high performance')) focusAreas.push('GPU/HPC');
            if (foundTools.ml.length > 0 || descLower.includes('machine learning') || descLower.includes('ai ')) focusAreas.push('AI/ML');
            if (title.includes('sre') || descLower.includes('reliability') || descLower.includes('incident')) focusAreas.push('SRE');
            if (title.includes('platform') || descLower.includes('platform engineering')) focusAreas.push('Platform Engineering');
            if (title.includes('devops') || descLower.includes('devops')) focusAreas.push('DevOps');
            if (title.includes('architect') || descLower.includes('architecture')) focusAreas.push('Architecture');
            if (foundTools.data.length > 0) focusAreas.push('Data Engineering');
            if (foundTools.security.length > 0) focusAreas.push('Security/Compliance');

            // ===== ENHANCED: Extract pay information =====
            const payInfo = {
                basePay: null,
                equityGrade: null,
                basePayGrade: null,
                ranges: [],
                bonus: null
            };

            // Extract salary ranges - handle various formats including en-dash (â€“), em-dash (â€”)
            const salaryPatterns = [
                /\$[\d,]+(?:\.\d+)?(?:k|K)?\s*[-â€“â€”to]+\s*\$[\d,]+(?:\.\d+)?(?:k|K)?(?:\s*(?:per year|annually|\/year|USD)?)?/gi,
                /base\s*(?:salary|pay)[^$]*\$[\d,]+\s*[-â€“â€”to]+\s*\$[\d,]+/gi,
                /salary\s*(?:range)?[^$]*\$[\d,]+\s*[-â€“â€”to]+\s*\$[\d,]+/gi,
                /compensation[^$]*\$[\d,]+\s*[-â€“â€”to]+\s*\$[\d,]+/gi,
                /(?:USD|usd)\s*[\d,]+\s*[-â€“â€”to]+\s*[\d,]+/gi
            ];
            salaryPatterns.forEach(pattern => {
                const matches = desc.match(pattern);
                if (matches) {
                    payInfo.ranges.push(...matches.map(m => m.trim()));
                }
            });

            // Extract equity/bonus info
            const equityMatch = desc.match(/equity grade\s*[-â€“:]?\s*(\d+)/i);
            if (equityMatch) payInfo.equityGrade = equityMatch[1];

            const baseGradeMatch = desc.match(/base pay grade\s*[-â€“:]?\s*([A-Z\d]+)/i);
            if (baseGradeMatch) payInfo.basePayGrade = baseGradeMatch[1];

            const bonusMatch = desc.match(/(?:bonus|commission|equity)[^.]*(?:may apply|eligible|included)/i);
            if (bonusMatch) payInfo.bonus = bonusMatch[0].trim();

            // ===== ENHANCED: Extract work model (Hybrid/Remote/Onsite with details) =====
            const workModel = {
                type: null,
                details: null
            };

            // Check for hybrid with days info
            const hybridMatch = desc.match(/hybrid[^.]*(\d+)\s*days?(?:\s*(?:per|\/|a)\s*week)?/i);
            if (hybridMatch) {
                workModel.type = 'Hybrid';
                workModel.details = `${hybridMatch[1]} days/week in office`;
            } else if (/hybrid/i.test(descLower)) {
                workModel.type = 'Hybrid';
            } else if (/fully\s*remote|100%\s*remote|remote\s*(?:position|role|work)/i.test(descLower)) {
                workModel.type = 'Remote';
            } else if (/on-?site|in-?office|in-?person/i.test(descLower)) {
                workModel.type = 'Onsite';
            }

            // ===== ENHANCED: Extract location/remote tags =====
            const locationTags = [];
            const tagPatterns = [
                /#LI-Remote/gi,
                /#LI-Hybrid/gi,
                /#LI-Onsite/gi,
                /Remote\s*-\s*US/gi,
                /Remote\s*-\s*USA/gi,
                /Location:\s*Remote/gi,
                /fully remote/gi,
                /100% remote/gi,
                /hybrid.*\d+\s*days/gi
            ];
            tagPatterns.forEach(pattern => {
                const matches = desc.match(pattern);
                if (matches) {
                    locationTags.push(...matches.map(m => m.trim()));
                }
            });

            // Add work model to location tags if detected
            if (workModel.type && workModel.details) {
                locationTags.unshift(`${workModel.type}: ${workModel.details}`);
            } else if (workModel.type) {
                locationTags.unshift(workModel.type);
            }

            // ===== ENHANCED: Extract "What You'll Do" / Responsibilities section =====
            const whatYouDo = [];

            // Try multiple section header patterns
            const respHeaders = [
                /(?:what you'?ll do|responsibilities|key responsibilities|your role|in this role|your impact)[:\s]*([\s\S]*?)(?=what we|requirements|qualifications|about you|who you are|preferred|minimum|$)/i,
                /(?:core responsibilities|job responsibilities|duties)[:\s]*([\s\S]*?)(?=requirements|qualifications|skills|$)/i
            ];

            for (const pattern of respHeaders) {
                const match = desc.match(pattern);
                if (match && match[1]) {
                    // Extract bullet points - handle various formats
                    const section = match[1];
                    // Look for list items (bullets, dashes, numbers)
                    const bullets = section.match(/(?:^|\n)\s*[â€¢\-\*\d\.]\s*([^\n]+)/gm);
                    if (bullets && bullets.length > 0) {
                        bullets.slice(0, 8).forEach(b => {
                            const clean = b.replace(/^[\sâ€¢\-\*\d\.]+/, '').trim();
                            if (clean.length > 15 && clean.length < 300) {
                                whatYouDo.push(clean);
                            }
                        });
                    }
                    if (whatYouDo.length > 0) break;
                }
            }

            // ===== ENHANCED: Extract "What We Look For" / Requirements section =====
            const whatWeLookFor = [];

            const reqHeaders = [
                /(?:what we (?:look for|'re looking for)|requirements|required qualifications|minimum qualifications|about you|who you are|you have)[:\s]*([\s\S]*?)(?=preferred|nice to have|benefits|compensation|about |what you|$)/i,
                /(?:qualifications|skills required|must have)[:\s]*([\s\S]*?)(?=preferred|nice|benefits|$)/i
            ];

            for (const pattern of reqHeaders) {
                const match = desc.match(pattern);
                if (match && match[1]) {
                    const section = match[1];
                    const bullets = section.match(/(?:^|\n)\s*[â€¢\-\*\d\.]\s*([^\n]+)/gm);
                    if (bullets && bullets.length > 0) {
                        bullets.slice(0, 8).forEach(b => {
                            const clean = b.replace(/^[\sâ€¢\-\*\d\.]+/, '').trim();
                            if (clean.length > 10 && clean.length < 300) {
                                whatWeLookFor.push(clean);
                            }
                        });
                    }
                    if (whatWeLookFor.length > 0) break;
                }
            }

            // Also extract "X+ years" experience requirements if not found above
            if (whatWeLookFor.length === 0) {
                const yearsPatterns = [
                    /(\d+\+?\s*years?[^.\n]*(?:experience|working|in)[^.\n]*)/gi,
                    /(?:proficiency|proficient|experience)\s+(?:in|with)\s+([^.\n]+)/gi
                ];
                yearsPatterns.forEach(pattern => {
                    const matches = descLower.match(pattern);
                    if (matches) {
                        matches.slice(0, 5).forEach(m => {
                            if (m.length > 15 && m.length < 200) {
                                whatWeLookFor.push(m.trim());
                            }
                        });
                    }
                });
            }

            // ===== SKILLS MATCH: Compare job requirements with my skills =====
            const allJobTools = Object.values(foundTools).flat().filter(t => t.length > 0);
            const matchedSkills = [];
            const missingSkills = [];

            allJobTools.forEach(tool => {
                const toolLower = tool.toLowerCase();
                // Check if I have this skill
                const hasSkill = MY_SKILLS.some(mySkill =>
                    toolLower.includes(mySkill) || mySkill.includes(toolLower)
                );
                if (hasSkill) {
                    matchedSkills.push(tool);
                } else {
                    missingSkills.push(tool);
                }
            });

            const skillsMatch = {
                matched: matchedSkills,
                missing: missingSkills,
                matchPercent: allJobTools.length > 0 ? Math.round((matchedSkills.length / allJobTools.length) * 100) : 0,
                total: allJobTools.length
            };

            return {
                tools: foundTools,
                responsibilities: [...new Set(responsibilities)].slice(0, 8),
                requirements: [...new Set(requirements)].slice(0, 6),
                focusAreas: [...new Set(focusAreas)],
                allFoundTools: allJobTools,
                payInfo,
                workModel,
                locationTags: [...new Set(locationTags)],
                whatYouDo: [...new Set(whatYouDo)].slice(0, 8),
                whatWeLookFor: [...new Set(whatWeLookFor)].slice(0, 8),
                skillsMatch,
                rawDescription: desc
            };
        }

        // Generate job summary from parsed JD - ENHANCED with actual job content
        function generateJobSummary(job) {
            const parsed = parseJobDescription(job);
            const tools = parsed.allFoundTools.slice(0, 4);
            const focus = parsed.focusAreas.slice(0, 2);

            let parts = [];

            // Extract actual job description text (first 150 chars of meaningful content)
            const rawDesc = (job.description || '').replace(/<[^>]*>/g, ' ').replace(/\s+/g, ' ').trim();
            if (rawDesc.length > 20) {
                // Find the first meaningful sentence
                const sentences = rawDesc.split(/[.!?]+/);
                let summary = '';
                for (const s of sentences) {
                    const trimmed = s.trim();
                    // Skip short or boilerplate sentences
                    if (trimmed.length > 30 && !trimmed.toLowerCase().includes('about us') &&
                        !trimmed.toLowerCase().includes('who we are') && !trimmed.toLowerCase().includes('equal opportunity')) {
                        summary = trimmed.substring(0, 150);
                        if (trimmed.length > 150) summary += '...';
                        break;
                    }
                }
                if (summary) {
                    parts.push(`<span class="desc-summary" style="color: var(--text-secondary); font-size: 0.75rem; line-height: 1.3;">${summary}</span>`);
                }
            }

            // Skills Match indicator (compact)
            if (parsed.skillsMatch.total > 0) {
                const pct = parsed.skillsMatch.matchPercent;
                const color = pct >= 80 ? '#16a34a' : pct >= 60 ? '#f59e0b' : pct >= 40 ? '#f97316' : '#ef4444';
                parts.push(`<span class="desc-match" style="color: ${color}; font-weight: 600; font-size: 0.7rem;">Match: ${pct}%</span>`);
            }

            // Tools (compact, top 4)
            if (tools.length > 0) {
                const toolsDisplay = tools.map(t => {
                    const isMatched = parsed.skillsMatch.matched.includes(t);
                    return `<span style="color: ${isMatched ? '#16a34a' : '#ef4444'}; font-size: 0.65rem;">${t.toUpperCase()}</span>`;
                }).join(' Â· ');
                parts.push(`<span class="desc-tools">${toolsDisplay}</span>`);
            }

            return parts.join('<br>');
        }

        // ============ FETCH FULL JOB DESCRIPTION FROM ATS ============
        // Cache for full descriptions
        const fullDescriptionCache = {};

        async function fetchFullJobDescription(job) {
            // Return cached if available
            if (fullDescriptionCache[job.id]) {
                return fullDescriptionCache[job.id];
            }

            try {
                let fullDescription = job.description || '';
                const board = job.board;

                if (job.source === 'greenhouse' && board) {
                    // Greenhouse: Fetch individual job details with full content
                    const response = await fetchWithTimeout(`https://boards-api.greenhouse.io/v1/boards/${board}/jobs/${job.id}`);
                    if (response && response.ok) {
                        const data = await response.json();
                        // Greenhouse returns HTML content - preserve structure
                        fullDescription = data.content || data.description || '';
                        // Strip HTML but preserve newlines
                        fullDescription = fullDescription
                            .replace(/<br\s*\/?>/gi, '\n')
                            .replace(/<\/p>/gi, '\n\n')
                            .replace(/<\/li>/gi, '\n')
                            .replace(/<li>/gi, 'â€¢ ')
                            .replace(/<\/h[1-6]>/gi, '\n')
                            .replace(/<h[1-6][^>]*>/gi, '\n\n')
                            .replace(/<[^>]*>/g, '')
                            .replace(/&nbsp;/g, ' ')
                            .replace(/&amp;/g, '&')
                            .replace(/&lt;/g, '<')
                            .replace(/&gt;/g, '>')
                            .replace(/\n{3,}/g, '\n\n')
                            .trim();
                    }
                } else if (job.source === 'lever' && board) {
                    // Lever: Fetch individual posting with lists (What you'll do, Requirements, etc.)
                    const response = await fetchWithTimeout(`https://api.lever.co/v0/postings/${board}/${job.id}`);
                    if (response && response.ok) {
                        const data = await response.json();
                        // Build full description with all sections
                        let desc = data.descriptionPlain || '';

                        // Add additional info
                        if (data.additional) {
                            desc += '\n\n' + (data.additionalPlain || stripHtml(data.additional));
                        }

                        // Add lists (What You'll Do, Requirements, etc.) - THIS IS THE KEY DATA
                        if (data.lists && data.lists.length > 0) {
                            data.lists.forEach(list => {
                                desc += `\n\n${list.text}:\n`;
                                if (list.content) {
                                    // Parse HTML list items
                                    const items = list.content.match(/<li[^>]*>([\s\S]*?)<\/li>/gi);
                                    if (items) {
                                        items.forEach(item => {
                                            const text = item.replace(/<[^>]*>/g, '').trim();
                                            if (text) desc += `â€¢ ${text}\n`;
                                        });
                                    } else {
                                        desc += list.content.replace(/<[^>]*>/g, '').trim();
                                    }
                                }
                            });
                        }

                        // Add closing info
                        if (data.closingPlain) {
                            desc += '\n\n' + data.closingPlain;
                        }

                        fullDescription = desc.trim();
                    }
                } else if (job.source === 'ashby' && board) {
                    // Ashby: Use GraphQL to fetch individual job with full details
                    const response = await fetchWithTimeout(`https://jobs.ashbyhq.com/api/non-user-graphql?op=ApiJobPosting`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            operationName: 'ApiJobPosting',
                            variables: { jobPostingId: job.id },
                            query: `query ApiJobPosting($jobPostingId: String!) {
                                jobPosting(id: $jobPostingId) {
                                    id
                                    title
                                    descriptionPlain
                                    descriptionHtml
                                    locationName
                                    teamName
                                    compensationTierSummary
                                    employmentType
                                }
                            }`
                        })
                    });
                    if (response && response.ok) {
                        const data = await response.json();
                        const posting = data?.data?.jobPosting;
                        if (posting) {
                            // Prefer plain text, fallback to stripped HTML
                            fullDescription = posting.descriptionPlain || '';
                            if (!fullDescription && posting.descriptionHtml) {
                                fullDescription = posting.descriptionHtml
                                    .replace(/<br\s*\/?>/gi, '\n')
                                    .replace(/<\/p>/gi, '\n\n')
                                    .replace(/<\/li>/gi, '\n')
                                    .replace(/<li>/gi, 'â€¢ ')
                                    .replace(/<[^>]*>/g, '')
                                    .trim();
                            }
                            // Add compensation if available
                            if (posting.compensationTierSummary) {
                                fullDescription += `\n\nCompensation: ${posting.compensationTierSummary}`;
                            }
                            // Add employment type
                            if (posting.employmentType) {
                                fullDescription += `\nEmployment Type: ${posting.employmentType}`;
                            }
                        }
                    }
                }

                // Cache the result
                fullDescriptionCache[job.id] = fullDescription;
                return fullDescription;
            } catch (error) {
                console.error('Error fetching full job description:', error);
                return job.description || '';
            }
        }

        // ============ JOB DESCRIPTION MODAL FUNCTIONS ============
        async function showJDModal(jobId) {
            const job = jobsMap[jobId];
            if (!job) return;

            const modal = document.getElementById('jd-modal-overlay');
            const modalBody = document.getElementById('jd-modal-body');

            // Set title, company, source
            document.getElementById('jd-modal-title').textContent = job.title;
            document.getElementById('jd-modal-company').textContent = `${job.company} â€¢ ${job.location}`;
            document.getElementById('jd-modal-apply').href = job.url;

            // Set source indicator
            const sourceNames = { greenhouse: 'Greenhouse', lever: 'Lever', ashby: 'Ashby' };
            document.getElementById('jd-modal-source').textContent = `Source: ${sourceNames[job.source] || job.source}`;

            // Wire up resume and cover letter buttons
            document.getElementById('jd-modal-resume').onclick = () => downloadResume(job);
            document.getElementById('jd-modal-cover').onclick = () => downloadCoverLetter(job);

            // Show modal with loading state
            modalBody.innerHTML = `
                <div style="text-align: center; padding: 3rem;">
                    <span class="loading-spinner"></span>
                    <p style="color: var(--text-muted); margin-top: 1rem;">Fetching full job description from ${job.source}...</p>
                </div>
            `;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';

            // Fetch full description from the ATS
            const fullDescription = await fetchFullJobDescription(job);

            // Update job object with full description for parsing
            const jobWithFullDesc = { ...job, description: fullDescription };
            const parsed = parseJobDescription(jobWithFullDesc);

            // Build modal body content
            let html = '';

            // Pay Information (if available)
            if (parsed.payInfo.ranges.length > 0 || parsed.payInfo.equityGrade || parsed.payInfo.basePayGrade || parsed.payInfo.bonus) {
                html += `<div class="jd-section">
                    <h3><i class="fas fa-dollar-sign"></i> Compensation</h3>
                    <div class="jd-pay-box">`;
                if (parsed.payInfo.ranges.length > 0) {
                    html += `<div class="pay-range">${escapeHtml(parsed.payInfo.ranges[0])}</div>`;
                    if (parsed.payInfo.ranges.length > 1) {
                        html += `<div class="pay-detail">Additional ranges: ${escapeHtml(parsed.payInfo.ranges.slice(1).join(', '))}</div>`;
                    }
                }
                if (parsed.payInfo.basePayGrade) {
                    html += `<div class="pay-detail">Base Pay Grade: ${escapeHtml(parsed.payInfo.basePayGrade)}</div>`;
                }
                if (parsed.payInfo.equityGrade) {
                    html += `<div class="pay-detail">Equity Grade: ${escapeHtml(parsed.payInfo.equityGrade)}</div>`;
                }
                if (parsed.payInfo.bonus) {
                    html += `<div class="pay-detail" style="color: #f59e0b;">+ ${escapeHtml(parsed.payInfo.bonus)}</div>`;
                }
                html += `</div></div>`;
            }

            // Work Model (if detected)
            if (parsed.workModel && parsed.workModel.type) {
                const modelColor = parsed.workModel.type === 'Remote' ? '#16a34a' : parsed.workModel.type === 'Hybrid' ? '#f59e0b' : '#6366f1';
                html += `<div class="jd-section">
                    <h3><i class="fas fa-building"></i> Work Model</h3>
                    <div class="jd-tags">
                        <span class="jd-tag" style="background: ${modelColor}22; color: ${modelColor}; border-color: ${modelColor}44;">
                            ${parsed.workModel.type}${parsed.workModel.details ? ': ' + parsed.workModel.details : ''}
                        </span>
                    </div>
                </div>`;
            }

            // Location Tags
            if (parsed.locationTags.length > 0) {
                html += `<div class="jd-section">
                    <h3><i class="fas fa-map-marker-alt"></i> Location</h3>
                    <div class="jd-tags">
                        ${parsed.locationTags.map(t => `<span class="jd-tag">${t}</span>`).join('')}
                    </div>
                </div>`;
            }

            // Focus Areas
            if (parsed.focusAreas.length > 0) {
                html += `<div class="jd-section">
                    <h3><i class="fas fa-bullseye"></i> Focus Areas</h3>
                    <div class="jd-tags">
                        ${parsed.focusAreas.map(f => `<span class="jd-tag">${f}</span>`).join('')}
                    </div>
                </div>`;
            }

            // Skills Match Section
            if (parsed.skillsMatch.total > 0) {
                const pct = parsed.skillsMatch.matchPercent;
                const pctColor = pct >= 80 ? '#16a34a' : pct >= 60 ? '#f59e0b' : pct >= 40 ? '#f97316' : '#ef4444';
                html += `<div class="jd-section">
                    <h3><i class="fas fa-check-double"></i> Skills Match
                        <span style="font-size: 0.9rem; color: ${pctColor}; font-weight: 700; margin-left: 0.5rem;">
                            ${pct}% (${parsed.skillsMatch.matched.length}/${parsed.skillsMatch.total})
                        </span>
                    </h3>`;

                // Matched skills (green)
                if (parsed.skillsMatch.matched.length > 0) {
                    html += `<div style="margin-bottom: 0.75rem;">
                        <span style="color: #16a34a; font-weight: 600; font-size: 0.8rem;"><i class="fas fa-check"></i> You Have:</span>
                        <div class="jd-tags" style="margin-top: 0.35rem;">
                            ${parsed.skillsMatch.matched.map(t => `<span class="jd-tag" style="background: rgba(22, 163, 74, 0.15); color: #16a34a; border-color: rgba(22, 163, 74, 0.3);">${t.toUpperCase()}</span>`).join('')}
                        </div>
                    </div>`;
                }

                // Missing skills (red)
                if (parsed.skillsMatch.missing.length > 0) {
                    html += `<div>
                        <span style="color: #ef4444; font-weight: 600; font-size: 0.8rem;"><i class="fas fa-times"></i> To Learn:</span>
                        <div class="jd-tags" style="margin-top: 0.35rem;">
                            ${parsed.skillsMatch.missing.map(t => `<span class="jd-tag" style="background: rgba(239, 68, 68, 0.15); color: #ef4444; border-color: rgba(239, 68, 68, 0.3);">${t.toUpperCase()}</span>`).join('')}
                        </div>
                    </div>`;
                }

                html += `</div>`;
            } else if (parsed.allFoundTools.length > 0) {
                // Fallback if no skills match calculation
                html += `<div class="jd-section">
                    <h3><i class="fas fa-tools"></i> Technologies</h3>
                    <div class="jd-tags">
                        ${parsed.allFoundTools.map(t => `<span class="jd-tag">${t.toUpperCase()}</span>`).join('')}
                    </div>
                </div>`;
            }

            // What You'll Do
            if (parsed.whatYouDo.length > 0) {
                html += `<div class="jd-section">
                    <h3><i class="fas fa-tasks"></i> What You'll Do</h3>
                    <ul>
                        ${parsed.whatYouDo.map(item => `<li>${escapeHtml(item)}</li>`).join('')}
                    </ul>
                </div>`;
            }

            // What We Look For
            if (parsed.whatWeLookFor.length > 0) {
                html += `<div class="jd-section">
                    <h3><i class="fas fa-user-check"></i> What We Look For</h3>
                    <ul>
                        ${parsed.whatWeLookFor.map(item => `<li>${escapeHtml(item)}</li>`).join('')}
                    </ul>
                </div>`;
            }

            // Full Description (collapsible)
            if (parsed.rawDescription && parsed.rawDescription.length > 100) {
                const cleanDesc = parsed.rawDescription.replace(/<[^>]*>/g, '').trim();
                html += `<div class="jd-section">
                    <h3><i class="fas fa-file-alt"></i> Full Job Description</h3>
                    <div class="jd-full-desc">${escapeHtml(cleanDesc)}</div>
                </div>`;
            }

            // Update modal with parsed content
            modalBody.innerHTML = html;
        }

        function closeJDModal(event) {
            if (event && event.target !== event.currentTarget) return;
            const modal = document.getElementById('jd-modal-overlay');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeJDModal();
        });

        // Download resume as Word document - TAILORED TO EACH JOB
        async function downloadResume(job) {
            const { Document, Packer, Paragraph, TextRun, AlignmentType, BorderStyle, HeadingLevel, TableOfContents } = docx;

            // Use cached full description if available for better tailoring
            const fullDesc = fullDescriptionCache[job.id] || job.description || '';
            const jobWithFullDesc = { ...job, description: fullDesc };

            // Parse the job description
            const parsedJD = parseJobDescription(jobWithFullDesc);
            const jobTitle = job.title.toLowerCase();
            const jobDesc = (job.description || '').toLowerCase();

            // Determine which skills to highlight based on parsed JD
            let relevantSkillCategories = [];

            // GPU/HPC focus
            if (parsedJD.tools.gpu.length > 0 || parsedJD.focusAreas.includes('GPU/HPC')) {
                relevantSkillCategories.push('GPU/HPC Computing', 'AI/ML Infrastructure');
            }
            // AI/ML focus
            if (parsedJD.tools.ml.length > 0 || parsedJD.focusAreas.includes('AI/ML')) {
                relevantSkillCategories.push('AI/ML Infrastructure', 'GPU/HPC Computing');
            }
            // SRE focus
            if (parsedJD.focusAreas.includes('SRE') || parsedJD.tools.monitoring.length > 0) {
                relevantSkillCategories.push('SRE & Observability', 'Container Orchestration');
            }
            // Platform/DevOps focus
            if (parsedJD.focusAreas.includes('Platform Engineering') || parsedJD.focusAreas.includes('DevOps')) {
                relevantSkillCategories.push('Container Orchestration', 'Infrastructure as Code');
            }
            // Cloud focus
            if (parsedJD.tools.cloud.length > 0 || parsedJD.focusAreas.includes('Architecture')) {
                relevantSkillCategories.push('Cloud Platforms', 'Infrastructure as Code');
            }
            // Data focus
            if (parsedJD.tools.data.length > 0 || parsedJD.focusAreas.includes('Data Engineering')) {
                relevantSkillCategories.push('Big Data & Streaming', 'Cloud Platforms');
            }
            // Security focus
            if (parsedJD.tools.security.length > 0 || parsedJD.focusAreas.includes('Security/Compliance')) {
                relevantSkillCategories.push('Security & Compliance', 'Infrastructure as Code');
            }

            // Default skills if none matched
            if (relevantSkillCategories.length === 0) {
                relevantSkillCategories = ['Cloud Platforms', 'Container Orchestration', 'Infrastructure as Code', 'SRE & Observability'];
            }

            // Remove duplicates and limit to 6
            relevantSkillCategories = [...new Set(relevantSkillCategories)].slice(0, 6);

            // Build document children
            const children = [];

            // Header - Name
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.name.toUpperCase(), bold: true, size: 36 })],
                alignment: AlignmentType.CENTER,
                spacing: { after: 100 }
            }));

            // Title
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.title, size: 24, color: '666666' })],
                alignment: AlignmentType.CENTER,
                spacing: { after: 200 }
            }));

            // Contact info
            children.push(new Paragraph({
                children: [new TextRun({ text: `${USER_PROFILE.location} | ${USER_PROFILE.phone} | ${USER_PROFILE.email}`, size: 20 })],
                alignment: AlignmentType.CENTER
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: `${USER_PROFILE.linkedin} | ${USER_PROFILE.github} | ${USER_PROFILE.website}`, size: 20 })],
                alignment: AlignmentType.CENTER,
                spacing: { after: 300 }
            }));

            // Section: Professional Summary - Tailored to this job
            children.push(new Paragraph({
                children: [new TextRun({ text: 'PROFESSIONAL SUMMARY', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));

            // Create tailored summary based on job focus
            let tailoredSummary = USER_PROFILE.summary;
            if (parsedJD.focusAreas.includes('GPU/HPC') || parsedJD.focusAreas.includes('AI/ML')) {
                tailoredSummary = `Distinguished Cloud AI Architect with 18+ years building GPU compute platforms and AI/ML infrastructure at scale. Expert in Slurm cluster management, NVIDIA GPU scheduling (A100/V100/DGX), Kubernetes orchestration, and distributed ML training. ${parsedJD.allFoundTools.length > 0 ? 'Proven expertise in ' + parsedJD.allFoundTools.slice(0, 5).join(', ').toUpperCase() + '.' : ''} Led teams managing $15M+ budgets delivering $8M+ in cost savings.`;
            } else if (parsedJD.focusAreas.includes('SRE')) {
                tailoredSummary = `Senior Site Reliability Engineer and Platform Leader with 18+ years ensuring 99.97% uptime for mission-critical systems at planetary scale. Expert in SLI/SLO/SLA implementation, incident response, chaos engineering, and observability (Prometheus, Grafana, Datadog). ${parsedJD.allFoundTools.length > 0 ? 'Deep experience with ' + parsedJD.allFoundTools.slice(0, 5).join(', ').toUpperCase() + '.' : ''} Led 24x7 on-call rotations serving 10M+ users across 15+ regions.`;
            } else if (parsedJD.focusAreas.includes('Platform Engineering')) {
                tailoredSummary = `Platform Engineering Leader with 18+ years building developer platforms and infrastructure automation at scale. Expert in Kubernetes (EKS/AKS), Terraform IaC, GitOps (ArgoCD/FluxCD), and CI/CD pipelines. ${parsedJD.allFoundTools.length > 0 ? 'Proven expertise in ' + parsedJD.allFoundTools.slice(0, 5).join(', ').toUpperCase() + '.' : ''} Reduced deployment time 95% and cloud costs 73% through automation and optimization.`;
            }
            children.push(new Paragraph({
                children: [new TextRun({ text: tailoredSummary, size: 22 })],
                spacing: { after: 200 }
            }));

            // Section: JOB REQUIREMENTS MATCH (from parsed JD)
            if (parsedJD.allFoundTools.length > 0 || parsedJD.focusAreas.length > 0) {
                children.push(new Paragraph({
                    children: [new TextRun({ text: 'JOB REQUIREMENTS ALIGNMENT', bold: true, size: 24, color: '16a34a' })],
                    border: { bottom: { color: '16a34a', size: 6, style: BorderStyle.SINGLE } },
                    spacing: { before: 200, after: 100 }
                }));
                children.push(new Paragraph({
                    children: [new TextRun({ text: `Matching skills for: ${job.title} at ${job.company}`, italics: true, size: 18, color: '888888' })],
                    spacing: { after: 80 }
                }));

                // Tools from JD that I have
                if (parsedJD.allFoundTools.length > 0) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: 'âœ“ Required Technologies: ', bold: true, size: 22, color: '16a34a' }),
                            new TextRun({ text: parsedJD.allFoundTools.map(t => t.toUpperCase()).join(', '), size: 22 })
                        ],
                        spacing: { after: 60 }
                    }));
                }

                // Focus areas matched
                if (parsedJD.focusAreas.length > 0) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: 'âœ“ Domain Expertise: ', bold: true, size: 22, color: '16a34a' }),
                            new TextRun({ text: parsedJD.focusAreas.join(', '), size: 22 })
                        ],
                        spacing: { after: 60 }
                    }));
                }

                // Key responsibilities I can fulfill
                if (parsedJD.responsibilities.length > 0) {
                    children.push(new Paragraph({
                        children: [new TextRun({ text: 'âœ“ Key Responsibilities (from JD):', bold: true, size: 22, color: '16a34a' })],
                        spacing: { before: 80, after: 40 }
                    }));
                    parsedJD.responsibilities.slice(0, 4).forEach(resp => {
                        children.push(new Paragraph({
                            children: [new TextRun({ text: `  â€¢ ${resp}`, size: 20 })],
                            spacing: { after: 30 }
                        }));
                    });
                }

                children.push(new Paragraph({ children: [], spacing: { after: 150 } }));
            }

            // Section: Key Achievements
            children.push(new Paragraph({
                children: [new TextRun({ text: 'KEY ACHIEVEMENTS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            USER_PROFILE.keyMetrics.forEach(m => {
                children.push(new Paragraph({
                    children: [
                        new TextRun({ text: `â€¢ ${m.value}`, bold: true, size: 22 }),
                        new TextRun({ text: ` - ${m.label}`, size: 22 })
                    ]
                }));
            });
            children.push(new Paragraph({ children: [], spacing: { after: 200 } }));

            // Section: Core Technical Skills (tailored)
            children.push(new Paragraph({
                children: [new TextRun({ text: 'CORE TECHNICAL SKILLS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: `(Tailored for: ${job.title} at ${job.company})`, italics: true, size: 18, color: '888888' })],
                spacing: { after: 100 }
            }));

            // Prioritized skills first
            relevantSkillCategories.forEach(cat => {
                if (USER_PROFILE.skills[cat]) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: `${cat}: `, bold: true, size: 22 }),
                            new TextRun({ text: USER_PROFILE.skills[cat], size: 22 })
                        ],
                        spacing: { after: 80 }
                    }));
                }
            });
            // Remaining skills
            Object.keys(USER_PROFILE.skills).forEach(cat => {
                if (!relevantSkillCategories.includes(cat)) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: `${cat}: `, bold: true, size: 22 }),
                            new TextRun({ text: USER_PROFILE.skills[cat], size: 22 })
                        ],
                        spacing: { after: 80 }
                    }));
                }
            });
            children.push(new Paragraph({ children: [], spacing: { after: 200 } }));

            // Section: Professional Experience
            children.push(new Paragraph({
                children: [new TextRun({ text: 'PROFESSIONAL EXPERIENCE', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));

            USER_PROFILE.experience.forEach(exp => {
                // Job title - bold for ATS
                children.push(new Paragraph({
                    children: [new TextRun({ text: exp.title, bold: true, size: 24 })],
                    spacing: { before: 200 }
                }));
                // Company, location, dates - clear separation for ATS parsing
                children.push(new Paragraph({
                    children: [
                        new TextRun({ text: exp.company, bold: true, size: 22 }),
                        new TextRun({ text: ` | ${exp.location} | `, size: 22, color: '666666' }),
                        new TextRun({ text: exp.dates, size: 22, color: '666666' })
                    ]
                }));
                // All bullets - full text for ATS keyword scanning
                exp.bullets.forEach(bullet => {
                    children.push(new Paragraph({
                        children: [new TextRun({ text: `â€¢ ${bullet}`, size: 21 })],
                        spacing: { before: 60, after: 40 }
                    }));
                });
                // Add spacing between jobs
                children.push(new Paragraph({ children: [], spacing: { after: 100 } }));
            });
            children.push(new Paragraph({ children: [], spacing: { after: 100 } }));

            // Section: ATS Keywords (hidden but parseable)
            children.push(new Paragraph({
                children: [new TextRun({ text: 'TECHNICAL KEYWORDS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            // Build ATS keyword string from job and profile
            const atsKeywords = [
                // From job
                job.title,
                // Core skills
                'Cloud Architect', 'Platform Engineer', 'Site Reliability Engineer', 'SRE', 'DevOps', 'Infrastructure Engineer',
                'GPU', 'HPC', 'Slurm', 'NVIDIA', 'A100', 'V100', 'DGX', 'CUDA', 'TensorRT',
                'Kubernetes', 'K8s', 'EKS', 'AKS', 'Docker', 'Helm', 'Istio', 'ArgoCD', 'FluxCD', 'GitOps',
                'AWS', 'Azure', 'Multi-Cloud', 'Hybrid Cloud',
                'Terraform', 'Ansible', 'CloudFormation', 'Infrastructure as Code', 'IaC',
                'CI/CD', 'Jenkins', 'GitHub Actions', 'GitLab CI',
                'Python', 'Go', 'Golang', 'Bash', 'Shell Scripting',
                'Prometheus', 'Grafana', 'Datadog', 'ELK', 'Observability', 'Monitoring',
                'AI/ML', 'Machine Learning', 'MLOps', 'PyTorch', 'TensorFlow', 'SageMaker', 'MLflow', 'Kubeflow',
                'Spark', 'Kafka', 'Hadoop', 'Big Data', 'Data Engineering',
                'SOC2', 'HIPAA', 'FedRAMP', 'HITRUST', 'Security', 'Compliance', 'DevSecOps',
                'Microservices', 'Distributed Systems', 'High Availability', 'Scalability',
                'Leadership', 'Team Management', 'Budget Management', 'Incident Response', 'On-Call'
            ].join(', ');
            children.push(new Paragraph({
                children: [new TextRun({ text: atsKeywords, size: 18, color: '888888' })],
                spacing: { after: 100 }
            }));

            // Section: Education & Certifications
            children.push(new Paragraph({
                children: [new TextRun({ text: 'EDUCATION & CERTIFICATIONS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.education.degree, bold: true, size: 22 })]
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.education.school, size: 22 })],
                spacing: { after: 150 }
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: 'Certifications:', bold: true, size: 22 })]
            }));
            USER_PROFILE.certifications.forEach(cert => {
                children.push(new Paragraph({
                    children: [new TextRun({ text: `â€¢ ${cert}`, size: 22 })]
                }));
            });

            const doc = new Document({
                sections: [{
                    properties: {},
                    children: children
                }]
            });

            const blob = await Packer.toBlob(doc);
            saveAs(blob, `Resume_${USER_PROFILE.name.replace(/\s+/g, '_')}_${job.company.replace(/[^a-zA-Z0-9]/g, '_')}.docx`);
        }

        // Store jobs globally for cover letter/resume access
        let jobsMap = {};

        // ============ COMPANY LIST ============
        const COMPANIES = [
            // ===== AI/ML Companies (Ashby) =====
            { name: 'OpenAI', board: 'openai', type: 'ashby', logo: 'https://logo.clearbit.com/openai.com' },
            { name: 'Ramp', board: 'ramp', type: 'ashby', logo: 'https://logo.clearbit.com/ramp.com' },
            { name: 'Persona', board: 'persona', type: 'ashby', logo: 'https://logo.clearbit.com/withpersona.com' },
            { name: 'Vanta', board: 'vanta', type: 'ashby', logo: 'https://logo.clearbit.com/vanta.com' },
            { name: 'Retool', board: 'retool', type: 'ashby', logo: 'https://logo.clearbit.com/retool.com' },
            { name: 'Linear', board: 'linear', type: 'ashby', logo: 'https://logo.clearbit.com/linear.app' },
            { name: 'Vercel', board: 'vercel', type: 'ashby', logo: 'https://logo.clearbit.com/vercel.com' },
            { name: 'Supabase', board: 'supabase', type: 'ashby', logo: 'https://logo.clearbit.com/supabase.com' },
            { name: 'Resend', board: 'resend', type: 'ashby', logo: 'https://logo.clearbit.com/resend.com' },
            { name: 'Webflow', board: 'webflow', type: 'ashby', logo: 'https://logo.clearbit.com/webflow.com' },
            { name: 'Cal.com', board: 'calcom', type: 'ashby', logo: 'https://logo.clearbit.com/cal.com' },

            // ===== AI/ML Companies (Greenhouse/Lever) =====
            { name: 'Anthropic', board: 'anthropic', type: 'greenhouse', logo: 'https://logo.clearbit.com/anthropic.com' },
            { name: 'Google DeepMind', board: 'deepmind', type: 'greenhouse', logo: 'https://logo.clearbit.com/deepmind.com' },
            { name: 'Cohere', board: 'cohere', type: 'lever', logo: 'https://logo.clearbit.com/cohere.com' },
            { name: 'Hugging Face', board: 'huggingface', type: 'greenhouse', logo: 'https://logo.clearbit.com/huggingface.co' },
            { name: 'Runway', board: 'runwayml', type: 'greenhouse', logo: 'https://logo.clearbit.com/runwayml.com' },
            { name: 'Stability AI', board: 'stabilityai', type: 'greenhouse', logo: 'https://logo.clearbit.com/stability.ai' },
            { name: 'Mistral AI', board: 'mistral', type: 'greenhouse', logo: 'https://logo.clearbit.com/mistral.ai' },
            { name: 'Character AI', board: 'character', type: 'greenhouse', logo: 'https://logo.clearbit.com/character.ai' },
            { name: 'Perplexity', board: 'perplexityai', type: 'greenhouse', logo: 'https://logo.clearbit.com/perplexity.ai' },
            { name: 'Together AI', board: 'togetherai', type: 'lever', logo: 'https://logo.clearbit.com/together.ai' },
            { name: 'Weights & Biases', board: 'wandb', type: 'lever', logo: 'https://logo.clearbit.com/wandb.com' },
            { name: 'Anyscale', board: 'anyscale', type: 'lever', logo: 'https://logo.clearbit.com/anyscale.com' },
            { name: 'Modal', board: 'modal', type: 'lever', logo: 'https://logo.clearbit.com/modal.com' },
            { name: 'Replicate', board: 'replicate', type: 'lever', logo: 'https://logo.clearbit.com/replicate.com' },

            // ===== GPU/AI Infrastructure =====
            { name: 'CoreWeave', board: 'coreweave', type: 'greenhouse', logo: 'https://logo.clearbit.com/coreweave.com' },
            { name: 'Lambda Labs', board: 'lambdalabs', type: 'lever', logo: 'https://logo.clearbit.com/lambdalabs.com' },
            { name: 'Crusoe Energy', board: 'crusoe', type: 'greenhouse', logo: 'https://logo.clearbit.com/crusoeenergy.com' },
            { name: 'Applied Intuition', board: 'appliedintuition', type: 'greenhouse', logo: 'https://logo.clearbit.com/appliedintuition.com' },

            // ===== E-Commerce Giants =====
            { name: 'Coupang', board: 'coupang', type: 'greenhouse', logo: 'https://logo.clearbit.com/coupang.com' },
            { name: 'Mercari', board: 'mercari', type: 'greenhouse', logo: 'https://logo.clearbit.com/mercari.com' },
            { name: 'Wish', board: 'wish', type: 'greenhouse', logo: 'https://logo.clearbit.com/wish.com' },
            { name: 'Etsy', board: 'etsy', type: 'greenhouse', logo: 'https://logo.clearbit.com/etsy.com' },
            { name: 'Wayfair', board: 'wayfair', type: 'greenhouse', logo: 'https://logo.clearbit.com/wayfair.com' },
            { name: 'Chewy', board: 'chewy', type: 'greenhouse', logo: 'https://logo.clearbit.com/chewy.com' },

            // ===== Big Tech with Greenhouse/Lever =====
            { name: 'Stripe', board: 'stripe', type: 'greenhouse', logo: 'https://logo.clearbit.com/stripe.com' },
            { name: 'Airbnb', board: 'airbnb', type: 'greenhouse', logo: 'https://logo.clearbit.com/airbnb.com' },
            { name: 'Netflix', board: 'netflix', type: 'lever', logo: 'https://logo.clearbit.com/netflix.com' },
            { name: 'Discord', board: 'discord', type: 'greenhouse', logo: 'https://logo.clearbit.com/discord.com' },
            { name: 'Figma', board: 'figma', type: 'greenhouse', logo: 'https://logo.clearbit.com/figma.com' },
            { name: 'Notion', board: 'notion', type: 'greenhouse', logo: 'https://logo.clearbit.com/notion.so' },
            { name: 'Airtable', board: 'airtable', type: 'greenhouse', logo: 'https://logo.clearbit.com/airtable.com' },
            { name: 'Coinbase', board: 'coinbase', type: 'greenhouse', logo: 'https://logo.clearbit.com/coinbase.com' },
            { name: 'Twitch', board: 'twitch', type: 'greenhouse', logo: 'https://logo.clearbit.com/twitch.tv' },
            { name: 'DoorDash', board: 'doordash', type: 'greenhouse', logo: 'https://logo.clearbit.com/doordash.com' },
            { name: 'Instacart', board: 'instacart', type: 'greenhouse', logo: 'https://logo.clearbit.com/instacart.com' },
            { name: 'Plaid', board: 'plaid', type: 'greenhouse', logo: 'https://logo.clearbit.com/plaid.com' },
            { name: 'Square', board: 'square', type: 'greenhouse', logo: 'https://logo.clearbit.com/squareup.com' },
            { name: 'Robinhood', board: 'robinhood', type: 'greenhouse', logo: 'https://logo.clearbit.com/robinhood.com' },

            // ===== Data/Cloud Infrastructure =====
            { name: 'Rubrik', board: 'rubrik', type: 'greenhouse', logo: 'https://logo.clearbit.com/rubrik.com' },
            { name: 'Hammerspace', board: 'hammerspace', type: 'greenhouse', logo: 'https://logo.clearbit.com/hammerspace.com' },
            { name: 'Databricks', board: 'databricks', type: 'greenhouse', logo: 'https://logo.clearbit.com/databricks.com' },
            { name: 'Snowflake', board: 'snowflakecomputing', type: 'greenhouse', logo: 'https://logo.clearbit.com/snowflake.com' },
            { name: 'HashiCorp', board: 'hashicorp', type: 'greenhouse', logo: 'https://logo.clearbit.com/hashicorp.com' },
            { name: 'GitLab', board: 'gitlab', type: 'greenhouse', logo: 'https://logo.clearbit.com/gitlab.com' },
            { name: 'Confluent', board: 'confluent', type: 'greenhouse', logo: 'https://logo.clearbit.com/confluent.io' },
            { name: 'MongoDB', board: 'mongodb', type: 'greenhouse', logo: 'https://logo.clearbit.com/mongodb.com' },
            { name: 'Elastic', board: 'elastic', type: 'greenhouse', logo: 'https://logo.clearbit.com/elastic.co' },
            { name: 'Cloudflare', board: 'cloudflare', type: 'lever', logo: 'https://logo.clearbit.com/cloudflare.com' },
            { name: 'DigitalOcean', board: 'digitalocean98', type: 'lever', logo: 'https://logo.clearbit.com/digitalocean.com' },
            { name: 'Vercel', board: 'vercel', type: 'lever', logo: 'https://logo.clearbit.com/vercel.com' },
            { name: 'Supabase', board: 'supabase', type: 'lever', logo: 'https://logo.clearbit.com/supabase.com' },
            { name: 'Cockroach Labs', board: 'cockroach-labs', type: 'lever', logo: 'https://logo.clearbit.com/cockroachlabs.com' },

            // ===== Observability/DevOps =====
            { name: 'Datadog', board: 'datadog', type: 'greenhouse', logo: 'https://logo.clearbit.com/datadoghq.com' },
            { name: 'PagerDuty', board: 'pagerduty', type: 'greenhouse', logo: 'https://logo.clearbit.com/pagerduty.com' },
            { name: 'Splunk', board: 'splunk', type: 'greenhouse', logo: 'https://logo.clearbit.com/splunk.com' },
            { name: 'New Relic', board: 'newrelic', type: 'greenhouse', logo: 'https://logo.clearbit.com/newrelic.com' },
            { name: 'Grafana Labs', board: 'grafanalabs', type: 'lever', logo: 'https://logo.clearbit.com/grafana.com' },
            { name: 'Sumo Logic', board: 'sumologic', type: 'lever', logo: 'https://logo.clearbit.com/sumologic.com' },
            { name: 'CircleCI', board: 'circleci', type: 'lever', logo: 'https://logo.clearbit.com/circleci.com' },
            { name: 'LaunchDarkly', board: 'launchdarkly', type: 'lever', logo: 'https://logo.clearbit.com/launchdarkly.com' },

            // ===== Security =====
            { name: 'Okta', board: 'okta', type: 'greenhouse', logo: 'https://logo.clearbit.com/okta.com' },
            { name: 'CrowdStrike', board: 'crowdstrike', type: 'greenhouse', logo: 'https://logo.clearbit.com/crowdstrike.com' },
            { name: 'Zscaler', board: 'zscaler', type: 'greenhouse', logo: 'https://logo.clearbit.com/zscaler.com' },
            { name: 'SentinelOne', board: 'sentinelone', type: 'greenhouse', logo: 'https://logo.clearbit.com/sentinelone.com' },
            { name: 'Lacework', board: 'lacework', type: 'greenhouse', logo: 'https://logo.clearbit.com/lacework.com' },
            { name: 'Snyk', board: 'snyk', type: 'greenhouse', logo: 'https://logo.clearbit.com/snyk.io' },
            { name: 'Wiz', board: 'wizinc', type: 'greenhouse', logo: 'https://logo.clearbit.com/wiz.io' },
            { name: '1Password', board: '1password', type: 'greenhouse', logo: 'https://logo.clearbit.com/1password.com' },

            // ===== Defense/Aerospace Tech =====
            { name: 'Shield AI', board: 'shieldai', type: 'greenhouse', logo: 'https://logo.clearbit.com/shield.ai' },

            // ===== Gaming =====
            { name: 'Roblox', board: 'roblox', type: 'greenhouse', logo: 'https://logo.clearbit.com/roblox.com' },

            // ===== Unicorns & Late-Stage Startups =====
            { name: 'Uber', board: 'uber', type: 'greenhouse', logo: 'https://logo.clearbit.com/uber.com' },
            { name: 'Lyft', board: 'lyft', type: 'greenhouse', logo: 'https://logo.clearbit.com/lyft.com' },
            { name: 'Pinterest', board: 'pinterest', type: 'greenhouse', logo: 'https://logo.clearbit.com/pinterest.com' },
            { name: 'Snap', board: 'snap', type: 'greenhouse', logo: 'https://logo.clearbit.com/snap.com' },
            { name: 'Reddit', board: 'reddit', type: 'greenhouse', logo: 'https://logo.clearbit.com/reddit.com' },
            { name: 'Spotify', board: 'spotify', type: 'greenhouse', logo: 'https://logo.clearbit.com/spotify.com' },
            { name: 'Dropbox', board: 'dropbox', type: 'greenhouse', logo: 'https://logo.clearbit.com/dropbox.com' },
            { name: 'Asana', board: 'asana', type: 'greenhouse', logo: 'https://logo.clearbit.com/asana.com' },
            { name: 'Palantir', board: 'palantir', type: 'greenhouse', logo: 'https://logo.clearbit.com/palantir.com' },
            { name: 'Zoom', board: 'zoom', type: 'greenhouse', logo: 'https://logo.clearbit.com/zoom.us' },
            { name: 'DocuSign', board: 'docusign', type: 'greenhouse', logo: 'https://logo.clearbit.com/docusign.com' },
            { name: 'Slack', board: 'slack', type: 'greenhouse', logo: 'https://logo.clearbit.com/slack.com' },
            { name: 'Atlassian', board: 'atlassian', type: 'greenhouse', logo: 'https://logo.clearbit.com/atlassian.com' },
            { name: 'Shopify', board: 'shopify', type: 'greenhouse', logo: 'https://logo.clearbit.com/shopify.com' },
            { name: 'Block', board: 'block', type: 'greenhouse', logo: 'https://logo.clearbit.com/block.xyz' },
            { name: 'Toast', board: 'toast', type: 'greenhouse', logo: 'https://logo.clearbit.com/toasttab.com' },

            // ===== Enterprise/B2B =====
            { name: 'ServiceNow', board: 'servicenow', type: 'greenhouse', logo: 'https://logo.clearbit.com/servicenow.com' },
            { name: 'Workday', board: 'workday', type: 'greenhouse', logo: 'https://logo.clearbit.com/workday.com' },
            { name: 'Zendesk', board: 'zendesk', type: 'greenhouse', logo: 'https://logo.clearbit.com/zendesk.com' },
            { name: 'HubSpot', board: 'hubspot', type: 'greenhouse', logo: 'https://logo.clearbit.com/hubspot.com' },
            { name: 'Amplitude', board: 'amplitude', type: 'greenhouse', logo: 'https://logo.clearbit.com/amplitude.com' },
            { name: 'Mixpanel', board: 'mixpanel', type: 'greenhouse', logo: 'https://logo.clearbit.com/mixpanel.com' },
            { name: 'Segment', board: 'segment', type: 'lever', logo: 'https://logo.clearbit.com/segment.com' },
            { name: 'Fivetran', board: 'fivetran', type: 'greenhouse', logo: 'https://logo.clearbit.com/fivetran.com' },
            { name: 'dbt Labs', board: 'daboratorieslabs', type: 'greenhouse', logo: 'https://logo.clearbit.com/getdbt.com' },
            { name: 'Starburst', board: 'starburstdata', type: 'greenhouse', logo: 'https://logo.clearbit.com/starburst.io' },

            // ===== Fintech =====
            { name: 'Ramp', board: 'ramp', type: 'greenhouse', logo: 'https://logo.clearbit.com/ramp.com' },
            { name: 'Brex', board: 'brex', type: 'greenhouse', logo: 'https://logo.clearbit.com/brex.com' },
            { name: 'Rippling', board: 'rippling', type: 'greenhouse', logo: 'https://logo.clearbit.com/rippling.com' },
            { name: 'Gusto', board: 'gusto', type: 'greenhouse', logo: 'https://logo.clearbit.com/gusto.com' },
            { name: 'Chime', board: 'chime', type: 'greenhouse', logo: 'https://logo.clearbit.com/chime.com' },
            { name: 'Affirm', board: 'affirm', type: 'greenhouse', logo: 'https://logo.clearbit.com/affirm.com' },
            { name: 'Klarna', board: 'klarna', type: 'greenhouse', logo: 'https://logo.clearbit.com/klarna.com' },
            { name: 'Marqeta', board: 'marqeta', type: 'greenhouse', logo: 'https://logo.clearbit.com/marqeta.com' },

            // ===== Autonomous/Robotics =====
            { name: 'Waymo', board: 'waymo', type: 'greenhouse', logo: 'https://logo.clearbit.com/waymo.com' },
            { name: 'Cruise', board: 'cruise', type: 'greenhouse', logo: 'https://logo.clearbit.com/getcruise.com' },
            { name: 'Aurora', board: 'aurora', type: 'greenhouse', logo: 'https://logo.clearbit.com/aurora.tech' },
            { name: 'Nuro', board: 'nuro', type: 'greenhouse', logo: 'https://logo.clearbit.com/nuro.ai' },
            { name: 'Zoox', board: 'zoox', type: 'greenhouse', logo: 'https://logo.clearbit.com/zoox.com' },
            { name: 'Figure', board: 'figureai', type: 'greenhouse', logo: 'https://logo.clearbit.com/figure.ai' },

            // ===== Other Tech =====
            { name: 'Twilio', board: 'twilio', type: 'lever', logo: 'https://logo.clearbit.com/twilio.com' },
            { name: 'Auth0', board: 'auth0', type: 'lever', logo: 'https://logo.clearbit.com/auth0.com' },
            { name: 'Miro', board: 'miro', type: 'lever', logo: 'https://logo.clearbit.com/miro.com' },
            { name: 'Webflow', board: 'webflow', type: 'lever', logo: 'https://logo.clearbit.com/webflow.com' },
            { name: 'Linear', board: 'linear', type: 'lever', logo: 'https://logo.clearbit.com/linear.app' },
            { name: 'Retool', board: 'retool', type: 'lever', logo: 'https://logo.clearbit.com/retool.com' },
            { name: 'Faire', board: 'faire', type: 'greenhouse', logo: 'https://logo.clearbit.com/faire.com' },
            { name: 'Flexport', board: 'flexport', type: 'greenhouse', logo: 'https://logo.clearbit.com/flexport.com' },
            { name: 'Canva', board: 'canva', type: 'greenhouse', logo: 'https://logo.clearbit.com/canva.com' },
            { name: 'Figma', board: 'figma', type: 'greenhouse', logo: 'https://logo.clearbit.com/figma.com' },
            { name: 'Loom', board: 'loom', type: 'greenhouse', logo: 'https://logo.clearbit.com/loom.com' },
            { name: 'Calendly', board: 'calendly', type: 'greenhouse', logo: 'https://logo.clearbit.com/calendly.com' },

            // ===== Emerging AI Startups =====
            { name: 'xAI', board: 'xai', type: 'greenhouse', logo: 'https://logo.clearbit.com/x.ai' },
            { name: 'Inflection AI', board: 'inflectionai', type: 'greenhouse', logo: 'https://logo.clearbit.com/inflection.ai' },
            { name: 'Adept AI', board: 'adept', type: 'lever', logo: 'https://logo.clearbit.com/adept.ai' },
            { name: 'Midjourney', board: 'midjourney', type: 'lever', logo: 'https://logo.clearbit.com/midjourney.com' },
            { name: 'Jasper AI', board: 'jasper', type: 'greenhouse', logo: 'https://logo.clearbit.com/jasper.ai' },
            { name: 'Writer', board: 'writer', type: 'greenhouse', logo: 'https://logo.clearbit.com/writer.com' },
            { name: 'Glean', board: 'glaboratories', type: 'greenhouse', logo: 'https://logo.clearbit.com/glean.com' },
            { name: 'Character.AI', board: 'characterai', type: 'greenhouse', logo: 'https://logo.clearbit.com/character.ai' },
            { name: 'Anthropic', board: 'anthropic', type: 'greenhouse', logo: 'https://logo.clearbit.com/anthropic.com' },
            { name: 'Together AI', board: 'togetherai', type: 'greenhouse', logo: 'https://logo.clearbit.com/together.ai' },
            { name: 'Lightning AI', board: 'gridai', type: 'greenhouse', logo: 'https://logo.clearbit.com/lightning.ai' },
            { name: 'Baseten', board: 'baseten', type: 'greenhouse', logo: 'https://logo.clearbit.com/baseten.co' },
            { name: 'Labelbox', board: 'labelbox', type: 'greenhouse', logo: 'https://logo.clearbit.com/labelbox.com' },
            { name: 'Weights & Biases', board: 'wandb', type: 'greenhouse', logo: 'https://logo.clearbit.com/wandb.com' },
            { name: 'Abnormal Security', board: 'abnormalsecurity', type: 'greenhouse', logo: 'https://logo.clearbit.com/abnormalsecurity.com' },
            { name: 'Sigma Computing', board: 'sigmacomputing', type: 'greenhouse', logo: 'https://logo.clearbit.com/sigmacomputing.com' },
            { name: 'Descript', board: 'descript', type: 'greenhouse', logo: 'https://logo.clearbit.com/descript.com' },
            { name: 'Postman', board: 'postman', type: 'greenhouse', logo: 'https://logo.clearbit.com/postman.com' },
            { name: 'Decagon', board: 'decagon', type: 'greenhouse', logo: 'https://logo.clearbit.com/decagon.ai' },
            { name: 'Magic AI', board: 'magic', type: 'lever', logo: 'https://logo.clearbit.com/magic.dev' },
            { name: 'Genmo', board: 'genmo', type: 'greenhouse', logo: 'https://logo.clearbit.com/genmo.ai' },
            { name: 'Voxel', board: 'voxel51', type: 'greenhouse', logo: 'https://logo.clearbit.com/voxel51.com' },
            { name: 'You.com', board: 'youinc', type: 'greenhouse', logo: 'https://logo.clearbit.com/you.com' },
            { name: 'Roboflow', board: 'roboflow', type: 'greenhouse', logo: 'https://logo.clearbit.com/roboflow.com' },
            { name: 'Ema', board: 'aboratory', type: 'greenhouse', logo: 'https://logo.clearbit.com/ema.co' },
            { name: 'Whatnot', board: 'whatnot', type: 'greenhouse', logo: 'https://logo.clearbit.com/whatnot.com' },
            { name: 'Mithril', board: 'mithrilsecurity', type: 'greenhouse', logo: 'https://logo.clearbit.com/mithrilsecurity.io' },

            // ===== AI Startups (From User List) =====
            { name: 'Assort Health', board: 'assorthealth', type: 'greenhouse', logo: 'https://logo.clearbit.com/assorthealth.com' },
            { name: 'Interface AI', board: 'interfaceai', type: 'greenhouse', logo: 'https://logo.clearbit.com/interface.ai' },
            { name: 'Symbolica AI', board: 'symbolica', type: 'greenhouse', logo: 'https://logo.clearbit.com/symbolica.ai' },
            { name: 'Comfy', board: 'comfyorg', type: 'greenhouse', logo: 'https://logo.clearbit.com/comfy.org' },
            { name: 'Latent', board: 'latentai', type: 'greenhouse', logo: 'https://logo.clearbit.com/latent.ai' },
            { name: 'Relace', board: 'relace', type: 'greenhouse', logo: 'https://logo.clearbit.com/relace.ai' },
            { name: 'Isotron AI', board: 'isotronai', type: 'greenhouse', logo: 'https://logo.clearbit.com/isotron.ai' },
            { name: 'Parasail', board: 'parasail', type: 'greenhouse', logo: 'https://logo.clearbit.com/parasail.io' },
            { name: 'Asari AI', board: 'asariai', type: 'greenhouse', logo: 'https://logo.clearbit.com/asari.ai' },
            { name: 'Novita AI', board: 'novitaai', type: 'greenhouse', logo: 'https://logo.clearbit.com/novita.ai' },
            { name: 'UniversalAGI', board: 'universalagi', type: 'greenhouse', logo: 'https://logo.clearbit.com/universalagi.com' },
            { name: 'Catalyst Labs', board: 'catalystlabs', type: 'greenhouse', logo: 'https://logo.clearbit.com/catalyst.dev' },
            { name: 'Odyssey', board: 'odyssey', type: 'greenhouse', logo: 'https://logo.clearbit.com/odyssey.systems' },
            { name: 'Liberate', board: 'liberate', type: 'greenhouse', logo: 'https://logo.clearbit.com/liberate.tech' },
            { name: 'Eventual', board: 'eventual', type: 'greenhouse', logo: 'https://logo.clearbit.com/eventualcomputing.com' },

            // ===== Enterprise/B2B (From User List) =====
            { name: 'Gladly', board: 'gladly', type: 'greenhouse', logo: 'https://logo.clearbit.com/gladly.com' },
            { name: 'Globality', board: 'globality', type: 'greenhouse', logo: 'https://logo.clearbit.com/globality.com' },
            { name: 'BitGo', board: 'bitgo', type: 'greenhouse', logo: 'https://logo.clearbit.com/bitgo.com' },
            { name: 'Sonatus', board: 'sonatus', type: 'greenhouse', logo: 'https://logo.clearbit.com/sonatus.com' },
            { name: 'Everlaw', board: 'everlaw', type: 'greenhouse', logo: 'https://logo.clearbit.com/everlaw.com' },
            { name: 'DigiCert', board: 'digicert', type: 'greenhouse', logo: 'https://logo.clearbit.com/digicert.com' },

            // ===== Hardware/Semiconductors (From User List) =====
            { name: 'Tenstorrent', board: 'tenstorrent', type: 'greenhouse', logo: 'https://logo.clearbit.com/tenstorrent.com' },
            { name: 'SK hynix', board: 'skhynix', type: 'greenhouse', logo: 'https://logo.clearbit.com/skhynix.com' },

            // ===== AI Healthcare =====
            { name: 'Abridge', board: 'abridge', type: 'greenhouse', logo: 'https://logo.clearbit.com/abridge.com' },
            { name: 'Spring Health', board: 'springhealth66', type: 'greenhouse', logo: 'https://logo.clearbit.com/springhealth.com' },
            { name: 'Heartflow', board: 'heartflow', type: 'greenhouse', logo: 'https://logo.clearbit.com/heartflow.com' },

            // ===== Enterprise Software =====
            { name: 'SAP', board: 'sap', type: 'greenhouse', logo: 'https://logo.clearbit.com/sap.com' },
            { name: 'Adobe', board: 'adobe', type: 'greenhouse', logo: 'https://logo.clearbit.com/adobe.com' },
            { name: 'VMware', board: 'vmware', type: 'greenhouse', logo: 'https://logo.clearbit.com/vmware.com' },
            { name: 'Nutanix', board: 'nutanix', type: 'greenhouse', logo: 'https://logo.clearbit.com/nutanix.com' },
            { name: 'Palo Alto Networks', board: 'paloaltonetworks', type: 'greenhouse', logo: 'https://logo.clearbit.com/paloaltonetworks.com' },
            { name: 'Fortinet', board: 'fortinet', type: 'greenhouse', logo: 'https://logo.clearbit.com/fortinet.com' },
            { name: 'Pure Storage', board: 'purestorage', type: 'lever', logo: 'https://logo.clearbit.com/purestorage.com' },
            { name: 'NetApp', board: 'netapp', type: 'greenhouse', logo: 'https://logo.clearbit.com/netapp.com' },

            // ===== Semiconductors & Hardware =====
            { name: 'Qualcomm', board: 'qualcomm', type: 'greenhouse', logo: 'https://logo.clearbit.com/qualcomm.com' },
            { name: 'Marvell', board: 'marvell', type: 'greenhouse', logo: 'https://logo.clearbit.com/marvell.com' },
            { name: 'Broadcom', board: 'broadcom', type: 'greenhouse', logo: 'https://logo.clearbit.com/broadcom.com' },
            { name: 'SambaNova', board: 'sambanovasystems', type: 'lever', logo: 'https://logo.clearbit.com/sambanova.ai' },

            // ===== Healthcare Tech =====
            { name: 'Agilent', board: 'agilent', type: 'lever', logo: 'https://logo.clearbit.com/agilent.com' },
            { name: 'Intuitive', board: 'intuitivesr', type: 'greenhouse', logo: 'https://logo.clearbit.com/intuitive.com' },
            { name: 'Veeva Systems', board: 'veeva', type: 'greenhouse', logo: 'https://logo.clearbit.com/veeva.com' },
            { name: 'Oscar Health', board: 'oscar', type: 'greenhouse', logo: 'https://logo.clearbit.com/hioscar.com' },
            { name: 'Ro', board: 'ro', type: 'greenhouse', logo: 'https://logo.clearbit.com/ro.co' },
            { name: 'Tempus', board: 'tempus', type: 'greenhouse', logo: 'https://logo.clearbit.com/tempus.com' },
            { name: 'Flatiron Health', board: 'flatironhealth', type: 'greenhouse', logo: 'https://logo.clearbit.com/flatiron.com' },

            // ===== Payments & Fintech =====
            { name: 'PayPal', board: 'paypal', type: 'greenhouse', logo: 'https://logo.clearbit.com/paypal.com' },
            { name: 'Adyen', board: 'adyen', type: 'greenhouse', logo: 'https://logo.clearbit.com/adyen.com' },
            { name: 'Bill.com', board: 'billcom', type: 'greenhouse', logo: 'https://logo.clearbit.com/bill.com' },
            { name: 'Checkout.com', board: 'checkout', type: 'greenhouse', logo: 'https://logo.clearbit.com/checkout.com' },
            { name: 'Revolut', board: 'revolut', type: 'lever', logo: 'https://logo.clearbit.com/revolut.com' },

            // ===== Gaming & Entertainment =====
            { name: 'Roblox', board: 'roblox', type: 'greenhouse', logo: 'https://logo.clearbit.com/roblox.com' },
            { name: 'Epic Games', board: 'epicgames', type: 'greenhouse', logo: 'https://logo.clearbit.com/epicgames.com' },
            { name: 'Unity', board: 'unity3d', type: 'greenhouse', logo: 'https://logo.clearbit.com/unity.com' },
            { name: 'Niantic', board: 'niantic', type: 'greenhouse', logo: 'https://logo.clearbit.com/nianticlabs.com' },
            { name: 'Electronic Arts', board: 'ea', type: 'greenhouse', logo: 'https://logo.clearbit.com/ea.com' },

            // ===== Cloud & Infrastructure =====
            { name: 'Akamai', board: 'akamai', type: 'greenhouse', logo: 'https://logo.clearbit.com/akamai.com' },
            { name: 'Fastly', board: 'fastly', type: 'lever', logo: 'https://logo.clearbit.com/fastly.com' },
            { name: 'Fly.io', board: 'fly', type: 'lever', logo: 'https://logo.clearbit.com/fly.io' },
            { name: 'Render', board: 'render', type: 'lever', logo: 'https://logo.clearbit.com/render.com' },
            { name: 'Railway', board: 'railway', type: 'lever', logo: 'https://logo.clearbit.com/railway.app' },
            { name: 'PlanetScale', board: 'planetscale', type: 'lever', logo: 'https://logo.clearbit.com/planetscale.com' },
            { name: 'Neon', board: 'neondatabase', type: 'lever', logo: 'https://logo.clearbit.com/neon.tech' },
            { name: 'Upstash', board: 'upstash', type: 'lever', logo: 'https://logo.clearbit.com/upstash.com' },



            // ===== US Telecom =====
            { name: 'T-Mobile', board: 'tmobile', type: 'greenhouse', logo: 'https://logo.clearbit.com/t-mobile.com' },
            { name: 'Verizon', board: 'verizon', type: 'greenhouse', logo: 'https://logo.clearbit.com/verizon.com' },
            { name: 'Comcast', board: 'comcast', type: 'greenhouse', logo: 'https://logo.clearbit.com/comcast.com' },

            // ===== US Enterprise Tech =====
            { name: 'Cisco', board: 'cisco', type: 'greenhouse', logo: 'https://logo.clearbit.com/cisco.com' },
            { name: 'Dell Technologies', board: 'dell', type: 'greenhouse', logo: 'https://logo.clearbit.com/dell.com' },
            { name: 'HP Enterprise', board: 'hpe', type: 'greenhouse', logo: 'https://logo.clearbit.com/hpe.com' },
            { name: 'Oracle', board: 'oracle', type: 'greenhouse', logo: 'https://logo.clearbit.com/oracle.com' },
            { name: 'IBM', board: 'ibm', type: 'greenhouse', logo: 'https://logo.clearbit.com/ibm.com' },
            { name: 'Intuit', board: 'intuit', type: 'greenhouse', logo: 'https://logo.clearbit.com/intuit.com' },
            // Salesforce doesn't use Greenhouse API - removed (use Featured Companies link instead)
            { name: 'Box', board: 'box', type: 'greenhouse', logo: 'https://logo.clearbit.com/box.com' },

            // ===== US Media & Entertainment =====
            { name: 'Disney Streaming', board: 'disneystreaming', type: 'greenhouse', logo: 'https://logo.clearbit.com/disney.com' },
            { name: 'Warner Bros Discovery', board: 'wbd', type: 'greenhouse', logo: 'https://logo.clearbit.com/wbd.com' },
            { name: 'Paramount', board: 'paramount', type: 'greenhouse', logo: 'https://logo.clearbit.com/paramount.com' },
            { name: 'NBCUniversal', board: 'nbcuniversal', type: 'greenhouse', logo: 'https://logo.clearbit.com/nbcuniversal.com' },
            { name: 'Hulu', board: 'hulu', type: 'greenhouse', logo: 'https://logo.clearbit.com/hulu.com' },

            // ===== US Travel & Hospitality =====
            { name: 'Expedia', board: 'expedia', type: 'greenhouse', logo: 'https://logo.clearbit.com/expedia.com' },
            { name: 'Tripadvisor', board: 'tripadvisor', type: 'greenhouse', logo: 'https://logo.clearbit.com/tripadvisor.com' },
            { name: 'Airbnb', board: 'airbnb', type: 'greenhouse', logo: 'https://logo.clearbit.com/airbnb.com' },
            { name: 'Vrbo', board: 'vrbo', type: 'greenhouse', logo: 'https://logo.clearbit.com/vrbo.com' },
            { name: 'United Airlines', board: 'united', type: 'greenhouse', logo: 'https://logo.clearbit.com/united.com' },
            { name: 'Delta Air Lines', board: 'delta', type: 'greenhouse', logo: 'https://logo.clearbit.com/delta.com' },
            { name: 'American Airlines', board: 'aa', type: 'greenhouse', logo: 'https://logo.clearbit.com/aa.com' },

            // ===== US Real Estate Tech =====
            { name: 'Zillow', board: 'zillow', type: 'greenhouse', logo: 'https://logo.clearbit.com/zillow.com' },
            { name: 'Redfin', board: 'redfin', type: 'greenhouse', logo: 'https://logo.clearbit.com/redfin.com' },
            { name: 'Opendoor', board: 'opendoor', type: 'greenhouse', logo: 'https://logo.clearbit.com/opendoor.com' },
            { name: 'Compass', board: 'compass', type: 'greenhouse', logo: 'https://logo.clearbit.com/compass.com' },

            // ===== More US Tech =====
            { name: 'Grammarly', board: 'grammarly', type: 'greenhouse', logo: 'https://logo.clearbit.com/grammarly.com' },
            { name: 'Zapier', board: 'zapier', type: 'lever', logo: 'https://logo.clearbit.com/zapier.com' },
            { name: 'Carta', board: 'carta', type: 'greenhouse', logo: 'https://logo.clearbit.com/carta.com' },
            { name: 'Lattice', board: 'lattice', type: 'lever', logo: 'https://logo.clearbit.com/lattice.com' },
            { name: 'Deel', board: 'deel', type: 'greenhouse', logo: 'https://logo.clearbit.com/deel.com' },
            { name: 'Remote', board: 'remotecom', type: 'greenhouse', logo: 'https://logo.clearbit.com/remote.com' },
            { name: 'Postman', board: 'postman', type: 'greenhouse', logo: 'https://logo.clearbit.com/postman.com' },
            { name: 'Kong', board: 'kong', type: 'greenhouse', logo: 'https://logo.clearbit.com/konghq.com' },
            { name: 'Temporal', board: 'temporal', type: 'lever', logo: 'https://logo.clearbit.com/temporal.io' },
            { name: 'Pulumi', board: 'pulumi', type: 'lever', logo: 'https://logo.clearbit.com/pulumi.com' },
        ];

        let allJobs = [];
        let filteredJobs = [];
        let currentPage = 1;
        const jobsPerPage = 25;
        let activeCompanyFilter = null;
        let showExcludedJobs = false;

        // ============ EXCLUDED JOBS MANAGEMENT ============

        // Get excluded job IDs from localStorage
        function getExcludedJobs() {
            try {
                return JSON.parse(localStorage.getItem('excluded_jobs') || '[]');
            } catch (e) {
                return [];
            }
        }

        // Save excluded jobs to localStorage
        function saveExcludedJobs(excludedIds) {
            localStorage.setItem('excluded_jobs', JSON.stringify(excludedIds));
            updateExcludedCount();
        }

        // Exclude a job
        function excludeJob(jobId) {
            const excluded = getExcludedJobs();
            if (!excluded.includes(jobId)) {
                excluded.push(jobId);
                saveExcludedJobs(excluded);
                applyFilters();
            }
        }

        // Restore (un-exclude) a job
        function restoreJob(jobId) {
            const excluded = getExcludedJobs();
            const index = excluded.indexOf(jobId);
            if (index > -1) {
                excluded.splice(index, 1);
                saveExcludedJobs(excluded);
                applyFilters();
            }
        }

        // Check if a job is excluded
        function isJobExcluded(jobId) {
            return getExcludedJobs().includes(jobId);
        }

        // Update excluded count badge
        function updateExcludedCount() {
            const count = getExcludedJobs().length;
            const countEl = document.getElementById('excluded-count');
            if (countEl) {
                countEl.textContent = count;
            }
        }

        // Toggle show/hide excluded jobs
        function toggleExcludedJobs() {
            showExcludedJobs = !showExcludedJobs;
            const toggle = document.getElementById('excluded-toggle');
            if (toggle) {
                toggle.classList.toggle('active', showExcludedJobs);
                toggle.querySelector('i').className = showExcludedJobs ? 'fas fa-eye' : 'fas fa-eye-slash';
            }
            applyFilters();
        }

        // ============ APPLIED JOBS MANAGEMENT ============

        // Get applied job IDs from localStorage
        function getAppliedJobs() {
            try {
                return JSON.parse(localStorage.getItem('applied_jobs') || '[]');
            } catch (e) {
                return [];
            }
        }

        // Get applied jobs data (with metadata)
        function getAppliedJobsData() {
            try {
                return JSON.parse(localStorage.getItem('applied_jobs_data') || '{}');
            } catch (e) {
                return {};
            }
        }

        // Save applied jobs to localStorage
        function saveAppliedJobs(appliedIds) {
            localStorage.setItem('applied_jobs', JSON.stringify(appliedIds));
            updateAppliedCount();
        }

        // Save applied jobs data
        function saveAppliedJobsData(data) {
            localStorage.setItem('applied_jobs_data', JSON.stringify(data));
        }

        // Mark a job as applied (moves it to applied page)
        function markAsApplied(jobId) {
            const job = jobsMap[jobId];
            if (!job) return;

            const applied = getAppliedJobs();
            if (!applied.includes(String(jobId))) {
                applied.push(String(jobId));
                saveAppliedJobs(applied);

                // Save job data for applied page
                const appliedData = getAppliedJobsData();
                appliedData[String(jobId)] = {
                    id: job.id,
                    title: job.title,
                    company: job.company,
                    companyLogo: job.companyLogo,
                    location: job.location,
                    department: job.department,
                    url: job.url,
                    appliedAt: new Date().toISOString()
                };
                saveAppliedJobsData(appliedData);

                // Re-apply filters to remove from list
                applyFilters();
            }
        }

        // Check if a job is applied
        function isJobApplied(jobId) {
            return getAppliedJobs().includes(String(jobId));
        }

        // Update applied count badge
        function updateAppliedCount() {
            const count = getAppliedJobs().length;
            const countEl = document.getElementById('applied-count');
            if (countEl) {
                countEl.textContent = count;
            }
        }

        // ============ BACKUP/RESTORE FUNCTIONS ============

        // Export all job tracking data to JSON file
        function exportJobData() {
            const data = {
                version: 1,
                exportDate: new Date().toISOString(),
                applied_jobs: JSON.parse(localStorage.getItem('applied_jobs') || '[]'),
                applied_jobs_data: JSON.parse(localStorage.getItem('applied_jobs_data') || '{}'),
                excluded_jobs: JSON.parse(localStorage.getItem('excluded_jobs') || '[]')
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `job-tracker-backup-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            alert(`Backup exported!\n\nApplied: ${data.applied_jobs.length} jobs\nHidden: ${data.excluded_jobs.length} jobs`);
        }

        // Import job tracking data from JSON file
        function importJobData(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);

                    // Validate the data structure
                    if (!data.applied_jobs && !data.excluded_jobs) {
                        throw new Error('Invalid backup file format');
                    }

                    // Confirm before overwriting
                    const currentApplied = getAppliedJobs().length;
                    const currentExcluded = getExcludedJobs().length;
                    const importApplied = (data.applied_jobs || []).length;
                    const importExcluded = (data.excluded_jobs || []).length;

                    const confirmMsg = `Import will restore:\n\n` +
                        `Applied jobs: ${importApplied} (currently ${currentApplied})\n` +
                        `Hidden jobs: ${importExcluded} (currently ${currentExcluded})\n\n` +
                        `Choose merge strategy:\n` +
                        `OK = Merge (keep existing + add new)\n` +
                        `Cancel = Abort import`;

                    if (!confirm(confirmMsg)) {
                        return;
                    }

                    // Merge strategy: combine existing with imported (no duplicates)
                    const existingApplied = getAppliedJobs();
                    const existingExcluded = getExcludedJobs();
                    const existingAppliedData = getAppliedJobsData();

                    // Merge applied jobs
                    const mergedApplied = [...new Set([...existingApplied, ...(data.applied_jobs || [])])];
                    localStorage.setItem('applied_jobs', JSON.stringify(mergedApplied));

                    // Merge applied jobs data
                    const mergedAppliedData = { ...existingAppliedData, ...(data.applied_jobs_data || {}) };
                    localStorage.setItem('applied_jobs_data', JSON.stringify(mergedAppliedData));

                    // Merge excluded jobs
                    const mergedExcluded = [...new Set([...existingExcluded, ...(data.excluded_jobs || [])])];
                    localStorage.setItem('excluded_jobs', JSON.stringify(mergedExcluded));

                    // Update UI
                    updateAppliedCount();
                    updateExcludedCount();
                    applyFilters();

                    alert(`Import successful!\n\nApplied jobs: ${mergedApplied.length}\nHidden jobs: ${mergedExcluded.length}\n\nBackup date: ${data.exportDate || 'Unknown'}`);
                } catch (error) {
                    alert('Error importing backup: ' + error.message);
                }
            };
            reader.readAsText(file);
        }

        // ============ API FETCH FUNCTIONS ============

        // Fetch with timeout helper - supports both GET and POST with options
        async function fetchWithTimeout(url, optionsOrTimeout = 8000) {
            const controller = new AbortController();
            let timeout = 8000;
            let fetchOptions = { signal: controller.signal };

            // Handle both old signature (url, timeout) and new signature (url, options)
            if (typeof optionsOrTimeout === 'number') {
                timeout = optionsOrTimeout;
            } else if (typeof optionsOrTimeout === 'object') {
                fetchOptions = { ...optionsOrTimeout, signal: controller.signal };
                timeout = 8000;
            }

            const id = setTimeout(() => controller.abort(), timeout);
            try {
                const response = await fetch(url, fetchOptions);
                clearTimeout(id);
                return response;
            } catch (e) {
                clearTimeout(id);
                return null;
            }
        }

        // Fetch jobs from Greenhouse (listing only - minimal data)
        async function fetchGreenhouseJobs(company) {
            try {
                const response = await fetchWithTimeout(`https://boards-api.greenhouse.io/v1/boards/${company.board}/jobs`);
                if (!response || !response.ok) return [];
                const data = await response.json();

                return (data.jobs || []).map(job => {
                    const location = job.location?.name || 'Remote';
                    return {
                        id: job.id,
                        title: job.title || '',
                        company: company.name,
                        companyLogo: company.logo,
                        location: location,
                        department: job.departments?.[0]?.name || '',
                        description: '',  // Will be fetched individually
                        salary: null,     // Will be fetched individually
                        workType: 'Onsite',
                        url: job.absolute_url || '',
                        postedDate: new Date(job.updated_at || Date.now()),
                        source: 'greenhouse',
                        board: company.board
                    };
                });
            } catch (error) {
                return [];
            }
        }

        // Fetch FULL job details from Greenhouse individual endpoint
        async function fetchGreenhouseJobDetails(job) {
            try {
                const response = await fetchWithTimeout(
                    `https://boards-api.greenhouse.io/v1/boards/${job.board}/jobs/${job.id}`,
                    5000
                );
                if (!response || !response.ok) return job;
                const data = await response.json();

                const rawContent = data.content || '';
                const description = rawContent
                    .replace(/<br\s*\/?>/gi, '\n')
                    .replace(/<\/p>/gi, '\n\n')
                    .replace(/<\/li>/gi, '\n')
                    .replace(/<li>/gi, 'â€¢ ')
                    .replace(/<[^>]*>/g, '')
                    .replace(/&nbsp;/g, ' ')
                    .replace(/&amp;/g, '&')
                    .replace(/\n{3,}/g, '\n\n')
                    .trim();

                return {
                    ...job,
                    description: description,
                    salary: extractSalary(rawContent),
                    workType: extractWorkType(job.location, rawContent)
                };
            } catch (error) {
                return job;
            }
        }

        // Fetch jobs from Lever (listing only)
        async function fetchLeverJobs(company) {
            try {
                const response = await fetchWithTimeout(`https://api.lever.co/v0/postings/${company.board}?mode=json`);
                if (!response || !response.ok) return [];
                const jobs = await response.json();
                if (!Array.isArray(jobs)) return [];

                return jobs.map(job => {
                    const location = job.categories?.location || 'Remote';
                    return {
                        id: job.id,
                        title: job.text || '',
                        company: company.name,
                        companyLogo: company.logo,
                        location: location,
                        department: job.categories?.team || job.categories?.department || '',
                        description: '',  // Will be fetched individually
                        salary: null,     // Will be fetched individually
                        workType: 'Onsite',
                        url: job.hostedUrl || '',
                        postedDate: new Date(job.createdAt || Date.now()),
                        source: 'lever',
                        board: company.board
                    };
                });
            } catch (error) {
                return [];
            }
        }

        // Fetch FULL job details from Lever individual endpoint
        async function fetchLeverJobDetails(job) {
            try {
                const response = await fetchWithTimeout(
                    `https://api.lever.co/v0/postings/${job.board}/${job.id}`,
                    5000
                );
                if (!response || !response.ok) return job;
                const data = await response.json();

                // Build full description with all sections
                let fullDesc = data.descriptionPlain || '';

                // Add additional info
                if (data.additionalPlain) {
                    fullDesc += '\n\n' + data.additionalPlain;
                }

                // Add lists (What You'll Do, Requirements, etc.)
                if (data.lists && data.lists.length > 0) {
                    data.lists.forEach(list => {
                        fullDesc += `\n\n${list.text}:\n`;
                        if (list.content) {
                            const items = list.content.match(/<li[^>]*>([\s\S]*?)<\/li>/gi);
                            if (items) {
                                items.forEach(item => {
                                    const text = item.replace(/<[^>]*>/g, '').trim();
                                    fullDesc += `â€¢ ${text}\n`;
                                });
                            }
                        }
                    });
                }

                const rawContent = fullDesc + ' ' + (data.description || '');

                return {
                    ...job,
                    description: fullDesc.trim(),
                    salary: extractSalary(rawContent),
                    workType: extractWorkType(job.location, rawContent)
                };
            } catch (error) {
                return job;
            }
        }

        // Fetch jobs from Ashby (listing only)
        async function fetchAshbyJobs(company) {
            try {
                const response = await fetchWithTimeout(`https://jobs.ashbyhq.com/api/non-user-graphql?op=ApiJobBoardWithTeams`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        operationName: 'ApiJobBoardWithTeams',
                        variables: { organizationHostedJobsPageName: company.board },
                        query: `query ApiJobBoardWithTeams($organizationHostedJobsPageName: String!) {
                            jobBoard: jobBoardWithTeams(organizationHostedJobsPageName: $organizationHostedJobsPageName) {
                                jobs { id title locationName teamName publishedDate }
                            }
                        }`
                    })
                });
                if (!response || !response.ok) return [];
                const data = await response.json();
                const jobs = data?.data?.jobBoard?.jobs || [];

                return jobs.map(job => ({
                    id: job.id,
                    title: job.title || '',
                    company: company.name,
                    companyLogo: company.logo,
                    location: job.locationName || 'Remote',
                    department: job.teamName || '',
                    description: '',  // Will be fetched individually
                    salary: null,
                    workType: 'Onsite',
                    url: `https://jobs.ashbyhq.com/${company.board}/${job.id}`,
                    postedDate: new Date(job.publishedDate || Date.now()),
                    source: 'ashby',
                    board: company.board
                }));
            } catch (error) {
                return [];
            }
        }

        // Fetch FULL job details from Ashby individual endpoint
        async function fetchAshbyJobDetails(job) {
            try {
                const response = await fetchWithTimeout(`https://jobs.ashbyhq.com/api/non-user-graphql?op=ApiJobPosting`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        operationName: 'ApiJobPosting',
                        variables: {
                            organizationHostedJobsPageName: job.board,
                            jobPostingId: job.id
                        },
                        query: `query ApiJobPosting($organizationHostedJobsPageName: String!, $jobPostingId: String!) {
                            jobPosting(organizationHostedJobsPageName: $organizationHostedJobsPageName, jobPostingId: $jobPostingId) {
                                title descriptionHtml descriptionPlain compensationTierSummary
                                locationName isRemote secondaryLocations { locationName }
                            }
                        }`
                    })
                }, 5000);
                if (!response || !response.ok) return job;
                const data = await response.json();
                const posting = data?.data?.jobPosting;
                if (!posting) return job;

                const rawContent = posting.descriptionPlain || '';
                const compensation = posting.compensationTierSummary || '';

                // Determine work type
                let workType = 'Onsite';
                if (posting.isRemote) workType = 'Remote';
                else if (rawContent.toLowerCase().includes('hybrid')) workType = 'Hybrid';

                return {
                    ...job,
                    description: rawContent,
                    salary: extractSalary(rawContent + ' ' + compensation) || extractSalary(compensation),
                    workType: workType
                };
            } catch (error) {
                return job;
            }
        }

        // Fetch individual job details based on source
        async function fetchJobDetails(job) {
            if (job.source === 'greenhouse') {
                return fetchGreenhouseJobDetails(job);
            } else if (job.source === 'lever') {
                return fetchLeverJobDetails(job);
            } else if (job.source === 'ashby') {
                return fetchAshbyJobDetails(job);
            }
            return job;
        }

        // Filter jobs by date
        function filterByDate(jobs, days) {
            if (!days) return jobs;
            const daysNum = parseFloat(days);
            const cutoffDate = new Date();
            // Handle fractional days (hours) - e.g., 0.125 = 3 hours, 0.25 = 6 hours, 0.5 = 12 hours
            cutoffDate.setTime(cutoffDate.getTime() - (daysNum * 24 * 60 * 60 * 1000));
            return jobs.filter(job => job.postedDate >= cutoffDate);
        }

        // US states and cities for filtering
        const US_LOCATIONS = [
            'united states', 'usa', 'u.s.', 'us-', ', us',
            'alabama', 'alaska', 'arizona', 'arkansas', 'california', 'colorado', 'connecticut',
            'delaware', 'florida', 'georgia', 'hawaii', 'idaho', 'illinois', 'indiana', 'iowa',
            'kansas', 'kentucky', 'louisiana', 'maine', 'maryland', 'massachusetts', 'michigan',
            'minnesota', 'mississippi', 'missouri', 'montana', 'nebraska', 'nevada', 'new hampshire',
            'new jersey', 'new mexico', 'new york', 'north carolina', 'north dakota', 'ohio',
            'oklahoma', 'oregon', 'pennsylvania', 'rhode island', 'south carolina', 'south dakota',
            'tennessee', 'texas', 'utah', 'vermont', 'virginia', 'washington', 'west virginia',
            'wisconsin', 'wyoming', 'dc', 'd.c.',
            // Major US cities
            'san francisco', 'san jose', 'milpitas', 'sunnyvale', 'mountain view', 'palo alto',
            'cupertino', 'santa clara', 'fremont', 'oakland', 'berkeley', 'los angeles', 'san diego',
            'seattle', 'new york', 'nyc', 'brooklyn', 'manhattan', 'austin', 'dallas', 'houston',
            'denver', 'boston', 'chicago', 'atlanta', 'miami', 'phoenix', 'portland', 'raleigh',
            'charlotte', 'durham', 'tampa', 'orlando', 'jacksonville'
        ];

        const NON_US_LOCATIONS = [
            'london', 'uk', 'united kingdom', 'dublin', 'ireland', 'berlin', 'germany', 'amsterdam',
            'paris', 'france', 'singapore', 'tokyo', 'japan', 'sydney', 'australia', 'toronto',
            'canada', 'vancouver', 'india', 'bangalore', 'mumbai', 'hyderabad', 'tel aviv', 'israel',
            'brazil', 'mexico', 'china', 'hong kong', 'korea', 'sweden', 'norway', 'denmark',
            'finland', 'poland', 'spain', 'italy', 'portugal', 'argentina', 'chile', 'colombia',
            'emea', 'apac', 'latam'
        ];

        // Check if job is in USA
        function isUSLocation(location) {
            const loc = location.toLowerCase();
            // Exclude non-US locations first
            if (NON_US_LOCATIONS.some(nonUS => loc.includes(nonUS))) return false;
            // Check for explicit US remote
            if (loc.includes('remote')) {
                // Accept if it mentions US/USA or has no country specified
                if (loc.includes('us') || loc.includes('usa') || loc.includes('united states') || loc.includes('america')) return true;
                // Reject if it says remote + any other region
                if (loc.includes('global') || loc.includes('worldwide') || loc.includes('international') || loc.includes('emea') || loc.includes('apac')) return false;
                // Accept generic "Remote" as US (most US companies)
                return true;
            }
            return US_LOCATIONS.some(usLoc => loc.includes(usLoc));
        }

        // Filter jobs by location (US only)
        function filterByLocation(jobs, location) {
            // First filter to US-only
            let usJobs = jobs.filter(job => isUSLocation(job.location));

            if (!location || location === 'us') return usJobs;

            return usJobs.filter(job => {
                const loc = job.location.toLowerCase();
                if (location === 'remote') return loc.includes('remote');
                if (location === 'sanjose') {
                    return loc.includes('san jose') || loc.includes('milpitas') || loc.includes('santa clara') ||
                           loc.includes('sunnyvale') || loc.includes('cupertino') || loc.includes('fremont') ||
                           loc.includes('mountain view') || loc.includes('palo alto');
                }
                if (location === 'bayarea') {
                    return loc.includes('san francisco') || loc.includes('san jose') || loc.includes('milpitas') ||
                           loc.includes('sunnyvale') || loc.includes('mountain view') || loc.includes('palo alto') ||
                           loc.includes('cupertino') || loc.includes('santa clara') || loc.includes('fremont') ||
                           loc.includes('oakland') || loc.includes('berkeley') || loc.includes('bay area') ||
                           loc.includes('california') || loc.includes(', ca');
                }
                if (location === 'texas') {
                    return loc.includes('texas') || loc.includes(', tx') || loc.includes('austin') ||
                           loc.includes('dallas') || loc.includes('houston') || loc.includes('san antonio');
                }
                if (location === 'florida') {
                    return loc.includes('florida') || loc.includes(', fl') || loc.includes('miami') ||
                           loc.includes('tampa') || loc.includes('orlando') || loc.includes('jacksonville');
                }
                if (location === 'nc') {
                    return loc.includes('north carolina') || loc.includes(', nc') || loc.includes('raleigh') ||
                           loc.includes('charlotte') || loc.includes('durham') || loc.includes('research triangle');
                }
                if (location === 'ny') {
                    return loc.includes('new york') || loc.includes('nyc') || loc.includes(', ny') ||
                           loc.includes('brooklyn') || loc.includes('manhattan');
                }
                if (location === 'seattle') {
                    return loc.includes('seattle') || loc.includes('washington') || loc.includes(', wa') ||
                           loc.includes('bellevue') || loc.includes('redmond');
                }
                return true;
            });
        }

        // Search jobs
        function searchJobs(jobs, query) {
            if (!query) return jobs;
            const terms = query.toLowerCase().split(' ');
            return jobs.filter(job => {
                const searchText = `${job.title} ${job.company} ${job.department} ${job.location} ${job.description}`.toLowerCase();
                return terms.every(term => searchText.includes(term));
            });
        }

        // Render company tags
        function renderCompanyTags() {
            const companyCounts = {};
            // Only count US jobs
            allJobs.filter(job => isUSLocation(job.location)).forEach(job => {
                companyCounts[job.company] = (companyCounts[job.company] || 0) + 1;
            });

            const sortedCompanies = Object.entries(companyCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 15);

            const tagsHtml = sortedCompanies.map(([company, count]) => `
                <div class="company-tag ${activeCompanyFilter === company ? 'active' : ''}" data-company="${company}">
                    ${company}
                    <span class="count">${count}</span>
                </div>
            `).join('');

            document.getElementById('company-tags').innerHTML = tagsHtml;

            // Add click handlers
            document.querySelectorAll('.company-tag').forEach(tag => {
                tag.addEventListener('click', () => {
                    const company = tag.dataset.company;
                    activeCompanyFilter = activeCompanyFilter === company ? null : company;
                    applyFilters();
                    renderCompanyTags();
                });
            });
        }

        // Render jobs table
        function renderJobs() {
            const tbody = document.getElementById('jobs-tbody');
            const start = (currentPage - 1) * jobsPerPage;
            const end = start + jobsPerPage;
            const pageJobs = filteredJobs.slice(start, end);

            if (pageJobs.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="10">
                            <div class="empty-state">
                                <i class="fas fa-search"></i>
                                <h3>No jobs found</h3>
                                <p>Try adjusting your search or filters (including ATS match threshold)</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = pageJobs.map(job => {
                const isRemote = job.location.toLowerCase().includes('remote');
                const daysAgo = Math.floor((new Date() - job.postedDate) / (1000 * 60 * 60 * 24));
                const dateClass = daysAgo <= 1 ? 'date-new' : 'date-text';
                const dateText = daysAgo === 0 ? 'Today' : daysAgo === 1 ? 'Yesterday' : `${daysAgo} days ago`;
                const isExcluded = isJobExcluded(String(job.id));

                return `
                    <tr class="${isExcluded ? 'excluded-row' : ''}">
                        <td class="col-role">
                            <span class="role-title">${escapeHtml(job.title)}</span>
                            ${job.department ? `<span class="role-dept">${escapeHtml(job.department)}</span>` : ''}
                        </td>
                        <td class="col-description" onclick="showJDModal('${job.id}')" title="Click to view full job description">
                            <span class="description-text">${generateJobSummary(job)}</span>
                        </td>
                        <td class="col-date">
                            <span class="${dateClass}">${dateText}</span>
                        </td>
                        <td class="col-salary">
                            ${formatSalary(job.salary)}
                        </td>
                        <td class="col-company">
                            <span class="company-name">
                                <img src="${job.companyLogo}" alt="${job.company}" class="company-logo" onerror="this.style.display='none'">
                                ${escapeHtml(job.company)}
                            </span>
                        </td>
                        <td class="col-location">
                            <span class="location-text">
                                <i class="fas fa-map-marker-alt"></i>
                                ${escapeHtml(job.location.substring(0, 30))}
                            </span>
                            ${isRemote ? '<span class="remote-badge">Remote</span>' : ''}
                        </td>
                        <td class="col-distance">
                            <span class="distance-badge priority-${getDistancePriority(job.location)}">${getDistanceLabel(getDistancePriority(job.location))}</span>
                        </td>
                        <td class="col-worktype">
                            <span class="worktype-badge ${(job.workType || 'onsite').toLowerCase()}">${job.workType || 'Onsite'}</span>
                        </td>
                        <td class="col-apply">
                            <div class="apply-actions">
                                <a href="${job.url}" target="_blank" class="apply-btn">
                                    Apply <i class="fas fa-external-link-alt"></i>
                                </a>
                                <button class="applied-btn" onclick="markAsApplied('${job.id}')" title="Mark as applied (moves to Applied page)">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="cover-letter-btn" onclick="downloadCoverLetter(jobsMap['${job.id}'])" title="Download Cover Letter">
                                    <i class="fas fa-file-alt"></i>
                                </button>
                                <button class="resume-btn" onclick="downloadResume(jobsMap['${job.id}'])" title="Download Tailored Resume">
                                    <i class="fas fa-file-download"></i>
                                </button>
                                ${isExcluded ? `
                                <button class="restore-btn" onclick="restoreJob('${job.id}')" title="Restore this job">
                                    <i class="fas fa-undo"></i>
                                </button>
                                ` : `
                                <button class="exclude-btn" onclick="excludeJob('${job.id}')" title="Hide this job">
                                    <i class="fas fa-times"></i>
                                </button>
                                `}
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');

            // Store jobs in map for cover letter access
            pageJobs.forEach(job => {
                jobsMap[job.id] = job;
            });

            renderPagination();
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
            const pagination = document.getElementById('pagination');

            if (totalPages <= 1) {
                pagination.style.display = 'none';
                return;
            }

            pagination.style.display = 'flex';

            document.getElementById('showing-start').textContent = (currentPage - 1) * jobsPerPage + 1;
            document.getElementById('showing-end').textContent = Math.min(currentPage * jobsPerPage, filteredJobs.length);
            document.getElementById('showing-total').textContent = filteredJobs.length;

            let btnsHtml = `<button class="page-btn" ${currentPage === 1 ? 'disabled' : ''} onclick="changePage(${currentPage - 1})">Prev</button>`;

            for (let i = 1; i <= Math.min(5, totalPages); i++) {
                btnsHtml += `<button class="page-btn ${currentPage === i ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }

            if (totalPages > 5) {
                btnsHtml += `<span style="padding: 0.5rem;">...</span>`;
                btnsHtml += `<button class="page-btn ${currentPage === totalPages ? 'active' : ''}" onclick="changePage(${totalPages})">${totalPages}</button>`;
            }

            btnsHtml += `<button class="page-btn" ${currentPage === totalPages ? 'disabled' : ''} onclick="changePage(${currentPage + 1})">Next</button>`;

            document.getElementById('pagination-btns').innerHTML = btnsHtml;
        }

        // Change page
        function changePage(page) {
            currentPage = page;
            renderJobs();
            window.scrollTo({ top: document.querySelector('.jobs-table-wrapper').offsetTop - 100, behavior: 'smooth' });
        }

        // Apply all filters
        function applyFilters() {
            const searchQuery = document.getElementById('search-input').value;
            const locationFilter = document.getElementById('location-filter').value;
            const dateFilter = document.getElementById('date-filter').value;

            filteredJobs = [...allJobs];

            // Apply company filter
            if (activeCompanyFilter) {
                filteredJobs = filteredJobs.filter(job => job.company === activeCompanyFilter);
            }

            // Apply date filter
            filteredJobs = filterByDate(filteredJobs, dateFilter);

            // Apply location filter
            filteredJobs = filterByLocation(filteredJobs, locationFilter);

            // Apply search
            filteredJobs = searchJobs(filteredJobs, searchQuery);

            // Apply excluded jobs filter
            const excludedIds = getExcludedJobs();
            if (showExcludedJobs) {
                // Show only excluded jobs
                filteredJobs = filteredJobs.filter(job => excludedIds.includes(String(job.id)));
            } else {
                // Hide excluded jobs
                filteredJobs = filteredJobs.filter(job => !excludedIds.includes(String(job.id)));
            }

            // Hide applied jobs (they appear on the Applied page)
            const appliedIds = getAppliedJobs();
            filteredJobs = filteredJobs.filter(job => !appliedIds.includes(String(job.id)));

            // Sort by distance from San Jose (closest first), then by date (newest first)
            filteredJobs.sort((a, b) => {
                // First by distance from San Jose (closest first)
                const distA = getDistancePriority(a.location);
                const distB = getDistancePriority(b.location);
                if (distA !== distB) return distA - distB;

                // Then by date (newest first)
                return b.postedDate - a.postedDate;
            });

            currentPage = 1;
            updateStats();
            renderJobs();
        }

        // Update stats
        function updateStats() {
            document.getElementById('total-jobs').textContent = filteredJobs.length;
            const companies = new Set(filteredJobs.map(j => j.company));
            document.getElementById('total-companies').textContent = companies.size;
            document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
        }

        // Fetch all jobs with batching to avoid overwhelming APIs
        async function fetchAllJobs() {
            const tbody = document.getElementById('jobs-tbody');
            tbody.innerHTML = `
                <tr class="loading-row">
                    <td colspan="7">
                        <span class="loading-spinner"></span>
                        Loading jobs from ${COMPANIES.length} company career portals...
                    </td>
                </tr>
            `;

            document.getElementById('refresh-btn').classList.add('loading');

            try {
                // Batch requests to avoid rate limiting (20 at a time)
                const batchSize = 20;
                let allResults = [];

                for (let i = 0; i < COMPANIES.length; i += batchSize) {
                    const batch = COMPANIES.slice(i, i + batchSize);
                    const batchPromises = batch.map(company => {
                        if (company.type === 'greenhouse') {
                            return fetchGreenhouseJobs(company);
                        } else if (company.type === 'ashby') {
                            return fetchAshbyJobs(company);
                        } else {
                            return fetchLeverJobs(company);
                        }
                    });

                    const batchResults = await Promise.allSettled(batchPromises);
                    allResults = allResults.concat(batchResults);

                    // Small delay between batches
                    if (i + batchSize < COMPANIES.length) {
                        await new Promise(r => setTimeout(r, 100));
                    }
                }

                // Get all raw jobs first
                const rawJobs = allResults
                    .filter(r => r.status === 'fulfilled')
                    .flatMap(r => r.value || [])
                    .filter(job => job);

                // Debug: Log raw job titles to understand what's being filtered
                console.log(`ðŸ“¥ Total raw jobs fetched: ${rawJobs.length}`);

                // Filter to relevant jobs first (based on title)
                let relevantJobs = rawJobs.filter(job => isRelevantJob(job));

                console.log(`ðŸ“¥ Total raw jobs: ${rawJobs.length}`);
                console.log(`ðŸŽ¯ Relevant by title: ${relevantJobs.length}`);

                // Now fetch FULL job details for each relevant job
                tbody.innerHTML = `
                    <tr class="loading-row">
                        <td colspan="7">
                            <span class="loading-spinner"></span>
                            Fetching full job details for ${relevantJobs.length} positions...
                        </td>
                    </tr>
                `;

                // Batch fetch individual job details (10 at a time to avoid rate limiting)
                const detailBatchSize = 10;
                const jobsWithDetails = [];

                for (let i = 0; i < relevantJobs.length; i += detailBatchSize) {
                    const batch = relevantJobs.slice(i, i + detailBatchSize);
                    const detailPromises = batch.map(job => fetchJobDetails(job));
                    const detailedBatch = await Promise.allSettled(detailPromises);

                    detailedBatch.forEach(result => {
                        if (result.status === 'fulfilled' && result.value) {
                            jobsWithDetails.push(result.value);
                        }
                    });

                    // Update progress
                    const progress = Math.min(i + detailBatchSize, relevantJobs.length);
                    tbody.innerHTML = `
                        <tr class="loading-row">
                            <td colspan="7">
                                <span class="loading-spinner"></span>
                                Fetching job details: ${progress}/${relevantJobs.length} complete...
                            </td>
                        </tr>
                    `;

                    // Small delay between batches
                    if (i + detailBatchSize < relevantJobs.length) {
                        await new Promise(r => setTimeout(r, 200));
                    }
                }

                allJobs = jobsWithDetails;
                console.log(`âœ… Jobs with full details: ${allJobs.length}`);

                // Log salary extraction stats
                const withSalary = allJobs.filter(j => j.salary);
                console.log(`ðŸ’° Jobs with salary: ${withSalary.length}/${allJobs.length}`);

            } catch (e) {
                console.error('Error fetching jobs:', e);
                allJobs = [];
            }

            document.getElementById('refresh-btn').classList.remove('loading');

            // Update the fresh jobs ticker with newest jobs
            updateFreshJobsTicker();

            renderCompanyTags();
            applyFilters();
        }

        // Update the scrolling ticker with jobs from last 6 hours (US only)
        function updateFreshJobsTicker() {
            const ticker = document.getElementById('freshJobsTicker');
            if (!ticker || allJobs.length === 0) {
                ticker.innerHTML = '<span class="ticker-item">No fresh jobs found. Check back later!</span>';
                return;
            }

            // Filter to only US jobs posted in the last 6 hours
            const sixHoursAgo = new Date(Date.now() - 6 * 60 * 60 * 1000);
            const freshJobs = [...allJobs]
                .filter(job => isUSLocation(job.location)) // US only!
                .filter(job => job.postedDate >= sixHoursAgo)
                .sort((a, b) => b.postedDate - a.postedDate);

            // If no jobs in last 6 hours, show message
            if (freshJobs.length === 0) {
                ticker.innerHTML = '<span class="ticker-item">No jobs posted in the last 6 hours. Showing jobs from selected date range below.</span>';
                return;
            }

            // Format time ago
            function timeAgo(date) {
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / (1000 * 60));
                const diffHours = Math.floor(diffMs / (1000 * 60 * 60));

                if (diffMins < 5) return 'Just now';
                if (diffMins < 60) return `${diffMins}m ago`;
                return `${diffHours}h ago`;
            }

            // Create ticker items (duplicate for seamless loop)
            const tickerItems = freshJobs.map(job => `
                <span class="ticker-item">
                    <a href="${job.url}" target="_blank">
                        <span class="company">${job.company}</span>
                        <span class="title">${job.title}</span>
                        <span class="time">${timeAgo(job.postedDate)}</span>
                    </a>
                </span>
            `).join('');

            // Duplicate content for seamless infinite scroll
            ticker.innerHTML = tickerItems + tickerItems;
        }

        // Event listeners
        document.getElementById('search-input').addEventListener('input', debounce(applyFilters, 300));
        document.getElementById('location-filter').addEventListener('change', applyFilters);
        document.getElementById('date-filter').addEventListener('change', applyFilters);
        document.getElementById('refresh-btn').addEventListener('click', fetchAllJobs);
        document.getElementById('excluded-toggle').addEventListener('click', toggleExcludedJobs);

        // Backup/restore event listeners
        document.getElementById('export-data-btn').addEventListener('click', exportJobData);
        document.getElementById('import-data-btn').addEventListener('click', () => {
            document.getElementById('import-file-input').click();
        });
        document.getElementById('import-file-input').addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                importJobData(e.target.files[0]);
                e.target.value = ''; // Reset for next import
            }
        });

        // Initialize counts on page load
        updateExcludedCount();
        updateAppliedCount();

        // Sortable columns
        document.querySelectorAll('.sortable').forEach(th => {
            th.addEventListener('click', () => {
                const sortKey = th.dataset.sort;
                filteredJobs.sort((a, b) => {
                    if (sortKey === 'distance') {
                        const distA = getDistancePriority(a.location);
                        const distB = getDistancePriority(b.location);
                        if (distA !== distB) return distA - distB;
                        return b.postedDate - a.postedDate;
                    }
                    if (sortKey === 'date') return b.postedDate - a.postedDate;
                    if (sortKey === 'salary') {
                        // Sort by salary (highest first), jobs without salary go to end
                        const salaryA = a.salary?.high || a.salary?.low || 0;
                        const salaryB = b.salary?.high || b.salary?.low || 0;
                        return salaryB - salaryA;
                    }
                    if (sortKey === 'title') return a.title.localeCompare(b.title);
                    if (sortKey === 'company') return a.company.localeCompare(b.company);
                    return 0;
                });
                renderJobs();
            });
        });

        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // ========================================
        // DOCUMENT MANAGER
        // ========================================

        let documentsManifest = null;
        let manifestSha = null; // Store the SHA for updates

        // GitHub Configuration
        const GITHUB_OWNER = 'schundu007';
        const GITHUB_REPO = 'chundu';
        const MANIFEST_PATH = 'assets/resume/manifest.json';

        // GitHub Token Functions
        function getGithubToken() {
            return localStorage.getItem('github_token') || '';
        }

        function saveGithubToken() {
            const inputEl = document.getElementById('github-token');
            const token = inputEl.value.trim();

            // Only save if a new token is entered (not empty)
            if (token && token.startsWith('ghp_')) {
                localStorage.setItem('github_token', token);
                updateTokenStatus();
                alert('GitHub token saved! It will persist across sessions.');
            } else if (token) {
                alert('Invalid token format. GitHub tokens start with "ghp_"');
            }
            // If empty, do nothing (keep existing token)
        }

        function updateTokenStatus() {
            const token = getGithubToken();
            const statusEl = document.getElementById('token-status');
            const inputEl = document.getElementById('github-token');

            if (token) {
                statusEl.textContent = 'Configured';
                statusEl.className = 'token-status configured';
                // Clear input and show placeholder instead of masked token
                if (inputEl) {
                    inputEl.value = '';
                    inputEl.placeholder = 'Token saved (' + token.substring(0, 4) + '...' + token.substring(token.length - 4) + ')';
                }
            } else {
                statusEl.textContent = 'Not Configured';
                statusEl.className = 'token-status not-configured';
                if (inputEl) inputEl.placeholder = 'ghp_xxxxxxxxxxxxxxxxxxxx';
            }
        }

        // Featured Companies Toggle
        function toggleFeaturedCompanies() {
            const content = document.getElementById('featured-companies-content');
            const chevron = document.getElementById('featured-chevron');
            if (content.style.display === 'none' || !content.style.display) {
                content.style.display = 'flex';
                content.style.flexWrap = 'wrap';
                content.style.gap = '0.5rem';
                chevron.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                chevron.style.transform = 'rotate(0deg)';
            }
        }

        function toggleGithubSettings() {
            const content = document.getElementById('github-settings-content');
            const chevron = document.getElementById('settings-chevron');
            content.classList.toggle('show');
            chevron.style.transform = content.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        // Upload Section Functions
        let selectedFile = null;
        let selectedFileBase64 = null;

        function toggleUploadSection() {
            const content = document.getElementById('upload-section-content');
            const chevron = document.getElementById('upload-chevron');
            content.classList.toggle('show');
            chevron.style.transform = content.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        function handleFileSelect(input) {
            const file = input.files[0];
            if (!file) {
                selectedFile = null;
                selectedFileBase64 = null;
                document.getElementById('btn-upload').disabled = true;
                return;
            }

            // Check file type
            const validTypes = ['.pdf', '.doc', '.docx'];
            const fileName = file.name.toLowerCase();
            const isValid = validTypes.some(type => fileName.endsWith(type));

            if (!isValid) {
                alert('Please select a PDF, DOC, or DOCX file.');
                input.value = '';
                return;
            }

            selectedFile = file;

            // Auto-generate display name from filename
            const nameInput = document.getElementById('upload-name');
            if (!nameInput.value) {
                // Remove extension and format nicely
                let displayName = file.name.replace(/\.(pdf|docx?)/i, '');
                displayName = displayName.replace(/[_-]/g, ' ');
                displayName = displayName.replace(/\b\w/g, c => c.toUpperCase());
                nameInput.value = displayName;
            }

            // Read file as base64
            const reader = new FileReader();
            reader.onload = function(e) {
                // Remove the data:...;base64, prefix
                const base64 = e.target.result.split(',')[1];
                selectedFileBase64 = base64;
                document.getElementById('btn-upload').disabled = false;
            };
            reader.readAsDataURL(file);
        }

        function showUploadStatus(message, type) {
            const statusEl = document.getElementById('upload-status');
            statusEl.className = 'upload-status show ' + type;

            if (type === 'error') {
                statusEl.innerHTML = `<i class="fas fa-exclamation-circle"></i><span>${message}</span>`;
            } else if (type === 'success') {
                statusEl.innerHTML = `<i class="fas fa-check-circle"></i><span>${message}</span>`;
            } else {
                statusEl.innerHTML = `<i class="fas fa-spinner fa-spin"></i><span>${message}</span>`;
            }
        }

        function hideUploadStatus() {
            document.getElementById('upload-status').className = 'upload-status';
        }

        async function uploadDocument() {
            const token = getGithubToken();
            if (!token) {
                alert('Please configure your GitHub token first in the "GitHub Auto-Sync Settings" above.');
                return;
            }

            if (!selectedFile || !selectedFileBase64) {
                alert('Please select a file to upload.');
                return;
            }

            const displayName = document.getElementById('upload-name').value.trim();
            if (!displayName) {
                alert('Please enter a display name for the document.');
                return;
            }

            const docType = document.getElementById('upload-type').value;
            const fileName = selectedFile.name;

            // Disable upload button
            document.getElementById('btn-upload').disabled = true;
            showUploadStatus('Uploading file to GitHub...', 'loading');

            try {
                // Step 1: Upload the file to GitHub
                const filePath = `assets/resume/${fileName}`;

                // Check if file already exists to get its SHA
                let existingSha = null;
                try {
                    const checkResponse = await fetch(
                        `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                        {
                            headers: {
                                'Authorization': `token ${token}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    if (checkResponse.ok) {
                        const existing = await checkResponse.json();
                        existingSha = existing.sha;
                    }
                } catch (e) {
                    // File doesn't exist, that's fine
                }

                // Upload the file
                const uploadBody = {
                    message: `Add ${docType === 'resume' ? 'resume' : 'cover letter'}: ${displayName}`,
                    content: selectedFileBase64
                };
                if (existingSha) {
                    uploadBody.sha = existingSha;
                }

                const uploadResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(uploadBody)
                    }
                );

                if (!uploadResponse.ok) {
                    const error = await uploadResponse.json();
                    throw new Error(error.message || 'Failed to upload file');
                }

                showUploadStatus('Updating manifest...', 'loading');

                // Step 2: Add to manifest
                const newEntry = {
                    name: displayName,
                    file: fileName,
                    active: false
                };

                if (docType === 'resume') {
                    // Check if already exists
                    const exists = documentsManifest.resumes.some(r => r.file === fileName);
                    if (!exists) {
                        documentsManifest.resumes.push(newEntry);
                    } else {
                        // Update existing entry
                        const idx = documentsManifest.resumes.findIndex(r => r.file === fileName);
                        documentsManifest.resumes[idx].name = displayName;
                    }
                } else {
                    // Check if already exists
                    const exists = documentsManifest.coverLetters.some(c => c.file === fileName);
                    if (!exists) {
                        documentsManifest.coverLetters.push(newEntry);
                    } else {
                        // Update existing entry
                        const idx = documentsManifest.coverLetters.findIndex(c => c.file === fileName);
                        documentsManifest.coverLetters[idx].name = displayName;
                    }
                }

                // Step 3: Update manifest on GitHub
                const manifestResult = await updateManifestOnGitHub();
                if (!manifestResult.success) {
                    throw new Error('File uploaded but manifest update failed: ' + manifestResult.message);
                }

                showUploadStatus('Upload complete! Changes will be live in ~1 minute.', 'success');

                // Reset form
                document.getElementById('upload-file').value = '';
                document.getElementById('upload-name').value = '';
                selectedFile = null;
                selectedFileBase64 = null;

                // Refresh document list
                renderDocumentManager();

                // Hide status after 5 seconds
                setTimeout(hideUploadStatus, 5000);

            } catch (error) {
                console.error('Upload error:', error);
                showUploadStatus('Error: ' + error.message, 'error');
            } finally {
                document.getElementById('btn-upload').disabled = false;
            }
        }

        // Delete Document Functions
        let pendingDelete = null;

        function confirmDelete(type, filename, displayName) {
            pendingDelete = { type, filename, displayName };

            const overlay = document.createElement('div');
            overlay.className = 'delete-confirm-overlay';
            overlay.id = 'delete-confirm-overlay';
            overlay.innerHTML = `
                <div class="delete-confirm-dialog">
                    <h3><i class="fas fa-exclamation-triangle"></i> Delete Document</h3>
                    <p>Are you sure you want to permanently delete this ${type === 'resume' ? 'resume' : 'cover letter'}?</p>
                    <div class="filename">${displayName}<br><small>${filename}</small></div>
                    <p style="color: #dc2626; font-weight: 600;">This action cannot be undone!</p>
                    <div class="delete-confirm-buttons">
                        <button class="btn-cancel" onclick="cancelDelete()">Cancel</button>
                        <button class="btn-confirm-delete" onclick="executeDelete()">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        function cancelDelete() {
            pendingDelete = null;
            const overlay = document.getElementById('delete-confirm-overlay');
            if (overlay) overlay.remove();
        }

        async function executeDelete() {
            if (!pendingDelete) return;

            const { type, filename, displayName } = pendingDelete;
            const overlay = document.getElementById('delete-confirm-overlay');

            // Update dialog to show loading
            overlay.querySelector('.delete-confirm-dialog').innerHTML = `
                <div style="padding: 1rem;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #dc2626;"></i>
                    <p style="margin-top: 1rem; color: #4b5563;">Deleting from GitHub...</p>
                </div>
            `;

            const token = getGithubToken();
            if (!token) {
                alert('Please configure your GitHub token first.');
                cancelDelete();
                return;
            }

            try {
                // Step 1: Try to get the file SHA from GitHub
                const filePath = `assets/resume/${filename}`;
                let fileExistsOnGitHub = false;

                const getResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                    {
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (getResponse.ok) {
                    const fileData = await getResponse.json();
                    fileExistsOnGitHub = true;

                    // Step 2: Delete the file from GitHub
                    const deleteResponse = await fetch(
                        `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                        {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `token ${token}`,
                                'Accept': 'application/vnd.github.v3+json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                message: `Delete ${type === 'resume' ? 'resume' : 'cover letter'}: ${displayName}`,
                                sha: fileData.sha
                            })
                        }
                    );

                    if (!deleteResponse.ok) {
                        const error = await deleteResponse.json();
                        throw new Error(error.message || 'Failed to delete file');
                    }
                }

                // Step 3: Remove from manifest (even if file wasn't on GitHub)
                if (type === 'resume') {
                    documentsManifest.resumes = documentsManifest.resumes.filter(r => r.file !== filename);
                } else {
                    documentsManifest.coverLetters = documentsManifest.coverLetters.filter(c => c.file !== filename);
                }

                // Step 4: Update manifest on GitHub
                const manifestResult = await updateManifestOnGitHub();
                if (!manifestResult.success) {
                    console.warn('File deleted but manifest update failed:', manifestResult.message);
                }

                // Success - close overlay and refresh
                cancelDelete();
                renderDocumentManager();

                if (fileExistsOnGitHub) {
                    alert('Document deleted successfully! Changes will be live in ~1 minute.');
                } else {
                    alert('Entry removed from manifest. (File was not found on GitHub - may have been deleted already)');
                }

            } catch (error) {
                console.error('Delete error:', error);
                cancelDelete();
                alert('Error deleting document: ' + error.message);
            }
        }

        // GitHub API: Update manifest.json
        async function updateManifestOnGitHub() {
            const token = getGithubToken();
            if (!token) {
                return { success: false, message: 'GitHub token not configured' };
            }

            try {
                // First, get the current file to get its SHA
                const getResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${MANIFEST_PATH}`,
                    {
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (!getResponse.ok) {
                    throw new Error('Failed to fetch current manifest');
                }

                const fileData = await getResponse.json();
                manifestSha = fileData.sha;

                // Prepare the new content
                const newContent = JSON.stringify(documentsManifest, null, 2) + '\n';
                const encodedContent = btoa(unescape(encodeURIComponent(newContent)));

                // Update the file
                const updateResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${MANIFEST_PATH}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Update active documents via Document Manager',
                            content: encodedContent,
                            sha: manifestSha
                        })
                    }
                );

                if (!updateResponse.ok) {
                    const error = await updateResponse.json();
                    throw new Error(error.message || 'Failed to update manifest');
                }

                return { success: true, message: 'Manifest updated on GitHub!' };
            } catch (error) {
                console.error('GitHub API Error:', error);
                return { success: false, message: error.message };
            }
        }

        async function loadDocumentManifest() {
            try {
                const response = await fetch('../assets/resume/manifest.json');
                documentsManifest = await response.json();
                renderDocumentManager();
            } catch (error) {
                console.error('Error loading document manifest:', error);
                document.getElementById('doc-manager-content').innerHTML = `
                    <p style="color: #dc2626; text-align: center;">
                        <i class="fas fa-exclamation-triangle"></i> Error loading documents
                    </p>
                `;
            }
        }

        function renderDocumentManager() {
            const container = document.getElementById('doc-manager-content');
            if (!documentsManifest) return;

            let html = `
                <!-- Resumes Section -->
                <h4 style="margin: 0 0 1rem; color: var(--dark); font-size: 1rem;">
                    <i class="fas fa-file-alt" style="color: var(--primary); margin-right: 0.5rem;"></i>
                    Resumes <span style="color: var(--text-muted); font-weight: 400;">(${documentsManifest.resumes.length} available)</span>
                </h4>
                <div style="display: grid; gap: 0.5rem; margin-bottom: 1.5rem;">
            `;

            documentsManifest.resumes.forEach(resume => {
                const isActive = resume.active;
                html += `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem 1rem;
                         background: ${isActive ? 'rgba(22, 163, 74, 0.05)' : 'var(--light)'};
                         border: 1px solid ${isActive ? '#16a34a' : 'var(--border)'};
                         border-radius: 8px;">
                        <i class="fas ${isActive ? 'fa-check-circle' : 'fa-file-alt'}"
                           style="color: ${isActive ? '#16a34a' : 'var(--primary)'}; font-size: 1.25rem;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--dark); font-size: 0.9rem;">${resume.name}</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">${resume.file}</div>
                        </div>
                        <a href="../assets/resume/${resume.file}" target="_blank"
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-eye"></i> View
                        </a>
                        <a href="../assets/resume/${resume.file}" download
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-download"></i>
                        </a>
                        ${isActive ? `
                            <span style="background: #16a34a; color: white; padding: 0.25rem 0.6rem; border-radius: 50px; font-size: 0.7rem; font-weight: 600;">
                                ACTIVE
                            </span>
                        ` : `
                            <button onclick="setActiveResume('${resume.file}')"
                                    style="background: var(--primary); color: white; border: none; padding: 0.4rem 0.75rem; border-radius: 6px; font-size: 0.75rem; cursor: pointer;">
                                Set Active
                            </button>
                        `}
                        <button class="btn-delete" onclick="confirmDelete('resume', '${resume.file}', '${resume.name.replace(/'/g, "\\'")}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
            });

            html += `
                </div>

                <!-- Cover Letters Section -->
                <h4 style="margin: 0 0 1rem; color: var(--dark); font-size: 1rem;">
                    <i class="fas fa-envelope-open-text" style="color: #a855f7; margin-right: 0.5rem;"></i>
                    Cover Letters <span style="color: var(--text-muted); font-weight: 400;">(${documentsManifest.coverLetters.length} available)</span>
                </h4>
                <div style="display: grid; gap: 0.5rem;">
            `;

            documentsManifest.coverLetters.forEach(letter => {
                const isActive = letter.active;
                html += `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem 1rem;
                         background: ${isActive ? 'rgba(168, 85, 247, 0.05)' : 'var(--light)'};
                         border: 1px solid ${isActive ? '#a855f7' : 'var(--border)'};
                         border-radius: 8px;">
                        <i class="fas ${isActive ? 'fa-check-circle' : 'fa-envelope-open-text'}"
                           style="color: ${isActive ? '#a855f7' : '#a855f7'}; font-size: 1.25rem;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--dark); font-size: 0.9rem;">${letter.name}</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">${letter.file}</div>
                        </div>
                        <a href="../assets/resume/${letter.file}" target="_blank"
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-eye"></i> View
                        </a>
                        <a href="../assets/resume/${letter.file}" download
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-download"></i>
                        </a>
                        ${isActive ? `
                            <span style="background: #a855f7; color: white; padding: 0.25rem 0.6rem; border-radius: 50px; font-size: 0.7rem; font-weight: 600;">
                                ACTIVE
                            </span>
                        ` : `
                            <button onclick="setActiveCoverLetter('${letter.file}')"
                                    style="background: #a855f7; color: white; border: none; padding: 0.4rem 0.75rem; border-radius: 6px; font-size: 0.75rem; cursor: pointer;">
                                Set Active
                            </button>
                        `}
                        <button class="btn-delete" onclick="confirmDelete('coverLetter', '${letter.file}', '${letter.name.replace(/'/g, "\\'")}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        async function setActiveResume(filename) {
            // Update manifest in memory
            documentsManifest.resumes.forEach(r => r.active = (r.file === filename));
            renderDocumentManager();

            // Show updating indicator
            const container = document.getElementById('doc-manager-content');
            const indicator = document.createElement('div');
            indicator.className = 'updating-indicator';
            indicator.innerHTML = '<i class="fas fa-sync-alt"></i> Syncing to GitHub...';
            indicator.style.marginTop = '1rem';
            container.appendChild(indicator);

            // Try to update on GitHub
            const result = await updateManifestOnGitHub();
            indicator.remove();

            if (result.success) {
                alert('Active resume updated and synced to GitHub! Changes will be live in ~1 minute.');
            } else if (result.message === 'GitHub token not configured') {
                alert('Active resume updated locally. To auto-sync, configure your GitHub token in settings above.');
            } else {
                alert('Active resume updated locally. GitHub sync failed: ' + result.message);
            }
        }

        async function setActiveCoverLetter(filename) {
            // Update manifest in memory
            documentsManifest.coverLetters.forEach(c => c.active = (c.file === filename));
            renderDocumentManager();

            // Show updating indicator
            const container = document.getElementById('doc-manager-content');
            const indicator = document.createElement('div');
            indicator.className = 'updating-indicator';
            indicator.innerHTML = '<i class="fas fa-sync-alt"></i> Syncing to GitHub...';
            indicator.style.marginTop = '1rem';
            container.appendChild(indicator);

            // Try to update on GitHub
            const result = await updateManifestOnGitHub();
            indicator.remove();

            if (result.success) {
                alert('Active cover letter updated and synced to GitHub! Changes will be live in ~1 minute.');
            } else if (result.message === 'GitHub token not configured') {
                alert('Active cover letter updated locally. To auto-sync, configure your GitHub token in settings above.');
            } else {
                alert('Active cover letter updated locally. GitHub sync failed: ' + result.message);
            }
        }

        // Scroll to Document Manager
        function scrollToDocManager() {
            const docManager = document.getElementById('document-manager');
            if (docManager) {
                docManager.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                console.error('Document Manager section not found!');
            }
        }

        // Load document manager and initialize token status
        loadDocumentManifest();
        updateTokenStatus();

        // Initialize - load jobs
        fetchAllJobs();
    </script>
    <!-- Neural Network Background -->
    <script src="../assets/js/neural-bg.js"></script>
</body>
</html>
