<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GGNQHMGCLH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-GGNQHMGCLH');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Listings | Sudhakar Chundu</title>
    <meta name="description" content="Live US job listings from top tech companies - Cloud Architect, Platform Engineering, DevOps & SRE roles. Bay Area, Texas, Florida, North Carolina.">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Theme JS (load early to prevent flash) -->
    <script src="../assets/js/theme.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/style.css">
    <!-- docx library for Word document generation -->
    <script src="https://unpkg.com/docx@8.5.0/build/index.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <style>
        /* Dark Theme Variables for Jobs Page */
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #111118;
            --bg-tertiary: #18181f;
            --bg-card: rgba(255, 255, 255, 0.03);
            --text-primary: #ffffff;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --accent-blue: #3b82f6;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-border-hover: rgba(255, 255, 255, 0.15);
            --white: #ffffff;
            --light: #18181f;
            --light-alt: #1f1f28;
            --dark: #ffffff;
            --border: rgba(255, 255, 255, 0.1);
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: rgba(59, 130, 246, 0.2);
            --radius: 8px;
            --radius-lg: 12px;
        }

        body {
            background: var(--bg-primary) !important;
            color: var(--text-primary);
        }

        /* Override shared CSS for full-width jobs page */
        .main-content {
            max-width: 100%;
            padding: 0;
            background: var(--bg-primary);
        }

        .page-header {
            border-radius: 0;
            margin-bottom: 0;
            background: var(--bg-secondary);
            border: none;
        }

        footer {
            max-width: 100%;
            border-radius: 0;
            margin: 0;
            background: var(--bg-secondary);
        }

        /* Fresh Jobs Ticker */
        .fresh-jobs-ticker {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 12px 0;
            overflow: hidden;
            position: relative;
            border-bottom: 2px solid var(--primary);
        }

        .ticker-label {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            font-weight: 600;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 10;
            box-shadow: 3px 0 10px rgba(0,0,0,0.3);
        }

        .ticker-label i {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .ticker-wrapper {
            margin-left: 140px;
            overflow: hidden;
        }

        .ticker-content {
            display: flex;
            animation: scroll 60s linear infinite;
            width: max-content;
        }

        .ticker-content:hover {
            animation-play-state: paused;
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ticker-item {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 0 30px;
            white-space: nowrap;
            font-size: 0.9rem;
            border-right: 1px solid rgba(255,255,255,0.2);
        }

        .ticker-item:last-child {
            border-right: none;
        }

        .ticker-item .company {
            color: var(--primary);
            font-weight: 600;
        }

        .ticker-item .title {
            color: #fff;
        }

        .ticker-item .time {
            color: #4ade80;
            font-size: 0.75rem;
            background: rgba(74, 222, 128, 0.15);
            padding: 2px 8px;
            border-radius: 10px;
        }

        .ticker-item a {
            color: inherit;
            text-decoration: none;
        }

        .ticker-item a:hover .title {
            text-decoration: underline;
        }

        .jobs-section {
            padding: 40px 1.5rem 60px;
            background: var(--bg-primary);
        }

        .jobs-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .jobs-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .jobs-header h2 {
            font-size: 1.5rem;
            margin: 0;
        }

        .jobs-header h2 span {
            color: var(--primary);
        }

        .jobs-stats {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .jobs-stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .jobs-stat strong {
            color: var(--primary);
            font-family: var(--font-mono);
        }

        /* Filters */
        .filters-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            font-size: 0.9rem;
            font-family: var(--font-sans);
            transition: all 0.2s;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .search-box input::placeholder {
            color: var(--text-muted);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px var(--primary-light);
        }

        .search-box i {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
        }

        .filter-select {
            padding: 0.75rem 1rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            font-size: 0.85rem;
            font-family: var(--font-sans);
            background: var(--bg-secondary);
            color: var(--text-primary);
            cursor: pointer;
            min-width: 150px;
        }

        .filter-select option {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .refresh-btn {
            padding: 0.75rem 1.25rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: var(--radius);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .refresh-btn:hover {
            background: var(--primary-dark);
        }

        .refresh-btn.loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Jobs Table */
        .jobs-table-wrapper {
            overflow-x: auto;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            background: var(--bg-secondary);
        }

        .jobs-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .jobs-table th {
            background: var(--bg-tertiary);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text-primary);
            border-bottom: 1px solid var(--glass-border);
            white-space: nowrap;
            position: sticky;
            top: 0;
        }

        .jobs-table th.sortable {
            cursor: pointer;
            user-select: none;
        }

        .jobs-table th.sortable:hover {
            background: var(--light-alt);
        }

        .jobs-table th i {
            margin-left: 0.5rem;
            font-size: 0.7rem;
            opacity: 0.5;
        }

        .jobs-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--glass-border);
            vertical-align: top;
            color: var(--text-secondary);
        }

        .jobs-table tr:hover {
            background: var(--bg-tertiary);
        }

        .jobs-table tr:last-child td {
            border-bottom: none;
        }

        /* Column Styles */
        .col-role {
            min-width: 250px;
        }

        .col-company {
            min-width: 150px;
        }

        .col-location {
            min-width: 150px;
        }

        .col-distance {
            min-width: 130px;
            white-space: nowrap;
        }

        .col-date {
            min-width: 100px;
            white-space: nowrap;
        }

        .col-description {
            min-width: 300px;
            max-width: 400px;
        }

        .col-apply {
            min-width: 100px;
            text-align: center;
        }

        .role-title {
            font-weight: 600;
            color: var(--text-primary);
            display: block;
            margin-bottom: 0.25rem;
        }

        .role-dept {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .company-name {
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .company-logo {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            object-fit: contain;
            background: var(--bg-tertiary);
        }

        .location-text {
            display: flex;
            align-items: center;
            gap: 0.35rem;
            color: var(--text-muted);
        }

        .location-text i {
            font-size: 0.75rem;
            color: var(--primary);
        }

        .remote-badge {
            display: inline-block;
            padding: 0.15rem 0.5rem;
            background: rgba(34, 197, 94, 0.1);
            color: #16a34a;
            font-size: 0.7rem;
            font-weight: 600;
            border-radius: 50px;
            margin-left: 0.5rem;
        }

        .date-text {
            color: var(--text-muted);
        }

        .date-new {
            color: #16a34a;
            font-weight: 600;
        }

        .distance-badge {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            font-size: 0.7rem;
            font-weight: 600;
            border-radius: 50px;
            white-space: nowrap;
        }

        /* Distance priority colors - green (close) to yellow/orange (far) */
        .priority-1 { background: rgba(34, 197, 94, 0.15); color: #16a34a; }
        .priority-2 { background: rgba(34, 197, 94, 0.12); color: #22c55e; }
        .priority-3 { background: rgba(132, 204, 22, 0.15); color: #65a30d; }
        .priority-4 { background: rgba(234, 179, 8, 0.15); color: #ca8a04; }
        .priority-5 { background: rgba(249, 115, 22, 0.12); color: #ea580c; }
        .priority-6 { background: rgba(37, 99, 235, 0.12); color: #2563eb; }
        .priority-7 { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
        .priority-8 { background: rgba(236, 72, 153, 0.12); color: #db2777; }
        .priority-9 { background: rgba(168, 85, 247, 0.12); color: #a855f7; }
        .priority-10 { background: rgba(6, 182, 212, 0.12); color: #0891b2; }
        .priority-11 { background: rgba(148, 163, 184, 0.15); color: #64748b; }
        .priority-12 { background: rgba(148, 163, 184, 0.12); color: #94a3b8; }
        .priority-99 { background: rgba(239, 68, 68, 0.1); color: #dc2626; }

        .description-text {
            color: var(--text-muted);
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .apply-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.5rem 1rem;
            background: var(--primary);
            color: var(--white);
            text-decoration: none;
            border-radius: var(--radius);
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .apply-btn:hover {
            background: var(--primary-dark);
            color: var(--white);
            transform: translateY(-1px);
        }

        .apply-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .cover-letter-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--bg-tertiary);
            color: var(--primary);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .cover-letter-btn:hover {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
            transform: translateY(-1px);
        }

        .cover-letter-btn i {
            font-size: 0.85rem;
        }

        .resume-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--bg-tertiary);
            color: #4ade80;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s;
        }

        .resume-btn:hover {
            background: #16a34a;
            color: var(--white);
            border-color: #16a34a;
            transform: translateY(-1px);
        }

        .resume-btn i {
            font-size: 0.85rem;
        }

        /* Loading State */
        .loading-row td {
            padding: 2rem;
            text-align: center;
            color: var(--text-muted);
        }

        .loading-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--glass-border);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 0.5rem;
            vertical-align: middle;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-muted);
        }

        .empty-state i {
            font-size: 3rem;
            color: var(--glass-border);
            margin-bottom: 1rem;
        }

        .empty-state h3 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-secondary);
            border-radius: var(--radius);
            border: 1px solid var(--glass-border);
        }

        .pagination-info {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .pagination-btns {
            display: flex;
            gap: 0.5rem;
        }

        .page-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--glass-border);
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border-radius: var(--radius);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .page-btn:hover:not(:disabled) {
            border-color: var(--primary);
            color: var(--primary);
        }

        .page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .page-btn.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        /* Company Filter Tags */
        .company-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .company-tag {
            padding: 0.4rem 0.75rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.35rem;
        }

        .company-tag:hover,
        .company-tag.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        .company-tag .count {
            background: rgba(0,0,0,0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 50px;
            font-size: 0.65rem;
        }

        .company-tag.active .count {
            background: rgba(255,255,255,0.2);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .jobs-table {
                font-size: 0.8rem;
            }

            .col-description {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .jobs-section {
                padding: 30px 1rem 40px;
            }

            .jobs-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .filters-bar {
                flex-direction: column;
            }

            .search-box {
                width: 100%;
            }

            .filter-select {
                width: 100%;
            }

            .col-location, .col-distance, .col-date {
                display: none;
            }

            .pagination {
                flex-direction: column;
                gap: 1rem;
            }
        }

        /* Company Link Buttons */
        .company-link-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--glass-border);
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
        }

        .company-link-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.25);
        }

        .company-link-logo {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            object-fit: contain;
            flex-shrink: 0;
        }

        /* Document Manager Section */
        .doc-manager-section {
            padding: 30px 1.5rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--glass-border);
        }

        .doc-manager-container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .doc-manager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .doc-manager-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .doc-manager-title h3 {
            font-size: 1.1rem;
            margin: 0;
            color: var(--text-primary);
        }

        .upload-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1rem;
            border: 2px solid var(--primary);
            background: rgba(37, 99, 235, 0.05);
            color: var(--primary);
            border-radius: var(--radius);
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .upload-btn:hover {
            background: var(--primary);
            color: white;
        }

        /* GitHub Token Settings */
        .github-settings {
            background: var(--bg-tertiary);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .github-settings-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
        }

        .github-settings-header h4 {
            margin: 0;
            font-size: 0.9rem;
            color: #fbbf24;
        }

        .github-settings-content {
            display: none;
        }

        .github-settings-content.show {
            display: block;
        }

        .github-settings input[type="password"] {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid rgba(251, 191, 36, 0.4);
            border-radius: 6px;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
            box-sizing: border-box;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .github-settings .btn-save-token {
            padding: 0.4rem 0.75rem;
            background: #d97706;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.8rem;
            cursor: pointer;
            font-weight: 500;
        }

        .github-settings .btn-save-token:hover {
            background: #b45309;
        }

        .github-settings p {
            font-size: 0.8rem;
            color: #fbbf24;
            margin: 0 0 0.75rem 0;
            line-height: 1.4;
        }

        .token-status {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            margin-left: auto;
        }

        .token-status.configured {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
        }

        .token-status.not-configured {
            background: rgba(239, 68, 68, 0.2);
            color: #f87171;
        }

        .updating-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            border-radius: 6px;
            font-size: 0.85rem;
        }

        .updating-indicator i {
            animation: spin 1s linear infinite;
        }

        /* Upload Section */
        .upload-section {
            background: var(--bg-tertiary);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .upload-section-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .upload-section-header h4 {
            margin: 0;
            font-size: 0.9rem;
            color: #4ade80;
        }

        .upload-section-content {
            display: none;
            margin-top: 0.75rem;
        }

        .upload-section-content.show {
            display: block;
        }

        .upload-form {
            display: grid;
            gap: 0.75rem;
        }

        .upload-form-row {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .upload-form-group {
            flex: 1;
            min-width: 200px;
        }

        .upload-form-group label {
            display: block;
            font-size: 0.8rem;
            font-weight: 600;
            color: #4ade80;
            margin-bottom: 0.25rem;
        }

        .upload-form-group input[type="text"],
        .upload-form-group select {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 6px;
            font-size: 0.85rem;
            box-sizing: border-box;
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .upload-form-group input[type="file"] {
            width: 100%;
            padding: 0.4rem;
            border: 2px dashed rgba(34, 197, 94, 0.4);
            border-radius: 6px;
            font-size: 0.8rem;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
        }

        .upload-form-group input[type="file"]:hover {
            background: var(--bg-tertiary);
            border-color: #4ade80;
        }

        .btn-upload {
            padding: 0.6rem 1.25rem;
            background: #16a34a;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-upload:hover {
            background: #15803d;
        }

        .btn-upload:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .upload-status {
            margin-top: 0.75rem;
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-radius: 6px;
            border: 1px solid rgba(34, 197, 94, 0.3);
            font-size: 0.85rem;
            color: #4ade80;
            display: none;
        }

        .upload-status.show {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .upload-status.error {
            border-color: rgba(239, 68, 68, 0.4);
            color: #f87171;
            background: rgba(239, 68, 68, 0.1);
        }

        .upload-status.success {
            border-color: rgba(34, 197, 94, 0.4);
            color: #4ade80;
            background: rgba(34, 197, 94, 0.1);
        }

        /* Delete Button */
        .btn-delete {
            background: rgba(239, 68, 68, 0.15);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-delete:hover {
            background: #dc2626;
            color: white;
            border-color: #dc2626;
        }

        .btn-delete:disabled {
            background: var(--bg-tertiary);
            color: var(--text-muted);
            border-color: var(--glass-border);
            cursor: not-allowed;
        }

        .delete-confirm-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }

        .delete-confirm-dialog {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            max-width: 400px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            text-align: center;
            border: 1px solid var(--glass-border);
        }

        .delete-confirm-dialog h3 {
            margin: 0 0 0.5rem;
            color: #f87171;
        }

        .delete-confirm-dialog p {
            margin: 0 0 1rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .delete-confirm-dialog .filename {
            background: var(--bg-tertiary);
            padding: 0.5rem;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.85rem;
            margin-bottom: 1rem;
            word-break: break-all;
            color: var(--text-primary);
        }

        .delete-confirm-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }

        .delete-confirm-buttons button {
            padding: 0.6rem 1.25rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }

        .btn-cancel {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .btn-cancel:hover {
            background: var(--glass-border);
        }

        .btn-confirm-delete {
            background: #dc2626;
            color: white;
        }

        .btn-confirm-delete:hover {
            background: #b91c1c;
        }
    </style>
</head>
<body>
    <!-- Neural Network Background -->
    <canvas id="neural-bg"></canvas>

    <!-- Password Protection Overlay -->
    <div id="password-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, #0a0a0f 0%, #111118 100%); z-index: 99999; display: flex; align-items: center; justify-content: center;">
        <div style="background: #18181f; padding: 40px; border-radius: 12px; text-align: center; max-width: 400px; box-shadow: 0 20px 60px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);">
            <i class="fas fa-lock" style="font-size: 48px; color: #3b82f6; margin-bottom: 20px;"></i>
            <h2 style="margin: 0 0 10px; color: #ffffff;">Private Page</h2>
            <p style="color: #a1a1aa; margin-bottom: 20px;">This page is restricted. Enter password to continue.</p>
            <input type="password" id="password-input" placeholder="Enter password"
                   style="width: 100%; padding: 12px 16px; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; font-size: 16px; margin-bottom: 15px; box-sizing: border-box; background: #111118; color: #ffffff;"
                   onkeypress="if(event.key==='Enter') checkPassword()">
            <button onclick="checkPassword()"
                    style="width: 100%; padding: 12px; background: #3b82f6; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; font-weight: 600;">
                Unlock
            </button>
            <p id="password-error" style="color: #f87171; margin-top: 15px; display: none;">Incorrect password</p>
        </div>
    </div>

    <script>
        // Simple password protection (password: chundu2025)
        const correctHash = '8a5da52ed126447d359e70c05721a8aa'; // MD5 of chundu2025

        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString(16);
        }

        function checkPassword() {
            const input = document.getElementById('password-input').value;
            // Simple check - password is: chundu2025
            if (input === 'chundu2025') {
                sessionStorage.setItem('jobs_auth', 'true');
                document.getElementById('password-overlay').style.display = 'none';
            } else {
                document.getElementById('password-error').style.display = 'block';
                document.getElementById('password-input').style.borderColor = '#ef4444';
            }
        }

        // Check if already authenticated this session
        if (sessionStorage.getItem('jobs_auth') === 'true') {
            document.getElementById('password-overlay').style.display = 'none';
        }
    </script>

    <!-- Simple Navigation -->
    <nav style="background: #111827; border-bottom: none;">
        <div class="nav-container" style="justify-content: space-between;">
            <a href="../" class="logo" style="color: white;">
                <i class="fas fa-arrow-left" style="margin-right: 0.5rem;"></i>
                Back to Portfolio
            </a>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: rgba(255,255,255,0.7); font-size: 0.85rem;">
                    <i class="fas fa-briefcase" style="color: var(--primary); margin-right: 0.5rem;"></i>
                    Job Listings Dashboard
                </span>
            </div>
        </div>
    </nav>

    <!-- Fresh Jobs Ticker - Last 6 Hours -->
    <div class="fresh-jobs-ticker">
        <div class="ticker-label">
            <i class="fas fa-bolt"></i> LAST 6 HRS
        </div>
        <div class="ticker-wrapper">
            <div class="ticker-content" id="freshJobsTicker">
                <span class="ticker-item">Loading fresh job postings...</span>
            </div>
        </div>
    </div>

    <main class="main-content">
    <!-- Page Header -->
    <header class="page-header">
        <h1>Job <span>Listings</span></h1>
        <p>Live US job openings from top tech companies - Cloud Architect, Platform Engineering, DevOps & SRE roles. Priority: Bay Area, Texas, Florida, North Carolina.</p>
    </header>

    <!-- Document Manager Section -->
    <section class="doc-manager-section">
        <div class="doc-manager-container">
            <div class="doc-manager-header">
                <div class="doc-manager-title">
                    <i class="fas fa-folder-open" style="color: var(--primary); font-size: 1.25rem;"></i>
                    <h3>Document Manager</h3>
                </div>
                <a href="https://github.com/schundu007/chundu/tree/main/assets/resume" target="_blank" class="upload-btn" style="text-decoration: none;">
                    <i class="fab fa-github"></i>
                    Manage Files on GitHub
                </a>
            </div>

            <!-- GitHub Token Settings -->
            <div class="github-settings">
                <div class="github-settings-header" onclick="toggleGithubSettings()">
                    <i class="fas fa-key" style="color: #d97706;"></i>
                    <h4>GitHub Auto-Sync Settings</h4>
                    <span id="token-status" class="token-status not-configured">Not Configured</span>
                    <i id="settings-chevron" class="fas fa-chevron-down" style="color: #92400e; margin-left: 0.5rem;"></i>
                </div>
                <div id="github-settings-content" class="github-settings-content">
                    <p>
                        <i class="fas fa-info-circle"></i>
                        Enter your GitHub Personal Access Token (with repo scope) to automatically update the manifest when you set active documents.
                        <a href="https://github.com/settings/tokens/new?scopes=repo&description=Resume%20Manager" target="_blank" style="color: #d97706;">Create token</a>
                    </p>
                    <input type="password" id="github-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" />
                    <button class="btn-save-token" onclick="saveGithubToken()">
                        <i class="fas fa-save"></i> Save Token
                    </button>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="upload-section">
                <div class="upload-section-header" onclick="toggleUploadSection()">
                    <i class="fas fa-cloud-upload-alt" style="color: #16a34a;"></i>
                    <h4>Upload New Document</h4>
                    <i id="upload-chevron" class="fas fa-chevron-down" style="color: #166534; margin-left: 0.5rem;"></i>
                </div>
                <div id="upload-section-content" class="upload-section-content">
                    <div class="upload-form">
                        <div class="upload-form-row">
                            <div class="upload-form-group">
                                <label for="upload-file">Select File (PDF, DOC, DOCX)</label>
                                <input type="file" id="upload-file" accept=".pdf,.doc,.docx" onchange="handleFileSelect(this)" />
                            </div>
                            <div class="upload-form-group">
                                <label for="upload-type">Document Type</label>
                                <select id="upload-type">
                                    <option value="resume">Resume</option>
                                    <option value="coverLetter">Cover Letter</option>
                                </select>
                            </div>
                        </div>
                        <div class="upload-form-row">
                            <div class="upload-form-group">
                                <label for="upload-name">Display Name</label>
                                <input type="text" id="upload-name" placeholder="e.g., Google SRE Resume" />
                            </div>
                        </div>
                        <div>
                            <button class="btn-upload" id="btn-upload" onclick="uploadDocument()" disabled>
                                <i class="fas fa-upload"></i> Upload to GitHub
                            </button>
                        </div>
                        <div id="upload-status" class="upload-status"></div>
                    </div>
                </div>
            </div>

            <div id="doc-manager-content" style="background: white; border-radius: 12px; padding: 1.5rem; border: 1px solid var(--border);">
                <p style="color: var(--text-muted); text-align: center;">Loading documents...</p>
            </div>
        </div>
    </section>

    <!-- Featured Companies (No Public API) -->
    <section style="padding: 30px 1.5rem; background: var(--light);">
        <div style="max-width: 1400px; margin: 0 auto;">
            <h3 style="font-size: 1.1rem; margin-bottom: 1rem; color: var(--dark);">
                <i class="fas fa-star" style="color: var(--primary); margin-right: 0.5rem;"></i>
                Featured Companies <span style="font-weight: 400; color: var(--text-muted); font-size: 0.85rem;">(Direct Career Links)</span>
            </h3>
            <div style="display: flex; flex-wrap: wrap; gap: 0.75rem; align-items: center;">
                <!-- Microsoft -->
                <a href="https://jobs.careers.microsoft.com/global/en/search?q=staff%20devops%20engineer&l=en_us&pg=1&pgSz=20&o=Recent" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/microsoft.png" alt="Microsoft" class="company-link-logo">
                    MS - Staff DevOps
                </a>
                <a href="https://jobs.careers.microsoft.com/global/en/search?q=devops%20engineer&l=en_us&pg=1&pgSz=20&o=Recent" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/microsoft.png" alt="Microsoft" class="company-link-logo">
                    MS - DevOps
                </a>
                <a href="https://jobs.careers.microsoft.com/global/en/search?q=site%20reliability%20engineer&l=en_us&pg=1&pgSz=20&o=Recent" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/microsoft.png" alt="Microsoft" class="company-link-logo">
                    MS - SRE
                </a>
                <a href="https://jobs.careers.microsoft.com/global/en/search?q=infrastructure%20engineer&l=en_us&pg=1&pgSz=20&o=Recent" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/microsoft.png" alt="Microsoft" class="company-link-logo">
                    MS - Infra
                </a>
                <!-- Amazon/AWS -->
                <a href="https://amazon.jobs/en/search?offset=0&result_limit=10&sort=recent&country%5B%5D=USA&base_query=devops%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/amazon.png" alt="AWS" class="company-link-logo">
                    AWS - DevOps
                </a>
                <a href="https://amazon.jobs/en/search?offset=0&result_limit=10&sort=recent&country%5B%5D=USA&base_query=site%20reliability%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/amazon.png" alt="AWS" class="company-link-logo">
                    AWS - SRE
                </a>
                <a href="https://amazon.jobs/en/search?offset=0&result_limit=10&sort=recent&country%5B%5D=USA&base_query=infrastructure%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/amazon.png" alt="AWS" class="company-link-logo">
                    AWS - Infra
                </a>
                <a href="https://amazon.jobs/en/search?offset=0&result_limit=10&sort=recent&country%5B%5D=USA&base_query=forward%20deployed%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/amazon.png" alt="AWS" class="company-link-logo">
                    AWS - Forward Deploy
                </a>
                <!-- Google -->
                <a href="https://www.google.com/about/careers/applications/jobs/results/?q=devops%20engineer&location=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/google.png" alt="Google" class="company-link-logo">
                    Google - DevOps
                </a>
                <a href="https://www.google.com/about/careers/applications/jobs/results/?q=site%20reliability%20engineer&location=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/google.png" alt="Google" class="company-link-logo">
                    Google - SRE
                </a>
                <a href="https://www.google.com/about/careers/applications/jobs/results/?q=infrastructure%20engineer&location=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/google.png" alt="Google" class="company-link-logo">
                    Google - Infra
                </a>
                <!-- NVIDIA -->
                <a href="https://nvidia.wd5.myworkdayjobs.com/NVIDIAExternalCareerSite?locationCountry=bc33aa3152ec42d4995f4791a106ed09&q=devops%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/nvidia.png" alt="NVIDIA" class="company-link-logo">
                    NVIDIA - DevOps
                </a>
                <a href="https://nvidia.wd5.myworkdayjobs.com/NVIDIAExternalCareerSite?locationCountry=bc33aa3152ec42d4995f4791a106ed09&q=infrastructure%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/nvidia.png" alt="NVIDIA" class="company-link-logo">
                    NVIDIA - Infra
                </a>
                <a href="https://nvidia.wd5.myworkdayjobs.com/NVIDIAExternalCareerSite?locationCountry=bc33aa3152ec42d4995f4791a106ed09&q=ML%20infrastructure" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/nvidia.png" alt="NVIDIA" class="company-link-logo">
                    NVIDIA - ML Infra
                </a>
                <!-- TikTok -->
                <a href="https://careers.tiktok.com/position?keywords=devops%20engineer&category=&location=CT_243&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn" style="background: #000; color: #fff;">
                    <img src="../assets/images/logos/tiktok.png" alt="TikTok" class="company-link-logo">
                    TikTok - DevOps
                </a>
                <a href="https://careers.tiktok.com/position?keywords=site%20reliability&category=&location=CT_243&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn" style="background: #000; color: #fff;">
                    <img src="../assets/images/logos/tiktok.png" alt="TikTok" class="company-link-logo">
                    TikTok - SRE
                </a>
                <a href="https://careers.tiktok.com/position?keywords=infrastructure%20engineer&category=&location=CT_243&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn" style="background: #000; color: #fff;">
                    <img src="../assets/images/logos/tiktok.png" alt="TikTok" class="company-link-logo">
                    TikTok - Infra
                </a>
                <a href="https://careers.tiktok.com/position?keywords=ML%20infrastructure&category=&location=CT_243&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn" style="background: #000; color: #fff;">
                    <img src="../assets/images/logos/tiktok.png" alt="TikTok" class="company-link-logo">
                    TikTok - ML Infra
                </a>
                <!-- ByteDance -->
                <a href="https://jobs.bytedance.com/en/position?keywords=devops&category=&location=&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/bytedance.png" alt="ByteDance" class="company-link-logo">
                    ByteDance - DevOps
                </a>
                <a href="https://jobs.bytedance.com/en/position?keywords=infrastructure%20engineer&category=&location=&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/bytedance.png" alt="ByteDance" class="company-link-logo">
                    ByteDance - Infra
                </a>
                <a href="https://jobs.bytedance.com/en/position?keywords=site%20reliability&category=&location=&project=&type=&job_hot_flag=&current=1&limit=10" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/bytedance.png" alt="ByteDance" class="company-link-logo">
                    ByteDance - SRE
                </a>
                <!-- OpenAI -->
                <a href="https://jobs.ashbyhq.com/openai?departmentId=4fdc3b37-1cd3-4e15-8bb4-52f24c63a16a" target="_blank" class="company-link-btn" style="background: #10a37f; color: #fff;">
                    <img src="../assets/images/logos/openai.png" alt="OpenAI" class="company-link-logo">
                    OpenAI - Platform
                </a>
                <a href="https://jobs.ashbyhq.com/openai" target="_blank" class="company-link-btn" style="background: #10a37f; color: #fff;">
                    <img src="../assets/images/logos/openai.png" alt="OpenAI" class="company-link-logo">
                    OpenAI - All Jobs
                </a>
                <!-- AI/ML Companies -->
                <a href="https://scale.com/careers#open-roles" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/scaleai.png" alt="Scale AI" class="company-link-logo">
                    Scale AI - Infra
                </a>
                <a href="https://www.amd.com/en/corporate/careers" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/amd.png" alt="AMD" class="company-link-logo">
                    AMD - DevOps
                </a>
                <a href="https://groq.com/careers/" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/groq.png" alt="Groq" class="company-link-logo">
                    Groq - ML Infra
                </a>
                <a href="https://cerebras.ai/careers/" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/cerebras.png" alt="Cerebras" class="company-link-logo">
                    Cerebras - Infra
                </a>
                <!-- Finance -->
                <a href="https://www.capitalonecareers.com/search-jobs?k=devops%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/capitalone.png" alt="Capital One" class="company-link-logo">
                    Capital One - DevOps
                </a>
                <a href="https://www.capitalonecareers.com/search-jobs?k=site%20reliability" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/capitalone.png" alt="Capital One" class="company-link-logo">
                    Capital One - SRE
                </a>
                <a href="https://www.capitalonecareers.com/search-jobs?k=infrastructure%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/capitalone.png" alt="Capital One" class="company-link-logo">
                    Capital One - Infra
                </a>
                <a href="https://jpmorgan.fa.oraclecloud.com/hcmUI/CandidateExperience/en/sites/CX_1001/requisitions?keyword=devops" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/jpmorgan.png" alt="JPMorgan" class="company-link-logo">
                    JPMorgan - DevOps
                </a>
                <a href="https://jpmorgan.fa.oraclecloud.com/hcmUI/CandidateExperience/en/sites/CX_1001/requisitions?keyword=site%20reliability" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/jpmorgan.png" alt="JPMorgan" class="company-link-logo">
                    JPMorgan - SRE
                </a>
                <a href="https://usa.visa.com/careers/job-search.html?q=devops%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/visa.png" alt="Visa" class="company-link-logo">
                    Visa - DevOps
                </a>
                <a href="https://usa.visa.com/careers/job-search.html?q=site%20reliability" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/visa.png" alt="Visa" class="company-link-logo">
                    Visa - SRE
                </a>
                <!-- Retail -->
                <a href="https://jobs.target.com/search-jobs?k=devops%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/target.png" alt="Target" class="company-link-logo">
                    Target - DevOps
                </a>
                <a href="https://jobs.target.com/search-jobs?k=infrastructure%20engineer" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/target.png" alt="Target" class="company-link-logo">
                    Target - Infra
                </a>
                <a href="https://careers.walmart.com/results?q=devops%20engineer&page=1&sort=date" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/walmart.png" alt="Walmart" class="company-link-logo">
                    Walmart - DevOps
                </a>
                <a href="https://careers.walmart.com/results?q=site%20reliability&page=1&sort=date" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/walmart.png" alt="Walmart" class="company-link-logo">
                    Walmart - SRE
                </a>
                <!-- Tech Giants -->
                <a href="https://careers.salesforce.com/en/jobs/?search=devops%20engineer&country=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/salesforce.png" alt="Salesforce" class="company-link-logo">
                    Salesforce - DevOps
                </a>
                <a href="https://careers.salesforce.com/en/jobs/?search=site%20reliability&country=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/salesforce.png" alt="Salesforce" class="company-link-logo">
                    Salesforce - SRE
                </a>
                <a href="https://www.metacareers.com/jobs/?q=devops%20engineer&offices[0]=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/meta.png" alt="Meta" class="company-link-logo">
                    Meta - DevOps
                </a>
                <a href="https://www.metacareers.com/jobs/?q=infrastructure%20engineer&offices[0]=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/meta.png" alt="Meta" class="company-link-logo">
                    Meta - Infra
                </a>
                <a href="https://www.metacareers.com/jobs/?q=production%20engineer&offices[0]=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/meta.png" alt="Meta" class="company-link-logo">
                    Meta - Prod Eng
                </a>
                <a href="https://jobs.apple.com/en-us/search?search=devops%20engineer&sort=newest" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/apple.png" alt="Apple" class="company-link-logo">
                    Apple - DevOps
                </a>
                <a href="https://jobs.apple.com/en-us/search?search=site%20reliability&sort=newest" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/apple.png" alt="Apple" class="company-link-logo">
                    Apple - SRE
                </a>
                <a href="https://jobs.apple.com/en-us/search?search=infrastructure%20engineer&sort=newest" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/apple.png" alt="Apple" class="company-link-logo">
                    Apple - Infra
                </a>
                <!-- Enterprise -->
                <a href="https://jobs.intuit.com/search-jobs?k=devops%20engineer&l=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/intuit.png" alt="Intuit" class="company-link-logo">
                    Intuit - DevOps
                </a>
                <a href="https://jobs.intuit.com/search-jobs?k=site%20reliability&l=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/intuit.png" alt="Intuit" class="company-link-logo">
                    Intuit - SRE
                </a>
                <a href="https://jobs.intuit.com/search-jobs?k=infrastructure%20engineer&l=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/intuit.png" alt="Intuit" class="company-link-logo">
                    Intuit - Infra
                </a>
                <a href="https://kla.wd1.myworkdayjobs.com/Search?q=devops" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/kla.png" alt="KLA" class="company-link-logo">
                    KLA - DevOps
                </a>
                <a href="https://careers.oracle.com/jobs/#en/sites/jobsearch/requisitions?keyword=devops%20engineer&location=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/oracle.png" alt="Oracle" class="company-link-logo">
                    Oracle - DevOps
                </a>
                <a href="https://careers.oracle.com/jobs/#en/sites/jobsearch/requisitions?keyword=site%20reliability&location=United%20States" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/oracle.png" alt="Oracle" class="company-link-logo">
                    Oracle - SRE
                </a>
                <a href="https://www.ibm.com/careers/search?field_keyword_18[0]=DevOps" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/ibm.png" alt="IBM" class="company-link-logo">
                    IBM - DevOps
                </a>
                <a href="https://www.ibm.com/careers/search?field_keyword_18[0]=Site%20Reliability" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/ibm.png" alt="IBM" class="company-link-logo">
                    IBM - SRE
                </a>
                <a href="https://jobs.cisco.com/jobs/SearchJobs/devops%20engineer?21178=%5B169482%5D&21178_format=6020" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/cisco.png" alt="Cisco" class="company-link-logo">
                    Cisco - DevOps
                </a>
                <a href="https://jobs.cisco.com/jobs/SearchJobs/site%20reliability?21178=%5B169482%5D&21178_format=6020" target="_blank" class="company-link-btn">
                    <img src="../assets/images/logos/cisco.png" alt="Cisco" class="company-link-logo">
                    Cisco - SRE
                </a>
                <!-- LinkedIn & Adobe Careers -->
                <a href="https://careers.linkedin.com/jobs?keywords=devops&location=United%20States" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    LinkedIn - DevOps
                </a>
                <a href="https://careers.linkedin.com/jobs?keywords=site%20reliability&location=United%20States" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    LinkedIn - SRE
                </a>
                <a href="https://careers.adobe.com/us/en/search-results?keywords=devops%20engineer" target="_blank" class="company-link-btn" style="background: #ff0000; color: white;">
                    <i class="fab fa-adobe"></i>
                    Adobe - DevOps
                </a>
                <a href="https://careers.adobe.com/us/en/search-results?keywords=site%20reliability" target="_blank" class="company-link-btn" style="background: #ff0000; color: white;">
                    <i class="fab fa-adobe"></i>
                    Adobe - SRE
                </a>
                <a href="https://careers.adobe.com/us/en/search-results?keywords=infrastructure%20engineer" target="_blank" class="company-link-btn" style="background: #ff0000; color: white;">
                    <i class="fab fa-adobe"></i>
                    Adobe - Infra
                </a>
                <!-- LinkedIn Job Search - Last 3 Hours ($200K+, sorted by date) -->
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Staff%20DevOps%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0e76a8; color: white;">
                    <i class="fab fa-linkedin"></i>
                    Staff DevOps (3h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22DevOps%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0e76a8; color: white;">
                    <i class="fab fa-linkedin"></i>
                    DevOps Eng (3h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Infrastructure%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0e76a8; color: white;">
                    <i class="fab fa-linkedin"></i>
                    Infra Eng (3h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Site%20Reliability%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0e76a8; color: white;">
                    <i class="fab fa-linkedin"></i>
                    SRE (3h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Forward%20Deployed%20Engineer%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0e76a8; color: white;">
                    <i class="fab fa-linkedin"></i>
                    FDE (3h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22ML%20infrastructure%22%20OR%20%22AI%20infrastructure%22&location=United%20States&f_TPR=r10800&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0e76a8; color: white;">
                    <i class="fab fa-linkedin"></i>
                    AI/ML Infra (3h)
                </a>
                <!-- LinkedIn Job Search - Last 6 Hours ($200K+, sorted by date) -->
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Staff%20DevOps%20Engineer%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    Staff DevOps (6h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22DevOps%20Engineer%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    DevOps Eng (6h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Infrastructure%20Engineer%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    Infra Eng (6h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Site%20Reliability%20Engineer%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    SRE (6h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Forward%20Deployed%20Engineer%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    FDE (6h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22ML%20infrastructure%22%20OR%20%22AI%20infrastructure%22&location=United%20States&f_TPR=r21600&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #0077b5; color: white;">
                    <i class="fab fa-linkedin"></i>
                    AI/ML Infra (6h)
                </a>
                <!-- LinkedIn Job Search - Last 12 Hours ($200K+, sorted by date) -->
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Staff%20DevOps%20Engineer%22&location=United%20States&f_TPR=r43200&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #005582; color: white;">
                    <i class="fab fa-linkedin"></i>
                    Staff DevOps (12h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22DevOps%20Engineer%22&location=United%20States&f_TPR=r43200&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #005582; color: white;">
                    <i class="fab fa-linkedin"></i>
                    DevOps Eng (12h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Infrastructure%20Engineer%22&location=United%20States&f_TPR=r43200&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #005582; color: white;">
                    <i class="fab fa-linkedin"></i>
                    Infra Eng (12h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Site%20Reliability%20Engineer%22&location=United%20States&f_TPR=r43200&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #005582; color: white;">
                    <i class="fab fa-linkedin"></i>
                    SRE (12h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22Forward%20Deployed%20Engineer%22&location=United%20States&f_TPR=r43200&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #005582; color: white;">
                    <i class="fab fa-linkedin"></i>
                    FDE (12h)
                </a>
                <a href="https://www.linkedin.com/jobs/search/?keywords=%22ML%20infrastructure%22%20OR%20%22AI%20infrastructure%22&location=United%20States&f_TPR=r43200&f_E=4&f_SB2=9&sortBy=DD" target="_blank" class="company-link-btn" style="background: #005582; color: white;">
                    <i class="fab fa-linkedin"></i>
                    AI/ML Infra (12h)
                </a>
            </div>
        </div>
    </section>

    <!-- Jobs Section -->
    <section class="jobs-section">
        <div class="jobs-container">
            <!-- Header with Stats -->
            <div class="jobs-header">
                <h2>Live Job <span>Listings</span></h2>
                <div class="jobs-stats">
                    <div class="jobs-stat">
                        <i class="fas fa-briefcase"></i>
                        <span>Total Jobs: <strong id="total-jobs">0</strong></span>
                    </div>
                    <div class="jobs-stat">
                        <i class="fas fa-building"></i>
                        <span>Companies: <strong id="total-companies">0</strong></span>
                    </div>
                    <div class="jobs-stat">
                        <i class="fas fa-clock"></i>
                        <span>Updated: <strong id="last-updated">--</strong></span>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Search jobs by title, company, or keywords...">
                </div>
                <select class="filter-select" id="location-filter">
                    <option value="us" selected>All US Locations</option>
                    <option value="remote">Remote (US)</option>
                    <option value="bayarea">SF Bay Area / California</option>
                    <option value="texas">Texas</option>
                    <option value="florida">Florida</option>
                    <option value="nc">North Carolina</option>
                    <option value="ny">New York</option>
                    <option value="seattle">Seattle / Washington</option>
                </select>
                <select class="filter-select" id="date-filter">
                    <option value="">All Dates</option>
                    <option value="1">Last 24 hours</option>
                    <option value="3" selected>Last 3 days</option>
                    <option value="7">Last 7 days</option>
                    <option value="14">Last 14 days</option>
                    <option value="30">Last 30 days</option>
                </select>
                <button class="refresh-btn" id="refresh-btn">
                    <i class="fas fa-sync-alt"></i>
                    Refresh
                </button>
            </div>

            <!-- Company Tags -->
            <div class="company-tags" id="company-tags">
                <!-- Populated by JavaScript -->
            </div>

            <!-- Jobs Table -->
            <div class="jobs-table-wrapper">
                <table class="jobs-table">
                    <thead>
                        <tr>
                            <th class="col-role sortable" data-sort="title">Role <i class="fas fa-sort"></i></th>
                            <th class="col-company sortable" data-sort="company">Company <i class="fas fa-sort"></i></th>
                            <th class="col-location">Location</th>
                            <th class="col-distance sortable" data-sort="distance">Distance <i class="fas fa-sort"></i></th>
                            <th class="col-date sortable" data-sort="date">Posted <i class="fas fa-sort"></i></th>
                            <th class="col-description">Description</th>
                            <th class="col-apply">Action</th>
                        </tr>
                    </thead>
                    <tbody id="jobs-tbody">
                        <tr class="loading-row">
                            <td colspan="7">
                                <span class="loading-spinner"></span>
                                Loading jobs from company career portals...
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <div class="pagination" id="pagination" style="display: none;">
                <div class="pagination-info">
                    Showing <span id="showing-start">1</span>-<span id="showing-end">25</span> of <span id="showing-total">0</span> jobs
                </div>
                <div class="pagination-btns" id="pagination-btns">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
    </section>
    </main>

    <!-- Footer -->
    <footer style="padding: 1.5rem 2rem;">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <a href="../" style="color: white; font-size: 0.9rem; display: flex; align-items: center; gap: 0.5rem;">
                <i class="fas fa-arrow-left"></i> Back to Portfolio
            </a>
            <p style="opacity: 0.6; font-size: 0.8rem; margin: 0;">&copy; 2025 Sudhakar Chundu. Private job listings dashboard.</p>
        </div>
    </footer>

    <script>
        // ============ UTILITY FUNCTIONS (MUST BE FIRST) ============

        // Extract job description (not company overview)
        function stripHtml(html) {
            if (!html) return '';
            try {
                const tmp = document.createElement('div');

                // Step 1: Decode HTML entities (handles double-encoded content like &lt; -> <)
                tmp.innerHTML = html;
                let decoded = tmp.innerHTML; // First decode

                // Step 2: Now set as innerHTML again to parse as actual HTML and extract text
                tmp.innerHTML = decoded;
                let text = tmp.textContent || tmp.innerText || '';

                // Step 3: Check if still contains HTML tags (triple-encoded edge case)
                if (text.includes('<') && text.includes('>')) {
                    tmp.innerHTML = text;
                    text = tmp.textContent || tmp.innerText || '';
                }

                // Clean up whitespace
                text = text.replace(/\s+/g, ' ').trim();

                // Find job-related section (skip company intro)
                const jobMarkers = [
                    'what you\'ll do',
                    'what you will do',
                    'responsibilities',
                    'the role',
                    'about the role',
                    'in this role',
                    'your impact',
                    'the opportunity',
                    'job summary',
                    'position overview'
                ];

                const lowerText = text.toLowerCase();
                let bestIdx = text.length;
                let foundMarker = '';

                for (const marker of jobMarkers) {
                    const idx = lowerText.indexOf(marker);
                    if (idx !== -1 && idx < bestIdx && idx < text.length * 0.6) {
                        bestIdx = idx;
                        foundMarker = marker;
                    }
                }

                // Extract from the job section if found
                if (bestIdx < text.length && foundMarker) {
                    text = text.substring(bestIdx + foundMarker.length).trim();
                    // Remove leading punctuation
                    text = text.replace(/^[:\s-]+/, '').trim();
                }

                // Truncate
                if (text.length > 300) {
                    text = text.substring(0, 300) + '...';
                }

                return text || 'View job details on company website';
            } catch (e) {
                return 'View job details on company website';
            }
        }

        // STRICT filter - only roles matching Sudhakar's 18+ years experience
        // Cloud AI Architect | Director Platform Engineering | Senior SRE
        function isRelevantJob(job) {
            const title = job.title.toLowerCase();

            // EXACT role patterns that match resume (Senior/Staff/Principal+ only)
            const exactMatches = [
                // Architect roles
                /(staff|senior|principal|lead)?\s*cloud architect/i,
                /(staff|senior|principal|lead)?\s*solutions architect/i,
                /(staff|senior|principal|lead)?\s*platform architect/i,
                /(staff|senior|principal|lead)?\s*infrastructure architect/i,
                /(staff|senior|principal|lead)?\s*enterprise architect/i,
                /(staff|senior|principal|lead)?\s*systems architect/i,
                /(staff|senior|principal|lead)?\s*technical architect/i,

                // DevOps (Senior/Staff+)
                /(senior|staff|principal|lead)\s+devops/i,
                /devops\s+(senior|staff|principal|lead|manager|director|architect)/i,
                /(senior|staff|principal|lead)\s+dev\s*ops/i,

                // SRE roles (Senior/Staff+)
                /(senior|staff|principal|lead)\s+sre/i,
                /sre\s+(senior|staff|principal|lead|manager|director)/i,
                /(senior|staff|principal|lead)\s+site reliability/i,
                /site reliability\s+(senior|staff|principal|lead|manager|director)/i,

                // Platform Engineering (Senior/Staff+)
                /(senior|staff|principal|lead)\s+platform engineer/i,
                /platform engineer\s+(senior|staff|principal|lead)/i,
                /platform\s+(manager|director|lead|head)/i,

                // Infrastructure (Senior/Staff+)
                /(senior|staff|principal|lead)\s+infrastructure/i,
                /infrastructure\s+(senior|staff|principal|lead|manager|director)/i,

                // Cloud Engineering (Senior/Staff+)
                /(senior|staff|principal|lead)\s+cloud engineer/i,
                /cloud engineer\s+(senior|staff|principal|lead)/i,

                // AI/ML Infrastructure & MLOps
                /ai\s*infrastructure/i,
                /ml\s*infrastructure/i,
                /ai.?ml\s*(devops|infrastructure|platform)/i,
                /(senior|staff|principal|lead)?\s*mlops/i,
                /mlops\s+(senior|staff|principal|lead|manager|engineer)/i,
                /aiops/i,
                /ml\s*platform/i,
                /gpu\s*(infrastructure|platform|engineer|architect)/i,

                // Director/VP/Head level (infrastructure/cloud focused)
                /director.*(infrastructure|platform|cloud|sre|devops)/i,
                /vp.*(infrastructure|platform|cloud|sre|devops)/i,
                /head of.*(infrastructure|platform|cloud|sre|devops)/i,

                // Engineering Manager (infrastructure focused)
                /engineering manager.*(infrastructure|platform|cloud|sre|devops)/i,
            ];

            const matchesExact = exactMatches.some(pattern => pattern.test(title));
            if (!matchesExact) return false;

            // STRICT exclusions
            const strictExclusions = [
                // Hardware/Mechanical
                /mechanical/i, /hardware/i, /electrical/i, /firmware/i,
                /sensor/i, /av\s/i, /autonomous vehicle/i, /robotics/i,
                /embedded/i, /fpga/i, /asic/i, /chip/i,

                // Product/Design
                /product engineer/i, /product manager/i, /product owner/i,
                /product design/i, /commercialization/i,
                /ux/i, /ui engineer/i, /design engineer/i,

                // Frontend/Backend/Full Stack
                /frontend/i, /front-end/i, /backend/i, /back-end/i,
                /full.?stack/i, /fullstack/i,

                // Data Science/ML Research
                /data scientist/i, /machine learning engineer/i,
                /research scientist/i, /applied scientist/i,

                // Generic Software (without infra context)
                /software engineer(?!.*(infrastructure|platform|sre|cloud|devops))/i,

                // Business/Non-technical
                /sales/i, /marketing/i, /recruiter/i,
                /customer/i, /account/i, /legal/i, /finance/i,

                // Mobile
                /mobile/i, /ios\s/i, /android/i,

                // QA/Testing
                /qa engineer/i, /test engineer/i, /quality/i,

                // Entry-level / New Grad / Intern
                /intern/i, /internship/i,
                /fresher/i, /fresh graduate/i,
                /new grad/i, /new graduate/i, /recent grad/i,
                /associate(?!\s*(director|vp))/i,
                /junior/i, /entry.?level/i,
                /graduate\s*(program|engineer|role)/i,
                /university\s*grad/i, /college\s*grad/i,
                /early career/i, /early.?in.?career/i,

                // Manufacturing/Operations
                /manufacturing/i, /supply chain/i,
                /operations(?!.*(sre|devops|platform|cloud))/i,
            ];

            const isExcluded = strictExclusions.some(pattern => pattern.test(title));
            return !isExcluded;
        }

        // ============ DISTANCE PRIORITY FROM SAN JOSE ============
        // Returns priority score (lower = closer to San Jose)
        function getDistancePriority(location) {
            if (!location) return 999;
            const loc = location.toLowerCase();

            // Priority 1: San Jose and immediate neighbors (0-15 miles)
            if (/san jose|san jos|santa clara|milpitas|sunnyvale|cupertino|campbell|los gatos|saratoga|mountain view/i.test(loc)) {
                return 1;
            }

            // Priority 2: South Bay / Peninsula (15-30 miles)
            if (/palo alto|menlo park|redwood city|fremont|newark|union city|hayward|foster city|san mateo|burlingame|belmont/i.test(loc)) {
                return 2;
            }

            // Priority 3: SF and East Bay (30-50 miles)
            if (/san francisco|sf,|oakland|berkeley|emeryville|alameda|walnut creek|pleasanton|dublin|livermore|daly city/i.test(loc)) {
                return 3;
            }

            // Priority 4: Greater Bay Area (50-80 miles)
            if (/bay area|south bay|peninsula|east bay|napa|sonoma|santa cruz|gilroy|morgan hill|concord|richmond/i.test(loc)) {
                return 4;
            }

            // Priority 5: California (other)
            if (/california|ca,|\bca\b|los angeles|san diego|sacramento|irvine|pasadena|la,/i.test(loc)) {
                return 5;
            }

            // Priority 6: Remote (US-based)
            if (/remote/i.test(loc) && /us|usa|united states|america/i.test(loc)) {
                return 6;
            }

            // Priority 7: Remote (unspecified)
            if (/remote/i.test(loc)) {
                return 7;
            }

            // Priority 8: Texas (user's secondary preference)
            if (/texas|tx,|\btx\b|austin|dallas|houston|san antonio|plano|irving/i.test(loc)) {
                return 8;
            }

            // Priority 9: Florida (user's preference)
            if (/florida|fl,|\bfl\b|miami|orlando|tampa|jacksonville|fort lauderdale/i.test(loc)) {
                return 9;
            }

            // Priority 10: North Carolina (user's preference)
            if (/north carolina|nc,|\bnc\b|charlotte|raleigh|durham|research triangle/i.test(loc)) {
                return 10;
            }

            // Priority 11: Other major tech hubs
            if (/seattle|washington|new york|ny,|\bny\b|boston|chicago|denver|portland|atlanta|phoenix/i.test(loc)) {
                return 11;
            }

            // Priority 12: Other US locations
            if (/united states|usa|\bus\b/i.test(loc)) {
                return 12;
            }

            // Priority 99: Everything else (non-US)
            return 99;
        }

        // Get human-readable distance label
        function getDistanceLabel(priority) {
            const labels = {
                1: 'San Jose Area (0-15 mi)',
                2: 'South Bay/Peninsula (15-30 mi)',
                3: 'SF/East Bay (30-50 mi)',
                4: 'Greater Bay Area (50-80 mi)',
                5: 'California',
                6: 'Remote (US)',
                7: 'Remote',
                8: 'Texas',
                9: 'Florida',
                10: 'North Carolina',
                11: 'Other Tech Hub',
                12: 'Other US',
                99: 'Outside US'
            };
            return labels[priority] || 'Unknown';
        }

        // ============ USER PROFILE FOR COVER LETTER & RESUME ============
        const USER_PROFILE = {
            name: 'Sudhakar Chundu',
            title: 'Distinguished Cloud AI Architect',
            email: 'chundubabu@gmail.com',
            phone: '(513) 666-0099',
            linkedin: 'linkedin.com/in/schundu',
            github: 'github.com/schundu007',
            website: 'sudhakarchundu.org',
            location: 'San Jose, CA',
            yearsExperience: '18+',
            summary: 'Distinguished Cloud AI Architect and Platform Engineering Leader with 18+ years of hands-on experience building and operating large-scale GPU compute platforms, AI/ML infrastructure, and distributed systems at planetary scale. Expert in Slurm cluster management, GPU scheduling (NVIDIA A100/V100/T4/DGX), Kubernetes orchestration, and multi-cloud architecture (AWS, Azure, OCI). Lead global teams of 13+ engineers across Infrastructure, Security, Networking, and DevOps, managing $15M+ budgets while delivering $8M+ in documented cost savings.',
            keyMetrics: [
                { value: '$8M+', label: 'Annual Savings | 73% Cost Reduction' },
                { value: '10M+', label: 'Users Served | 15+ Regions' },
                { value: '99.99%', label: 'GPU Cluster Uptime' }
            ],
            skills: {
                'GPU/HPC Computing': 'Slurm, Slinky, NVIDIA BCM/DGX, vcluster, CUDA, TensorRT, A100/V100/T4 scheduling, Triton Inference Server, vLLM',
                'AI/ML Infrastructure': 'PyTorch, Ray, Flyte, MLflow, Kubeflow, SageMaker, Azure ML, TorchServe, KServe, distributed training',
                'Cloud Platforms': 'AWS (EKS, EC2, SageMaker, EMR), Azure (AKS, APIM, ML), OCI',
                'Container Orchestration': 'Kubernetes (EKS/AKS), Docker, Helm, Istio Service Mesh, KEDA, ArgoCD, FluxCD',
                'Infrastructure as Code': 'Terraform (5+ modules), Ansible, ARM/Bicep, CloudFormation, Packer, GitOps, OPA, Checkov',
                'Big Data & Streaming': 'Databricks, Apache Spark, Flink, Kafka, Hadoop/HDFS, Hive, Trino, Airflow, Delta Lake',
                'Security & Compliance': 'SOC2, HIPAA, FedRAMP, ISO 27001, HITRUST, DevSecOps (Snyk, SonarQube), Vault, ZTNA',
                'SRE & Observability': 'SLI/SLO/SLA, error budgets, chaos engineering, Prometheus, Grafana, Datadog, OpenTelemetry'
            },
            experience: [
                {
                    title: 'Distinguished Cloud AI Architect / Director of Platform Engineering',
                    company: 'Trackonomy Systems',
                    location: 'San Jose, CA',
                    dates: 'Oct 2023  Present',
                    bullets: [
                        'Platform Architecture: Designed and built K8s microservices platform from ground up; migrated 40+ workloads from VMs, VMSS, Azure WebApps, Function Apps, and datacenter Java applications to containerized architecture',
                        'GPU/HPC Infrastructure: Designed Slurm-based GPU compute platform  65 GPUs across 8 nodes using Slurm, Slinky (Slurm-on-Kubernetes), and NVIDIA BCM; achieved 99.99% uptime serving 12+ enterprise clients for AI inference and training',
                        'DevSecOps & Compliance: Led SOC2 Type II, FedRAMP, and HIPAA certification; implemented Trivy, Falco, OPA, Gitleaks, and HashiCorp Vault for GenAI/LLM platform security',
                        'Cloud FinOps: Reduced cloud costs 73% ($10M$2.7M/year) through GPU utilization optimization, fair-share scheduling, reserved instance planning, and vendor consolidation',
                        'Platform Engineering: Built CI/CD pipelines for 100+ applications using GitHub Actions, Docker, Terraform, and GitOps (ArgoCD, FluxCD); reduced deployment time 95% (days15 minutes)',
                        'Leadership: Built team 06 engineers | Managed $15M+ budgets | Led incident response and on-call rotations'
                    ]
                },
                {
                    title: 'Senior SRE / Cloud Architect  ML Infrastructure',
                    company: 'Wipro Technologies  OSDU Data Platform',
                    location: 'Seattle, WA',
                    dates: 'Feb 2020  Oct 2023',
                    bullets: [
                        'Platform: Architected OSDU R3 data platform processing exabytes of seismic data on GPU-accelerated Kubernetes clusters (EKS/Fargate) with Docker, Spark, Kafka, and Hadoop/HDFS for ExxonMobil, Chevron, BP, Shell',
                        'Infrastructure: Delivered GPU cluster management at scale with Kubernetes, Istio, and KEDA, ensuring 99.99% availability for ML inference workloads across multi-region deployments',
                        'IaC & GitOps: Created 5+ Terraform modules (VPC, EKS, RDS, DynamoDB, S3, SageMaker, IAM); implemented GitOps (ArgoCD/FluxCD) with Jenkins pipelines; reduced deployment time 80%',
                        'Security & Quality: Integrated Trivy, Kube-bench, and SonarQube into CI/CD; implemented OPA policies and Ansible automation for compliance enforcement',
                        'Observability: Built observability stack with Prometheus/Grafana/ELK and GPU metrics; created automation in Go/Python reducing manual operations 85%; led 24x7 on-call rotations'
                    ]
                },
                {
                    title: 'Multi-Cloud Architect / Senior Infrastructure Engineer',
                    company: 'Tata Consultancy Services',
                    location: 'Multiple Locations (Boston, Chicago, Dallas)',
                    dates: 'May 2007  Feb 2020',
                    bullets: [
                        'Cloud Architect  Harvard Pilgrim Health Care (Jun 2018  Feb 2020): Led cloud modernization for HIPAA/HITRUST-regulated AI/ML applications to AWS; implemented GPU-enabled EKS clusters with NFS-backed persistent storage; Jenkins/Ansible CI/CD pipelines; DevSecOps (HashiCorp Vault, SonarQube, OWASP); managed $6M infrastructure budget',
                        'Cloud Senior Engineer  CNA Insurance (May 2015  Jun 2018): Managed Kubernetes/Helm deployments on AWS; built reproducible K8s applications; automated provisioning with Ansible playbooks; Led cloud migrations to AWS, Azure, OpenStack; pioneered Docker/Kubernetes adoption (2013-2014); implemented CI/CD with Jenkins/Ansible',
                        'Solutions Architect  PwC (Jan 2011  Apr 2015): Led infrastructure deployments for 20+ facility buildouts including branch offices, call centers, and data centers; managed $15M+ annual budgets; Integrated Chef/Jenkins deployment pipelines; migrated VMware VMs to AWS (EC2, S3, ELB)',
                        'Middleware Engineer  Verizon, Owens Corning (May 2007  Jan 2011): Deep Linux/Unix administration with WebSphere/WebLogic middleware; JVM optimization, clustering, and HA configurations; Managed large-scale production systems on bare-metal serving millions of users; led capacity planning, performance testing, and 24x7 L3 operations'
                    ]
                }
            ],
            certifications: [
                'AWS Solutions Architect Professional',
                'Azure Solutions Architect Expert',
                'AWS ML Specialty',
                'Azure AI Engineer',
                'NVIDIA DLI Infrastructure',
                'CKA (Kubernetes)',
                'HashiCorp Terraform',
                'Databricks Certified',
                'TOGAF 9',
                'ITIL v4'
            ],
            education: {
                degree: 'Bachelor of Engineering in Mechanical Engineering',
                school: 'Acharya Nagarjuna University'
            }
        };

        // ============ COVER LETTER GENERATOR ============
        function generateCoverLetter(job) {
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const skillsList = Object.keys(USER_PROFILE.skills).slice(0, 4).join(', ');
            const exp = USER_PROFILE.experience[0];

            const coverLetter = `${USER_PROFILE.name}
${USER_PROFILE.location}
${USER_PROFILE.email} | ${USER_PROFILE.phone}
${USER_PROFILE.linkedin} | ${USER_PROFILE.website}

${today}

Hiring Manager
${job.company}
${job.location}

Dear Hiring Manager,

I am writing to express my strong interest in the ${job.title} position at ${job.company}. With ${USER_PROFILE.yearsExperience} years of experience in cloud infrastructure, platform engineering, and AI/ML systems, I am excited about the opportunity to contribute to your team.

${USER_PROFILE.summary}

Key qualifications that align with this role:

 ${exp.bullets[0]}
 ${exp.bullets[1]}
 ${exp.bullets[2]}
 ${exp.bullets[3]}

My technical expertise spans ${skillsList}, which directly aligns with the requirements for this position. I am particularly drawn to ${job.company}'s mission and the opportunity to work on ${job.department ? job.department + ' initiatives' : 'cutting-edge infrastructure challenges'}.

I am confident that my experience leading large-scale platform engineering initiatives, combined with my passion for building reliable and scalable systems, would make me a valuable addition to your team.

I would welcome the opportunity to discuss how my background and skills can contribute to ${job.company}'s continued success. Thank you for considering my application.

Sincerely,
${USER_PROFILE.name}
${USER_PROFILE.title}`;

            return coverLetter;
        }

        // ============ TAILORED RESUME GENERATOR ============
        function generateResume(job) {
            const jobTitle = job.title.toLowerCase();
            const jobDesc = (job.description || '').toLowerCase();

            // Determine which skills to highlight based on job
            let relevantSkillCategories = [];
            if (jobTitle.includes('ml') || jobTitle.includes('ai') || jobTitle.includes('machine learning') || jobDesc.includes('ml') || jobDesc.includes('machine learning')) {
                relevantSkillCategories.push('AI/ML Infrastructure', 'GPU/HPC Computing');
            }
            if (jobTitle.includes('sre') || jobTitle.includes('reliability') || jobDesc.includes('sre') || jobDesc.includes('reliability')) {
                relevantSkillCategories.push('SRE & Observability', 'Container Orchestration');
            }
            if (jobTitle.includes('devops') || jobDesc.includes('devops') || jobDesc.includes('ci/cd')) {
                relevantSkillCategories.push('Infrastructure as Code', 'Container Orchestration');
            }
            if (jobTitle.includes('cloud') || jobTitle.includes('architect') || jobDesc.includes('aws') || jobDesc.includes('azure')) {
                relevantSkillCategories.push('Cloud Platforms', 'Infrastructure as Code');
            }
            if (jobTitle.includes('platform') || jobDesc.includes('platform') || jobDesc.includes('kubernetes')) {
                relevantSkillCategories.push('Container Orchestration', 'Cloud Platforms');
            }
            if (jobTitle.includes('data') || jobDesc.includes('spark') || jobDesc.includes('kafka')) {
                relevantSkillCategories.push('Big Data & Streaming');
            }

            // Default skills if none matched
            if (relevantSkillCategories.length === 0) {
                relevantSkillCategories = ['Cloud Platforms', 'Container Orchestration', 'Infrastructure as Code', 'SRE & Observability'];
            }

            // Remove duplicates and limit to 6
            relevantSkillCategories = [...new Set(relevantSkillCategories)].slice(0, 6);

            // Build skills section
            let skillsSection = '';
            relevantSkillCategories.forEach(cat => {
                if (USER_PROFILE.skills[cat]) {
                    skillsSection += `${cat.toUpperCase()}\n${USER_PROFILE.skills[cat]}\n\n`;
                }
            });

            // Add remaining skills
            Object.keys(USER_PROFILE.skills).forEach(cat => {
                if (!relevantSkillCategories.includes(cat)) {
                    skillsSection += `${cat.toUpperCase()}\n${USER_PROFILE.skills[cat]}\n\n`;
                }
            });

            // Build experience section
            let experienceSection = '';
            USER_PROFILE.experience.forEach(exp => {
                experienceSection += `${exp.title}\n${exp.company} | ${exp.location} | ${exp.dates}\n`;
                exp.bullets.forEach(bullet => {
                    experienceSection += ` ${bullet}\n`;
                });
                experienceSection += '\n';
            });

            // Build resume
            const resume = `================================================================================
                              ${USER_PROFILE.name.toUpperCase()}
                         ${USER_PROFILE.title}
================================================================================

${USER_PROFILE.location} | ${USER_PROFILE.phone} | ${USER_PROFILE.email}
${USER_PROFILE.linkedin} | ${USER_PROFILE.github} | ${USER_PROFILE.website}

================================================================================
                           PROFESSIONAL SUMMARY
================================================================================

${USER_PROFILE.summary}

================================================================================
                            KEY ACHIEVEMENTS
================================================================================

${USER_PROFILE.keyMetrics.map(m => ` ${m.value} - ${m.label}`).join('\n')}

================================================================================
                          CORE TECHNICAL SKILLS
================================================================================
(Tailored for: ${job.title} at ${job.company})

${skillsSection}
================================================================================
                         PROFESSIONAL EXPERIENCE
================================================================================

${experienceSection}
================================================================================
                        EDUCATION & CERTIFICATIONS
================================================================================

${USER_PROFILE.education.degree}
${USER_PROFILE.education.school}

CERTIFICATIONS:
${USER_PROFILE.certifications.map(c => ` ${c}`).join('\n')}

================================================================================
                              END OF RESUME
        Generated for: ${job.title} at ${job.company}
        Date: ${new Date().toLocaleDateString()}
================================================================================
`;

            return resume;
        }

        // Download cover letter as Word document - TAILORED TO EACH JOB
        async function downloadCoverLetter(job) {
            const { Document, Packer, Paragraph, TextRun, AlignmentType, HeadingLevel } = docx;
            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const exp = USER_PROFILE.experience[0];

            // Parse the job description for tailoring
            const parsedJD = parseJobDescription(job);
            const toolsFromJD = parsedJD.allFoundTools.slice(0, 6).map(t => t.toUpperCase()).join(', ');
            const focusAreas = parsedJD.focusAreas.join(', ');

            // Select relevant bullets based on job focus
            let relevantBullets = [];
            if (parsedJD.focusAreas.includes('GPU/HPC') || parsedJD.focusAreas.includes('AI/ML')) {
                relevantBullets = [exp.bullets[0], exp.bullets[1], exp.bullets[2]]; // GPU, Serverless AI, Cloud FinOps
            } else if (parsedJD.focusAreas.includes('SRE')) {
                relevantBullets = [exp.bullets[0], exp.bullets[4], exp.bullets[5]]; // GPU uptime, Security, Leadership
            } else if (parsedJD.focusAreas.includes('Platform Engineering') || parsedJD.focusAreas.includes('DevOps')) {
                relevantBullets = [exp.bullets[3], exp.bullets[4], exp.bullets[2]]; // CI/CD, Security, FinOps
            } else {
                relevantBullets = [exp.bullets[0], exp.bullets[2], exp.bullets[3]]; // Default
            }

            const doc = new Document({
                sections: [{
                    properties: {},
                    children: [
                        // Header with contact info
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.name, bold: true, size: 28 })],
                            alignment: AlignmentType.LEFT
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.title, italics: true, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: `${USER_PROFILE.location} | ${USER_PROFILE.email} | ${USER_PROFILE.phone}`, size: 20 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: `${USER_PROFILE.linkedin} | ${USER_PROFILE.website}`, size: 20 })]
                        }),
                        new Paragraph({ children: [] }), // Empty line
                        // Date
                        new Paragraph({
                            children: [new TextRun({ text: today, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Recipient
                        new Paragraph({
                            children: [new TextRun({ text: 'Hiring Manager', size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: job.company, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: job.location, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Salutation
                        new Paragraph({
                            children: [new TextRun({ text: 'Dear Hiring Manager,', size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Body paragraph 1 - Tailored opening with job-specific focus
                        new Paragraph({
                            children: [new TextRun({
                                text: `I am writing to express my strong interest in the ${job.title} position at ${job.company}. With ${USER_PROFILE.yearsExperience} years of experience in ${focusAreas || 'cloud infrastructure, platform engineering, and AI/ML systems'}, I am excited about the opportunity to contribute to your team.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Body paragraph 2 - Mention specific technologies from JD
                        new Paragraph({
                            children: [new TextRun({
                                text: toolsFromJD
                                    ? `Your job description highlights the need for expertise in ${toolsFromJD}, which aligns directly with my experience. ${USER_PROFILE.summary}`
                                    : USER_PROFILE.summary,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Key qualifications header
                        new Paragraph({
                            children: [new TextRun({ text: 'Key qualifications that align with this role:', bold: true, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Bullet points - Selected based on job focus
                        new Paragraph({
                            children: [new TextRun({ text: ` ${relevantBullets[0]}`, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: ` ${relevantBullets[1]}`, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: ` ${relevantBullets[2]}`, size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        // Body paragraph 3 - Mention specific technologies from JD
                        new Paragraph({
                            children: [new TextRun({
                                text: toolsFromJD
                                    ? `My hands-on experience with ${toolsFromJD} directly aligns with the requirements for this position. I am particularly drawn to ${job.company}'s mission and the opportunity to work on ${focusAreas || 'cutting-edge infrastructure challenges'}.`
                                    : `My technical expertise in cloud infrastructure, Kubernetes, and platform engineering directly aligns with the requirements for this position. I am particularly drawn to ${job.company}'s mission and the opportunity to work on ${job.department ? job.department + ' initiatives' : 'cutting-edge infrastructure challenges'}.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Closing paragraph
                        new Paragraph({
                            children: [new TextRun({
                                text: `I am confident that my experience leading large-scale platform engineering initiatives, combined with my passion for building reliable and scalable systems, would make me a valuable addition to your team.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        new Paragraph({
                            children: [new TextRun({
                                text: `I would welcome the opportunity to discuss how my background and skills can contribute to ${job.company}'s continued success. Thank you for considering my application.`,
                                size: 22
                            })]
                        }),
                        new Paragraph({ children: [] }),
                        // Signature
                        new Paragraph({
                            children: [new TextRun({ text: 'Sincerely,', size: 22 })]
                        }),
                        new Paragraph({ children: [] }),
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.name, bold: true, size: 22 })]
                        }),
                        new Paragraph({
                            children: [new TextRun({ text: USER_PROFILE.title, size: 22 })]
                        })
                    ]
                }]
            });

            const blob = await Packer.toBlob(doc);
            saveAs(blob, `Cover_Letter_${job.company.replace(/[^a-zA-Z0-9]/g, '_')}_${job.title.replace(/[^a-zA-Z0-9]/g, '_').substring(0, 30)}.docx`);
        }

        // ============ JOB DESCRIPTION PARSER ============
        function parseJobDescription(job) {
            const desc = (job.description || '').toLowerCase();
            const title = (job.title || '').toLowerCase();

            // Extract tools/technologies mentioned in JD
            const allTools = {
                cloud: ['aws', 'azure', 'oracle cloud', 'oci', 'multi-cloud', 'hybrid cloud'],
                containers: ['kubernetes', 'k8s', 'docker', 'helm', 'istio', 'envoy', 'eks', 'aks', 'gke', 'openshift', 'rancher'],
                iac: ['terraform', 'pulumi', 'cloudformation', 'arm templates', 'bicep', 'ansible', 'puppet', 'chef', 'saltstack'],
                cicd: ['jenkins', 'github actions', 'gitlab ci', 'circleci', 'argocd', 'fluxcd', 'spinnaker', 'tekton'],
                monitoring: ['prometheus', 'grafana', 'datadog', 'splunk', 'elk', 'elasticsearch', 'new relic', 'dynatrace', 'opentelemetry'],
                gpu: ['gpu', 'cuda', 'nvidia', 'a100', 'v100', 'h100', 'dgx', 'slurm', 'hpc', 'tensorrt'],
                ml: ['pytorch', 'tensorflow', 'mlflow', 'kubeflow', 'sagemaker', 'ray', 'mlops', 'model serving', 'inference'],
                data: ['spark', 'kafka', 'hadoop', 'hdfs', 'flink', 'airflow', 'databricks', 'snowflake', 'redshift', 'bigquery'],
                languages: ['python', 'go', 'golang', 'java', 'bash', 'shell', 'rust', 'typescript'],
                security: ['vault', 'soc2', 'hipaa', 'fedramp', 'pci', 'iso 27001', 'devsecops', 'sast', 'dast', 'opa', 'trivy']
            };

            const foundTools = {};
            Object.keys(allTools).forEach(category => {
                foundTools[category] = allTools[category].filter(tool =>
                    desc.includes(tool) || title.includes(tool)
                );
            });

            // Extract key responsibilities patterns
            const responsibilities = [];
            const respPatterns = [
                /(?:responsible for|will be|you will|responsibilities include)[:\s]+([^.]+)/gi,
                /(?:design|build|develop|implement|manage|lead|architect|maintain|deploy|automate|optimize|scale)[^.]{10,80}/gi
            ];
            respPatterns.forEach(pattern => {
                const matches = desc.match(pattern);
                if (matches) {
                    matches.slice(0, 5).forEach(m => {
                        const clean = m.replace(/^(responsible for|will be|you will|responsibilities include)[:\s]+/i, '').trim();
                        if (clean.length > 20 && clean.length < 150) {
                            responsibilities.push(clean.charAt(0).toUpperCase() + clean.slice(1));
                        }
                    });
                }
            });

            // Extract requirements/qualifications
            const requirements = [];
            const reqPatterns = [
                /(\d+\+?\s*years?)[^.]*(?:experience|working)[^.]+/gi,
                /(?:experience with|expertise in|proficiency in|strong knowledge of)[:\s]+([^.]+)/gi,
                /(?:bachelor|master|phd|degree)[^.]+/gi
            ];
            reqPatterns.forEach(pattern => {
                const matches = desc.match(pattern);
                if (matches) {
                    matches.slice(0, 3).forEach(m => {
                        if (m.length > 15 && m.length < 150) {
                            requirements.push(m.trim());
                        }
                    });
                }
            });

            // Determine job focus areas
            const focusAreas = [];
            if (foundTools.gpu.length > 0 || desc.includes('hpc') || desc.includes('high performance')) focusAreas.push('GPU/HPC');
            if (foundTools.ml.length > 0 || desc.includes('machine learning') || desc.includes('ai ')) focusAreas.push('AI/ML');
            if (title.includes('sre') || desc.includes('reliability') || desc.includes('incident')) focusAreas.push('SRE');
            if (title.includes('platform') || desc.includes('platform engineering')) focusAreas.push('Platform Engineering');
            if (title.includes('devops') || desc.includes('devops')) focusAreas.push('DevOps');
            if (title.includes('architect') || desc.includes('architecture')) focusAreas.push('Architecture');
            if (foundTools.data.length > 0) focusAreas.push('Data Engineering');
            if (foundTools.security.length > 0) focusAreas.push('Security/Compliance');

            return {
                tools: foundTools,
                responsibilities: [...new Set(responsibilities)].slice(0, 5),
                requirements: [...new Set(requirements)].slice(0, 4),
                focusAreas: [...new Set(focusAreas)],
                allFoundTools: Object.values(foundTools).flat().filter(t => t.length > 0)
            };
        }

        // Generate job summary from parsed JD
        function generateJobSummary(job) {
            const parsed = parseJobDescription(job);
            const tools = parsed.allFoundTools.slice(0, 8);
            const focus = parsed.focusAreas.slice(0, 3);

            let summary = '';
            if (focus.length > 0) {
                summary += `Focus: ${focus.join(', ')}. `;
            }
            if (tools.length > 0) {
                summary += `Tools: ${tools.map(t => t.toUpperCase()).join(', ')}`;
            }
            if (summary.length === 0) {
                summary = job.description?.substring(0, 150) || 'View job for details';
            }
            return summary.substring(0, 200);
        }

        // Download resume as Word document - TAILORED TO EACH JOB
        async function downloadResume(job) {
            const { Document, Packer, Paragraph, TextRun, AlignmentType, BorderStyle, HeadingLevel, TableOfContents } = docx;

            // Parse the job description
            const parsedJD = parseJobDescription(job);
            const jobTitle = job.title.toLowerCase();
            const jobDesc = (job.description || '').toLowerCase();

            // Determine which skills to highlight based on parsed JD
            let relevantSkillCategories = [];

            // GPU/HPC focus
            if (parsedJD.tools.gpu.length > 0 || parsedJD.focusAreas.includes('GPU/HPC')) {
                relevantSkillCategories.push('GPU/HPC Computing', 'AI/ML Infrastructure');
            }
            // AI/ML focus
            if (parsedJD.tools.ml.length > 0 || parsedJD.focusAreas.includes('AI/ML')) {
                relevantSkillCategories.push('AI/ML Infrastructure', 'GPU/HPC Computing');
            }
            // SRE focus
            if (parsedJD.focusAreas.includes('SRE') || parsedJD.tools.monitoring.length > 0) {
                relevantSkillCategories.push('SRE & Observability', 'Container Orchestration');
            }
            // Platform/DevOps focus
            if (parsedJD.focusAreas.includes('Platform Engineering') || parsedJD.focusAreas.includes('DevOps')) {
                relevantSkillCategories.push('Container Orchestration', 'Infrastructure as Code');
            }
            // Cloud focus
            if (parsedJD.tools.cloud.length > 0 || parsedJD.focusAreas.includes('Architecture')) {
                relevantSkillCategories.push('Cloud Platforms', 'Infrastructure as Code');
            }
            // Data focus
            if (parsedJD.tools.data.length > 0 || parsedJD.focusAreas.includes('Data Engineering')) {
                relevantSkillCategories.push('Big Data & Streaming', 'Cloud Platforms');
            }
            // Security focus
            if (parsedJD.tools.security.length > 0 || parsedJD.focusAreas.includes('Security/Compliance')) {
                relevantSkillCategories.push('Security & Compliance', 'Infrastructure as Code');
            }

            // Default skills if none matched
            if (relevantSkillCategories.length === 0) {
                relevantSkillCategories = ['Cloud Platforms', 'Container Orchestration', 'Infrastructure as Code', 'SRE & Observability'];
            }

            // Remove duplicates and limit to 6
            relevantSkillCategories = [...new Set(relevantSkillCategories)].slice(0, 6);

            // Build document children
            const children = [];

            // Header - Name
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.name.toUpperCase(), bold: true, size: 36 })],
                alignment: AlignmentType.CENTER,
                spacing: { after: 100 }
            }));

            // Title
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.title, size: 24, color: '666666' })],
                alignment: AlignmentType.CENTER,
                spacing: { after: 200 }
            }));

            // Contact info
            children.push(new Paragraph({
                children: [new TextRun({ text: `${USER_PROFILE.location} | ${USER_PROFILE.phone} | ${USER_PROFILE.email}`, size: 20 })],
                alignment: AlignmentType.CENTER
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: `${USER_PROFILE.linkedin} | ${USER_PROFILE.github} | ${USER_PROFILE.website}`, size: 20 })],
                alignment: AlignmentType.CENTER,
                spacing: { after: 300 }
            }));

            // Section: Professional Summary - Tailored to this job
            children.push(new Paragraph({
                children: [new TextRun({ text: 'PROFESSIONAL SUMMARY', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));

            // Create tailored summary based on job focus
            let tailoredSummary = USER_PROFILE.summary;
            if (parsedJD.focusAreas.includes('GPU/HPC') || parsedJD.focusAreas.includes('AI/ML')) {
                tailoredSummary = `Distinguished Cloud AI Architect with 18+ years building GPU compute platforms and AI/ML infrastructure at scale. Expert in Slurm cluster management, NVIDIA GPU scheduling (A100/V100/DGX), Kubernetes orchestration, and distributed ML training. ${parsedJD.allFoundTools.length > 0 ? 'Proven expertise in ' + parsedJD.allFoundTools.slice(0, 5).join(', ').toUpperCase() + '.' : ''} Led teams managing $15M+ budgets delivering $8M+ in cost savings.`;
            } else if (parsedJD.focusAreas.includes('SRE')) {
                tailoredSummary = `Senior Site Reliability Engineer and Platform Leader with 18+ years ensuring 99.97% uptime for mission-critical systems at planetary scale. Expert in SLI/SLO/SLA implementation, incident response, chaos engineering, and observability (Prometheus, Grafana, Datadog). ${parsedJD.allFoundTools.length > 0 ? 'Deep experience with ' + parsedJD.allFoundTools.slice(0, 5).join(', ').toUpperCase() + '.' : ''} Led 24x7 on-call rotations serving 10M+ users across 15+ regions.`;
            } else if (parsedJD.focusAreas.includes('Platform Engineering')) {
                tailoredSummary = `Platform Engineering Leader with 18+ years building developer platforms and infrastructure automation at scale. Expert in Kubernetes (EKS/AKS), Terraform IaC, GitOps (ArgoCD/FluxCD), and CI/CD pipelines. ${parsedJD.allFoundTools.length > 0 ? 'Proven expertise in ' + parsedJD.allFoundTools.slice(0, 5).join(', ').toUpperCase() + '.' : ''} Reduced deployment time 95% and cloud costs 73% through automation and optimization.`;
            }
            children.push(new Paragraph({
                children: [new TextRun({ text: tailoredSummary, size: 22 })],
                spacing: { after: 200 }
            }));

            // Section: JOB REQUIREMENTS MATCH (from parsed JD)
            if (parsedJD.allFoundTools.length > 0 || parsedJD.focusAreas.length > 0) {
                children.push(new Paragraph({
                    children: [new TextRun({ text: 'JOB REQUIREMENTS ALIGNMENT', bold: true, size: 24, color: '16a34a' })],
                    border: { bottom: { color: '16a34a', size: 6, style: BorderStyle.SINGLE } },
                    spacing: { before: 200, after: 100 }
                }));
                children.push(new Paragraph({
                    children: [new TextRun({ text: `Matching skills for: ${job.title} at ${job.company}`, italics: true, size: 18, color: '888888' })],
                    spacing: { after: 80 }
                }));

                // Tools from JD that I have
                if (parsedJD.allFoundTools.length > 0) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: ' Required Technologies: ', bold: true, size: 22, color: '16a34a' }),
                            new TextRun({ text: parsedJD.allFoundTools.map(t => t.toUpperCase()).join(', '), size: 22 })
                        ],
                        spacing: { after: 60 }
                    }));
                }

                // Focus areas matched
                if (parsedJD.focusAreas.length > 0) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: ' Domain Expertise: ', bold: true, size: 22, color: '16a34a' }),
                            new TextRun({ text: parsedJD.focusAreas.join(', '), size: 22 })
                        ],
                        spacing: { after: 60 }
                    }));
                }

                // Key responsibilities I can fulfill
                if (parsedJD.responsibilities.length > 0) {
                    children.push(new Paragraph({
                        children: [new TextRun({ text: ' Key Responsibilities (from JD):', bold: true, size: 22, color: '16a34a' })],
                        spacing: { before: 80, after: 40 }
                    }));
                    parsedJD.responsibilities.slice(0, 4).forEach(resp => {
                        children.push(new Paragraph({
                            children: [new TextRun({ text: `   ${resp}`, size: 20 })],
                            spacing: { after: 30 }
                        }));
                    });
                }

                children.push(new Paragraph({ children: [], spacing: { after: 150 } }));
            }

            // Section: Key Achievements
            children.push(new Paragraph({
                children: [new TextRun({ text: 'KEY ACHIEVEMENTS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            USER_PROFILE.keyMetrics.forEach(m => {
                children.push(new Paragraph({
                    children: [
                        new TextRun({ text: ` ${m.value}`, bold: true, size: 22 }),
                        new TextRun({ text: ` - ${m.label}`, size: 22 })
                    ]
                }));
            });
            children.push(new Paragraph({ children: [], spacing: { after: 200 } }));

            // Section: Core Technical Skills (tailored)
            children.push(new Paragraph({
                children: [new TextRun({ text: 'CORE TECHNICAL SKILLS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: `(Tailored for: ${job.title} at ${job.company})`, italics: true, size: 18, color: '888888' })],
                spacing: { after: 100 }
            }));

            // Prioritized skills first
            relevantSkillCategories.forEach(cat => {
                if (USER_PROFILE.skills[cat]) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: `${cat}: `, bold: true, size: 22 }),
                            new TextRun({ text: USER_PROFILE.skills[cat], size: 22 })
                        ],
                        spacing: { after: 80 }
                    }));
                }
            });
            // Remaining skills
            Object.keys(USER_PROFILE.skills).forEach(cat => {
                if (!relevantSkillCategories.includes(cat)) {
                    children.push(new Paragraph({
                        children: [
                            new TextRun({ text: `${cat}: `, bold: true, size: 22 }),
                            new TextRun({ text: USER_PROFILE.skills[cat], size: 22 })
                        ],
                        spacing: { after: 80 }
                    }));
                }
            });
            children.push(new Paragraph({ children: [], spacing: { after: 200 } }));

            // Section: Professional Experience
            children.push(new Paragraph({
                children: [new TextRun({ text: 'PROFESSIONAL EXPERIENCE', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));

            USER_PROFILE.experience.forEach(exp => {
                // Job title - bold for ATS
                children.push(new Paragraph({
                    children: [new TextRun({ text: exp.title, bold: true, size: 24 })],
                    spacing: { before: 200 }
                }));
                // Company, location, dates - clear separation for ATS parsing
                children.push(new Paragraph({
                    children: [
                        new TextRun({ text: exp.company, bold: true, size: 22 }),
                        new TextRun({ text: ` | ${exp.location} | `, size: 22, color: '666666' }),
                        new TextRun({ text: exp.dates, size: 22, color: '666666' })
                    ]
                }));
                // All bullets - full text for ATS keyword scanning
                exp.bullets.forEach(bullet => {
                    children.push(new Paragraph({
                        children: [new TextRun({ text: ` ${bullet}`, size: 21 })],
                        spacing: { before: 60, after: 40 }
                    }));
                });
                // Add spacing between jobs
                children.push(new Paragraph({ children: [], spacing: { after: 100 } }));
            });
            children.push(new Paragraph({ children: [], spacing: { after: 100 } }));

            // Section: ATS Keywords (hidden but parseable)
            children.push(new Paragraph({
                children: [new TextRun({ text: 'TECHNICAL KEYWORDS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            // Build ATS keyword string from job and profile
            const atsKeywords = [
                // From job
                job.title,
                // Core skills
                'Cloud Architect', 'Platform Engineer', 'Site Reliability Engineer', 'SRE', 'DevOps', 'Infrastructure Engineer',
                'GPU', 'HPC', 'Slurm', 'NVIDIA', 'A100', 'V100', 'DGX', 'CUDA', 'TensorRT',
                'Kubernetes', 'K8s', 'EKS', 'AKS', 'Docker', 'Helm', 'Istio', 'ArgoCD', 'FluxCD', 'GitOps',
                'AWS', 'Azure', 'Multi-Cloud', 'Hybrid Cloud',
                'Terraform', 'Ansible', 'CloudFormation', 'Infrastructure as Code', 'IaC',
                'CI/CD', 'Jenkins', 'GitHub Actions', 'GitLab CI',
                'Python', 'Go', 'Golang', 'Bash', 'Shell Scripting',
                'Prometheus', 'Grafana', 'Datadog', 'ELK', 'Observability', 'Monitoring',
                'AI/ML', 'Machine Learning', 'MLOps', 'PyTorch', 'TensorFlow', 'SageMaker', 'MLflow', 'Kubeflow',
                'Spark', 'Kafka', 'Hadoop', 'Big Data', 'Data Engineering',
                'SOC2', 'HIPAA', 'FedRAMP', 'HITRUST', 'Security', 'Compliance', 'DevSecOps',
                'Microservices', 'Distributed Systems', 'High Availability', 'Scalability',
                'Leadership', 'Team Management', 'Budget Management', 'Incident Response', 'On-Call'
            ].join(', ');
            children.push(new Paragraph({
                children: [new TextRun({ text: atsKeywords, size: 18, color: '888888' })],
                spacing: { after: 100 }
            }));

            // Section: Education & Certifications
            children.push(new Paragraph({
                children: [new TextRun({ text: 'EDUCATION & CERTIFICATIONS', bold: true, size: 24, color: '2563eb' })],
                border: { bottom: { color: '2563eb', size: 6, style: BorderStyle.SINGLE } },
                spacing: { before: 200, after: 100 }
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.education.degree, bold: true, size: 22 })]
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: USER_PROFILE.education.school, size: 22 })],
                spacing: { after: 150 }
            }));
            children.push(new Paragraph({
                children: [new TextRun({ text: 'Certifications:', bold: true, size: 22 })]
            }));
            USER_PROFILE.certifications.forEach(cert => {
                children.push(new Paragraph({
                    children: [new TextRun({ text: ` ${cert}`, size: 22 })]
                }));
            });

            const doc = new Document({
                sections: [{
                    properties: {},
                    children: children
                }]
            });

            const blob = await Packer.toBlob(doc);
            saveAs(blob, `Resume_${USER_PROFILE.name.replace(/\s+/g, '_')}_${job.company.replace(/[^a-zA-Z0-9]/g, '_')}.docx`);
        }

        // Store jobs globally for cover letter/resume access
        let jobsMap = {};

        // ============ COMPANY LIST ============
        const COMPANIES = [
            // ===== AI/ML Companies =====
            { name: 'Anthropic', board: 'anthropic', type: 'greenhouse', logo: 'https://logo.clearbit.com/anthropic.com' },
            { name: 'Google DeepMind', board: 'deepmind', type: 'greenhouse', logo: 'https://logo.clearbit.com/deepmind.com' },
            { name: 'Cohere', board: 'cohere', type: 'lever', logo: 'https://logo.clearbit.com/cohere.com' },
            { name: 'Hugging Face', board: 'huggingface', type: 'greenhouse', logo: 'https://logo.clearbit.com/huggingface.co' },
            { name: 'Runway', board: 'runwayml', type: 'greenhouse', logo: 'https://logo.clearbit.com/runwayml.com' },
            { name: 'Stability AI', board: 'stabilityai', type: 'greenhouse', logo: 'https://logo.clearbit.com/stability.ai' },
            { name: 'Mistral AI', board: 'mistral', type: 'greenhouse', logo: 'https://logo.clearbit.com/mistral.ai' },
            { name: 'Character AI', board: 'character', type: 'greenhouse', logo: 'https://logo.clearbit.com/character.ai' },
            { name: 'Perplexity', board: 'perplexityai', type: 'greenhouse', logo: 'https://logo.clearbit.com/perplexity.ai' },
            { name: 'Together AI', board: 'togetherai', type: 'lever', logo: 'https://logo.clearbit.com/together.ai' },
            { name: 'Weights & Biases', board: 'wandb', type: 'lever', logo: 'https://logo.clearbit.com/wandb.com' },
            { name: 'Anyscale', board: 'anyscale', type: 'lever', logo: 'https://logo.clearbit.com/anyscale.com' },
            { name: 'Modal', board: 'modal', type: 'lever', logo: 'https://logo.clearbit.com/modal.com' },
            { name: 'Replicate', board: 'replicate', type: 'lever', logo: 'https://logo.clearbit.com/replicate.com' },

            // ===== GPU/AI Infrastructure =====
            { name: 'CoreWeave', board: 'coreweave', type: 'greenhouse', logo: 'https://logo.clearbit.com/coreweave.com' },
            { name: 'Lambda Labs', board: 'lambdalabs', type: 'lever', logo: 'https://logo.clearbit.com/lambdalabs.com' },
            { name: 'Crusoe Energy', board: 'crusoe', type: 'greenhouse', logo: 'https://logo.clearbit.com/crusoeenergy.com' },
            { name: 'Applied Intuition', board: 'appliedintuition', type: 'greenhouse', logo: 'https://logo.clearbit.com/appliedintuition.com' },

            // ===== E-Commerce Giants =====
            { name: 'Coupang', board: 'coupang', type: 'greenhouse', logo: 'https://logo.clearbit.com/coupang.com' },
            { name: 'Mercari', board: 'mercari', type: 'greenhouse', logo: 'https://logo.clearbit.com/mercari.com' },
            { name: 'Wish', board: 'wish', type: 'greenhouse', logo: 'https://logo.clearbit.com/wish.com' },
            { name: 'Etsy', board: 'etsy', type: 'greenhouse', logo: 'https://logo.clearbit.com/etsy.com' },
            { name: 'Wayfair', board: 'wayfair', type: 'greenhouse', logo: 'https://logo.clearbit.com/wayfair.com' },
            { name: 'Chewy', board: 'chewy', type: 'greenhouse', logo: 'https://logo.clearbit.com/chewy.com' },

            // ===== Big Tech with Greenhouse/Lever =====
            { name: 'Stripe', board: 'stripe', type: 'greenhouse', logo: 'https://logo.clearbit.com/stripe.com' },
            { name: 'Airbnb', board: 'airbnb', type: 'greenhouse', logo: 'https://logo.clearbit.com/airbnb.com' },
            { name: 'Netflix', board: 'netflix', type: 'lever', logo: 'https://logo.clearbit.com/netflix.com' },
            { name: 'Discord', board: 'discord', type: 'greenhouse', logo: 'https://logo.clearbit.com/discord.com' },
            { name: 'Figma', board: 'figma', type: 'greenhouse', logo: 'https://logo.clearbit.com/figma.com' },
            { name: 'Notion', board: 'notion', type: 'greenhouse', logo: 'https://logo.clearbit.com/notion.so' },
            { name: 'Airtable', board: 'airtable', type: 'greenhouse', logo: 'https://logo.clearbit.com/airtable.com' },
            { name: 'Coinbase', board: 'coinbase', type: 'greenhouse', logo: 'https://logo.clearbit.com/coinbase.com' },
            { name: 'Twitch', board: 'twitch', type: 'greenhouse', logo: 'https://logo.clearbit.com/twitch.tv' },
            { name: 'DoorDash', board: 'doordash', type: 'greenhouse', logo: 'https://logo.clearbit.com/doordash.com' },
            { name: 'Instacart', board: 'instacart', type: 'greenhouse', logo: 'https://logo.clearbit.com/instacart.com' },
            { name: 'Plaid', board: 'plaid', type: 'greenhouse', logo: 'https://logo.clearbit.com/plaid.com' },
            { name: 'Square', board: 'square', type: 'greenhouse', logo: 'https://logo.clearbit.com/squareup.com' },
            { name: 'Robinhood', board: 'robinhood', type: 'greenhouse', logo: 'https://logo.clearbit.com/robinhood.com' },

            // ===== Data/Cloud Infrastructure =====
            { name: 'Rubrik', board: 'rubrik', type: 'greenhouse', logo: 'https://logo.clearbit.com/rubrik.com' },
            { name: 'Hammerspace', board: 'hammerspace', type: 'greenhouse', logo: 'https://logo.clearbit.com/hammerspace.com' },
            { name: 'Databricks', board: 'databricks', type: 'greenhouse', logo: 'https://logo.clearbit.com/databricks.com' },
            { name: 'Snowflake', board: 'snowflakecomputing', type: 'greenhouse', logo: 'https://logo.clearbit.com/snowflake.com' },
            { name: 'HashiCorp', board: 'hashicorp', type: 'greenhouse', logo: 'https://logo.clearbit.com/hashicorp.com' },
            { name: 'GitLab', board: 'gitlab', type: 'greenhouse', logo: 'https://logo.clearbit.com/gitlab.com' },
            { name: 'Confluent', board: 'confluent', type: 'greenhouse', logo: 'https://logo.clearbit.com/confluent.io' },
            { name: 'MongoDB', board: 'mongodb', type: 'greenhouse', logo: 'https://logo.clearbit.com/mongodb.com' },
            { name: 'Elastic', board: 'elastic', type: 'greenhouse', logo: 'https://logo.clearbit.com/elastic.co' },
            { name: 'Cloudflare', board: 'cloudflare', type: 'lever', logo: 'https://logo.clearbit.com/cloudflare.com' },
            { name: 'DigitalOcean', board: 'digitalocean98', type: 'lever', logo: 'https://logo.clearbit.com/digitalocean.com' },
            { name: 'Vercel', board: 'vercel', type: 'lever', logo: 'https://logo.clearbit.com/vercel.com' },
            { name: 'Supabase', board: 'supabase', type: 'lever', logo: 'https://logo.clearbit.com/supabase.com' },
            { name: 'Cockroach Labs', board: 'cockroach-labs', type: 'lever', logo: 'https://logo.clearbit.com/cockroachlabs.com' },

            // ===== Observability/DevOps =====
            { name: 'Datadog', board: 'datadog', type: 'greenhouse', logo: 'https://logo.clearbit.com/datadoghq.com' },
            { name: 'PagerDuty', board: 'pagerduty', type: 'greenhouse', logo: 'https://logo.clearbit.com/pagerduty.com' },
            { name: 'Splunk', board: 'splunk', type: 'greenhouse', logo: 'https://logo.clearbit.com/splunk.com' },
            { name: 'New Relic', board: 'newrelic', type: 'greenhouse', logo: 'https://logo.clearbit.com/newrelic.com' },
            { name: 'Grafana Labs', board: 'grafanalabs', type: 'lever', logo: 'https://logo.clearbit.com/grafana.com' },
            { name: 'Sumo Logic', board: 'sumologic', type: 'lever', logo: 'https://logo.clearbit.com/sumologic.com' },
            { name: 'CircleCI', board: 'circleci', type: 'lever', logo: 'https://logo.clearbit.com/circleci.com' },
            { name: 'LaunchDarkly', board: 'launchdarkly', type: 'lever', logo: 'https://logo.clearbit.com/launchdarkly.com' },

            // ===== Security =====
            { name: 'Okta', board: 'okta', type: 'greenhouse', logo: 'https://logo.clearbit.com/okta.com' },
            { name: 'CrowdStrike', board: 'crowdstrike', type: 'greenhouse', logo: 'https://logo.clearbit.com/crowdstrike.com' },
            { name: 'Zscaler', board: 'zscaler', type: 'greenhouse', logo: 'https://logo.clearbit.com/zscaler.com' },
            { name: 'SentinelOne', board: 'sentinelone', type: 'greenhouse', logo: 'https://logo.clearbit.com/sentinelone.com' },
            { name: 'Lacework', board: 'lacework', type: 'greenhouse', logo: 'https://logo.clearbit.com/lacework.com' },
            { name: 'Snyk', board: 'snyk', type: 'greenhouse', logo: 'https://logo.clearbit.com/snyk.io' },
            { name: 'Wiz', board: 'wizinc', type: 'greenhouse', logo: 'https://logo.clearbit.com/wiz.io' },
            { name: '1Password', board: '1password', type: 'greenhouse', logo: 'https://logo.clearbit.com/1password.com' },

            // ===== Defense/Aerospace Tech =====
            { name: 'Shield AI', board: 'shieldai', type: 'greenhouse', logo: 'https://logo.clearbit.com/shield.ai' },

            // ===== Gaming =====
            { name: 'Roblox', board: 'roblox', type: 'greenhouse', logo: 'https://logo.clearbit.com/roblox.com' },

            // ===== Unicorns & Late-Stage Startups =====
            { name: 'Uber', board: 'uber', type: 'greenhouse', logo: 'https://logo.clearbit.com/uber.com' },
            { name: 'Lyft', board: 'lyft', type: 'greenhouse', logo: 'https://logo.clearbit.com/lyft.com' },
            { name: 'Pinterest', board: 'pinterest', type: 'greenhouse', logo: 'https://logo.clearbit.com/pinterest.com' },
            { name: 'Snap', board: 'snap', type: 'greenhouse', logo: 'https://logo.clearbit.com/snap.com' },
            { name: 'Reddit', board: 'reddit', type: 'greenhouse', logo: 'https://logo.clearbit.com/reddit.com' },
            { name: 'Spotify', board: 'spotify', type: 'greenhouse', logo: 'https://logo.clearbit.com/spotify.com' },
            { name: 'Dropbox', board: 'dropbox', type: 'greenhouse', logo: 'https://logo.clearbit.com/dropbox.com' },
            { name: 'Asana', board: 'asana', type: 'greenhouse', logo: 'https://logo.clearbit.com/asana.com' },
            { name: 'Palantir', board: 'palantir', type: 'greenhouse', logo: 'https://logo.clearbit.com/palantir.com' },
            { name: 'Zoom', board: 'zoom', type: 'greenhouse', logo: 'https://logo.clearbit.com/zoom.us' },
            { name: 'DocuSign', board: 'docusign', type: 'greenhouse', logo: 'https://logo.clearbit.com/docusign.com' },
            { name: 'Slack', board: 'slack', type: 'greenhouse', logo: 'https://logo.clearbit.com/slack.com' },
            { name: 'Atlassian', board: 'atlassian', type: 'greenhouse', logo: 'https://logo.clearbit.com/atlassian.com' },
            { name: 'Shopify', board: 'shopify', type: 'greenhouse', logo: 'https://logo.clearbit.com/shopify.com' },
            { name: 'Block', board: 'block', type: 'greenhouse', logo: 'https://logo.clearbit.com/block.xyz' },
            { name: 'Toast', board: 'toast', type: 'greenhouse', logo: 'https://logo.clearbit.com/toasttab.com' },

            // ===== Enterprise/B2B =====
            { name: 'ServiceNow', board: 'servicenow', type: 'greenhouse', logo: 'https://logo.clearbit.com/servicenow.com' },
            { name: 'Workday', board: 'workday', type: 'greenhouse', logo: 'https://logo.clearbit.com/workday.com' },
            { name: 'Zendesk', board: 'zendesk', type: 'greenhouse', logo: 'https://logo.clearbit.com/zendesk.com' },
            { name: 'HubSpot', board: 'hubspot', type: 'greenhouse', logo: 'https://logo.clearbit.com/hubspot.com' },
            { name: 'Amplitude', board: 'amplitude', type: 'greenhouse', logo: 'https://logo.clearbit.com/amplitude.com' },
            { name: 'Mixpanel', board: 'mixpanel', type: 'greenhouse', logo: 'https://logo.clearbit.com/mixpanel.com' },
            { name: 'Segment', board: 'segment', type: 'lever', logo: 'https://logo.clearbit.com/segment.com' },
            { name: 'Fivetran', board: 'fivetran', type: 'greenhouse', logo: 'https://logo.clearbit.com/fivetran.com' },
            { name: 'dbt Labs', board: 'daboratorieslabs', type: 'greenhouse', logo: 'https://logo.clearbit.com/getdbt.com' },
            { name: 'Starburst', board: 'starburstdata', type: 'greenhouse', logo: 'https://logo.clearbit.com/starburst.io' },

            // ===== Fintech =====
            { name: 'Ramp', board: 'ramp', type: 'greenhouse', logo: 'https://logo.clearbit.com/ramp.com' },
            { name: 'Brex', board: 'brex', type: 'greenhouse', logo: 'https://logo.clearbit.com/brex.com' },
            { name: 'Rippling', board: 'rippling', type: 'greenhouse', logo: 'https://logo.clearbit.com/rippling.com' },
            { name: 'Gusto', board: 'gusto', type: 'greenhouse', logo: 'https://logo.clearbit.com/gusto.com' },
            { name: 'Chime', board: 'chime', type: 'greenhouse', logo: 'https://logo.clearbit.com/chime.com' },
            { name: 'Affirm', board: 'affirm', type: 'greenhouse', logo: 'https://logo.clearbit.com/affirm.com' },
            { name: 'Klarna', board: 'klarna', type: 'greenhouse', logo: 'https://logo.clearbit.com/klarna.com' },
            { name: 'Marqeta', board: 'marqeta', type: 'greenhouse', logo: 'https://logo.clearbit.com/marqeta.com' },

            // ===== Autonomous/Robotics =====
            { name: 'Waymo', board: 'waymo', type: 'greenhouse', logo: 'https://logo.clearbit.com/waymo.com' },
            { name: 'Cruise', board: 'cruise', type: 'greenhouse', logo: 'https://logo.clearbit.com/getcruise.com' },
            { name: 'Aurora', board: 'aurora', type: 'greenhouse', logo: 'https://logo.clearbit.com/aurora.tech' },
            { name: 'Nuro', board: 'nuro', type: 'greenhouse', logo: 'https://logo.clearbit.com/nuro.ai' },
            { name: 'Zoox', board: 'zoox', type: 'greenhouse', logo: 'https://logo.clearbit.com/zoox.com' },
            { name: 'Figure', board: 'figureai', type: 'greenhouse', logo: 'https://logo.clearbit.com/figure.ai' },

            // ===== Other Tech =====
            { name: 'Twilio', board: 'twilio', type: 'lever', logo: 'https://logo.clearbit.com/twilio.com' },
            { name: 'Auth0', board: 'auth0', type: 'lever', logo: 'https://logo.clearbit.com/auth0.com' },
            { name: 'Miro', board: 'miro', type: 'lever', logo: 'https://logo.clearbit.com/miro.com' },
            { name: 'Webflow', board: 'webflow', type: 'lever', logo: 'https://logo.clearbit.com/webflow.com' },
            { name: 'Linear', board: 'linear', type: 'lever', logo: 'https://logo.clearbit.com/linear.app' },
            { name: 'Retool', board: 'retool', type: 'lever', logo: 'https://logo.clearbit.com/retool.com' },
            { name: 'Faire', board: 'faire', type: 'greenhouse', logo: 'https://logo.clearbit.com/faire.com' },
            { name: 'Flexport', board: 'flexport', type: 'greenhouse', logo: 'https://logo.clearbit.com/flexport.com' },
            { name: 'Canva', board: 'canva', type: 'greenhouse', logo: 'https://logo.clearbit.com/canva.com' },
            { name: 'Figma', board: 'figma', type: 'greenhouse', logo: 'https://logo.clearbit.com/figma.com' },
            { name: 'Loom', board: 'loom', type: 'greenhouse', logo: 'https://logo.clearbit.com/loom.com' },
            { name: 'Calendly', board: 'calendly', type: 'greenhouse', logo: 'https://logo.clearbit.com/calendly.com' },

            // ===== Emerging AI Startups =====
            { name: 'xAI', board: 'xai', type: 'greenhouse', logo: 'https://logo.clearbit.com/x.ai' },
            { name: 'Inflection AI', board: 'inflectionai', type: 'greenhouse', logo: 'https://logo.clearbit.com/inflection.ai' },
            { name: 'Adept AI', board: 'adept', type: 'lever', logo: 'https://logo.clearbit.com/adept.ai' },
            { name: 'Midjourney', board: 'midjourney', type: 'lever', logo: 'https://logo.clearbit.com/midjourney.com' },
            { name: 'Jasper AI', board: 'jasper', type: 'greenhouse', logo: 'https://logo.clearbit.com/jasper.ai' },
            { name: 'Writer', board: 'writer', type: 'greenhouse', logo: 'https://logo.clearbit.com/writer.com' },
            { name: 'Glean', board: 'glaboratories', type: 'greenhouse', logo: 'https://logo.clearbit.com/glean.com' },

            // ===== Enterprise Software =====
            { name: 'SAP', board: 'sap', type: 'greenhouse', logo: 'https://logo.clearbit.com/sap.com' },
            { name: 'Adobe', board: 'adobe', type: 'greenhouse', logo: 'https://logo.clearbit.com/adobe.com' },
            { name: 'VMware', board: 'vmware', type: 'greenhouse', logo: 'https://logo.clearbit.com/vmware.com' },
            { name: 'Nutanix', board: 'nutanix', type: 'greenhouse', logo: 'https://logo.clearbit.com/nutanix.com' },
            { name: 'Palo Alto Networks', board: 'paloaltonetworks', type: 'greenhouse', logo: 'https://logo.clearbit.com/paloaltonetworks.com' },
            { name: 'Fortinet', board: 'fortinet', type: 'greenhouse', logo: 'https://logo.clearbit.com/fortinet.com' },
            { name: 'Pure Storage', board: 'purestorage', type: 'lever', logo: 'https://logo.clearbit.com/purestorage.com' },
            { name: 'NetApp', board: 'netapp', type: 'greenhouse', logo: 'https://logo.clearbit.com/netapp.com' },

            // ===== Semiconductors & Hardware =====
            { name: 'Qualcomm', board: 'qualcomm', type: 'greenhouse', logo: 'https://logo.clearbit.com/qualcomm.com' },
            { name: 'Marvell', board: 'marvell', type: 'greenhouse', logo: 'https://logo.clearbit.com/marvell.com' },
            { name: 'Broadcom', board: 'broadcom', type: 'greenhouse', logo: 'https://logo.clearbit.com/broadcom.com' },
            { name: 'SambaNova', board: 'sambanovasystems', type: 'lever', logo: 'https://logo.clearbit.com/sambanova.ai' },

            // ===== Healthcare Tech =====
            { name: 'Veeva Systems', board: 'veeva', type: 'greenhouse', logo: 'https://logo.clearbit.com/veeva.com' },
            { name: 'Oscar Health', board: 'oscar', type: 'greenhouse', logo: 'https://logo.clearbit.com/hioscar.com' },
            { name: 'Ro', board: 'ro', type: 'greenhouse', logo: 'https://logo.clearbit.com/ro.co' },
            { name: 'Tempus', board: 'tempus', type: 'greenhouse', logo: 'https://logo.clearbit.com/tempus.com' },
            { name: 'Flatiron Health', board: 'flatironhealth', type: 'greenhouse', logo: 'https://logo.clearbit.com/flatiron.com' },

            // ===== Payments & Fintech =====
            { name: 'PayPal', board: 'paypal', type: 'greenhouse', logo: 'https://logo.clearbit.com/paypal.com' },
            { name: 'Adyen', board: 'adyen', type: 'greenhouse', logo: 'https://logo.clearbit.com/adyen.com' },
            { name: 'Bill.com', board: 'billcom', type: 'greenhouse', logo: 'https://logo.clearbit.com/bill.com' },
            { name: 'Checkout.com', board: 'checkout', type: 'greenhouse', logo: 'https://logo.clearbit.com/checkout.com' },
            { name: 'Revolut', board: 'revolut', type: 'lever', logo: 'https://logo.clearbit.com/revolut.com' },

            // ===== Gaming & Entertainment =====
            { name: 'Roblox', board: 'roblox', type: 'greenhouse', logo: 'https://logo.clearbit.com/roblox.com' },
            { name: 'Epic Games', board: 'epicgames', type: 'greenhouse', logo: 'https://logo.clearbit.com/epicgames.com' },
            { name: 'Unity', board: 'unity3d', type: 'greenhouse', logo: 'https://logo.clearbit.com/unity.com' },
            { name: 'Niantic', board: 'niantic', type: 'greenhouse', logo: 'https://logo.clearbit.com/nianticlabs.com' },
            { name: 'Electronic Arts', board: 'ea', type: 'greenhouse', logo: 'https://logo.clearbit.com/ea.com' },

            // ===== Cloud & Infrastructure =====
            { name: 'Akamai', board: 'akamai', type: 'greenhouse', logo: 'https://logo.clearbit.com/akamai.com' },
            { name: 'Fastly', board: 'fastly', type: 'lever', logo: 'https://logo.clearbit.com/fastly.com' },
            { name: 'Fly.io', board: 'fly', type: 'lever', logo: 'https://logo.clearbit.com/fly.io' },
            { name: 'Render', board: 'render', type: 'lever', logo: 'https://logo.clearbit.com/render.com' },
            { name: 'Railway', board: 'railway', type: 'lever', logo: 'https://logo.clearbit.com/railway.app' },
            { name: 'PlanetScale', board: 'planetscale', type: 'lever', logo: 'https://logo.clearbit.com/planetscale.com' },
            { name: 'Neon', board: 'neondatabase', type: 'lever', logo: 'https://logo.clearbit.com/neon.tech' },
            { name: 'Upstash', board: 'upstash', type: 'lever', logo: 'https://logo.clearbit.com/upstash.com' },



            // ===== US Telecom =====
            { name: 'T-Mobile', board: 'tmobile', type: 'greenhouse', logo: 'https://logo.clearbit.com/t-mobile.com' },
            { name: 'Verizon', board: 'verizon', type: 'greenhouse', logo: 'https://logo.clearbit.com/verizon.com' },
            { name: 'Comcast', board: 'comcast', type: 'greenhouse', logo: 'https://logo.clearbit.com/comcast.com' },

            // ===== US Enterprise Tech =====
            { name: 'Cisco', board: 'cisco', type: 'greenhouse', logo: 'https://logo.clearbit.com/cisco.com' },
            { name: 'Dell Technologies', board: 'dell', type: 'greenhouse', logo: 'https://logo.clearbit.com/dell.com' },
            { name: 'HP Enterprise', board: 'hpe', type: 'greenhouse', logo: 'https://logo.clearbit.com/hpe.com' },
            { name: 'Oracle', board: 'oracle', type: 'greenhouse', logo: 'https://logo.clearbit.com/oracle.com' },
            { name: 'IBM', board: 'ibm', type: 'greenhouse', logo: 'https://logo.clearbit.com/ibm.com' },
            { name: 'Intuit', board: 'intuit', type: 'greenhouse', logo: 'https://logo.clearbit.com/intuit.com' },
            // Salesforce doesn't use Greenhouse API - removed (use Featured Companies link instead)
            { name: 'Box', board: 'box', type: 'greenhouse', logo: 'https://logo.clearbit.com/box.com' },

            // ===== US Media & Entertainment =====
            { name: 'Disney Streaming', board: 'disneystreaming', type: 'greenhouse', logo: 'https://logo.clearbit.com/disney.com' },
            { name: 'Warner Bros Discovery', board: 'wbd', type: 'greenhouse', logo: 'https://logo.clearbit.com/wbd.com' },
            { name: 'Paramount', board: 'paramount', type: 'greenhouse', logo: 'https://logo.clearbit.com/paramount.com' },
            { name: 'NBCUniversal', board: 'nbcuniversal', type: 'greenhouse', logo: 'https://logo.clearbit.com/nbcuniversal.com' },
            { name: 'Hulu', board: 'hulu', type: 'greenhouse', logo: 'https://logo.clearbit.com/hulu.com' },

            // ===== US Travel & Hospitality =====
            { name: 'Expedia', board: 'expedia', type: 'greenhouse', logo: 'https://logo.clearbit.com/expedia.com' },
            { name: 'Tripadvisor', board: 'tripadvisor', type: 'greenhouse', logo: 'https://logo.clearbit.com/tripadvisor.com' },
            { name: 'Airbnb', board: 'airbnb', type: 'greenhouse', logo: 'https://logo.clearbit.com/airbnb.com' },
            { name: 'Vrbo', board: 'vrbo', type: 'greenhouse', logo: 'https://logo.clearbit.com/vrbo.com' },
            { name: 'United Airlines', board: 'united', type: 'greenhouse', logo: 'https://logo.clearbit.com/united.com' },
            { name: 'Delta Air Lines', board: 'delta', type: 'greenhouse', logo: 'https://logo.clearbit.com/delta.com' },
            { name: 'American Airlines', board: 'aa', type: 'greenhouse', logo: 'https://logo.clearbit.com/aa.com' },

            // ===== US Real Estate Tech =====
            { name: 'Zillow', board: 'zillow', type: 'greenhouse', logo: 'https://logo.clearbit.com/zillow.com' },
            { name: 'Redfin', board: 'redfin', type: 'greenhouse', logo: 'https://logo.clearbit.com/redfin.com' },
            { name: 'Opendoor', board: 'opendoor', type: 'greenhouse', logo: 'https://logo.clearbit.com/opendoor.com' },
            { name: 'Compass', board: 'compass', type: 'greenhouse', logo: 'https://logo.clearbit.com/compass.com' },

            // ===== More US Tech =====
            { name: 'Grammarly', board: 'grammarly', type: 'greenhouse', logo: 'https://logo.clearbit.com/grammarly.com' },
            { name: 'Zapier', board: 'zapier', type: 'lever', logo: 'https://logo.clearbit.com/zapier.com' },
            { name: 'Carta', board: 'carta', type: 'greenhouse', logo: 'https://logo.clearbit.com/carta.com' },
            { name: 'Lattice', board: 'lattice', type: 'lever', logo: 'https://logo.clearbit.com/lattice.com' },
            { name: 'Deel', board: 'deel', type: 'greenhouse', logo: 'https://logo.clearbit.com/deel.com' },
            { name: 'Remote', board: 'remotecom', type: 'greenhouse', logo: 'https://logo.clearbit.com/remote.com' },
            { name: 'Postman', board: 'postman', type: 'greenhouse', logo: 'https://logo.clearbit.com/postman.com' },
            { name: 'Kong', board: 'kong', type: 'greenhouse', logo: 'https://logo.clearbit.com/konghq.com' },
            { name: 'Temporal', board: 'temporal', type: 'lever', logo: 'https://logo.clearbit.com/temporal.io' },
            { name: 'Pulumi', board: 'pulumi', type: 'lever', logo: 'https://logo.clearbit.com/pulumi.com' },
        ];

        let allJobs = [];
        let filteredJobs = [];
        let currentPage = 1;
        const jobsPerPage = 25;
        let activeCompanyFilter = null;

        // ============ API FETCH FUNCTIONS ============

        // Fetch with timeout helper
        async function fetchWithTimeout(url, timeout = 8000) {
            const controller = new AbortController();
            const id = setTimeout(() => controller.abort(), timeout);
            try {
                const response = await fetch(url, { signal: controller.signal });
                clearTimeout(id);
                return response;
            } catch (e) {
                clearTimeout(id);
                return null;
            }
        }

        // Fetch jobs from Greenhouse
        async function fetchGreenhouseJobs(company) {
            try {
                const response = await fetchWithTimeout(`https://boards-api.greenhouse.io/v1/boards/${company.board}/jobs?content=true`);
                if (!response || !response.ok) return [];
                const data = await response.json();

                return (data.jobs || []).map(job => ({
                    id: job.id,
                    title: job.title || '',
                    company: company.name,
                    companyLogo: company.logo,
                    location: job.location?.name || 'Remote',
                    department: job.departments?.[0]?.name || '',
                    description: stripHtml(job.content || ''),
                    url: job.absolute_url || '',
                    postedDate: new Date(job.updated_at || Date.now()),
                    source: 'greenhouse'
                }));
            } catch (error) {
                return [];
            }
        }

        // Fetch jobs from Lever
        async function fetchLeverJobs(company) {
            try {
                const response = await fetchWithTimeout(`https://api.lever.co/v0/postings/${company.board}?mode=json`);
                if (!response || !response.ok) return [];
                const jobs = await response.json();
                if (!Array.isArray(jobs)) return [];

                return jobs.map(job => ({
                    id: job.id,
                    title: job.text || '',
                    company: company.name,
                    companyLogo: company.logo,
                    location: job.categories?.location || 'Remote',
                    department: job.categories?.team || job.categories?.department || '',
                    description: stripHtml(job.descriptionPlain || job.description || ''),
                    url: job.hostedUrl || '',
                    postedDate: new Date(job.createdAt || Date.now()),
                    source: 'lever'
                }));
            } catch (error) {
                return [];
            }
        }

        // Filter jobs by date
        function filterByDate(jobs, days) {
            if (!days) return jobs;
            const cutoffDate = new Date();
            cutoffDate.setDate(cutoffDate.getDate() - parseInt(days));
            return jobs.filter(job => job.postedDate >= cutoffDate);
        }

        // US states and cities for filtering
        const US_LOCATIONS = [
            'united states', 'usa', 'u.s.', 'us-', ', us',
            'alabama', 'alaska', 'arizona', 'arkansas', 'california', 'colorado', 'connecticut',
            'delaware', 'florida', 'georgia', 'hawaii', 'idaho', 'illinois', 'indiana', 'iowa',
            'kansas', 'kentucky', 'louisiana', 'maine', 'maryland', 'massachusetts', 'michigan',
            'minnesota', 'mississippi', 'missouri', 'montana', 'nebraska', 'nevada', 'new hampshire',
            'new jersey', 'new mexico', 'new york', 'north carolina', 'north dakota', 'ohio',
            'oklahoma', 'oregon', 'pennsylvania', 'rhode island', 'south carolina', 'south dakota',
            'tennessee', 'texas', 'utah', 'vermont', 'virginia', 'washington', 'west virginia',
            'wisconsin', 'wyoming', 'dc', 'd.c.',
            // Major US cities
            'san francisco', 'san jose', 'milpitas', 'sunnyvale', 'mountain view', 'palo alto',
            'cupertino', 'santa clara', 'fremont', 'oakland', 'berkeley', 'los angeles', 'san diego',
            'seattle', 'new york', 'nyc', 'brooklyn', 'manhattan', 'austin', 'dallas', 'houston',
            'denver', 'boston', 'chicago', 'atlanta', 'miami', 'phoenix', 'portland', 'raleigh',
            'charlotte', 'durham', 'tampa', 'orlando', 'jacksonville'
        ];

        const NON_US_LOCATIONS = [
            'london', 'uk', 'united kingdom', 'dublin', 'ireland', 'berlin', 'germany', 'amsterdam',
            'paris', 'france', 'singapore', 'tokyo', 'japan', 'sydney', 'australia', 'toronto',
            'canada', 'vancouver', 'india', 'bangalore', 'mumbai', 'hyderabad', 'tel aviv', 'israel',
            'brazil', 'mexico', 'china', 'hong kong', 'korea', 'sweden', 'norway', 'denmark',
            'finland', 'poland', 'spain', 'italy', 'portugal', 'argentina', 'chile', 'colombia',
            'emea', 'apac', 'latam'
        ];

        // Check if job is in USA
        function isUSLocation(location) {
            const loc = location.toLowerCase();
            // Exclude non-US locations first
            if (NON_US_LOCATIONS.some(nonUS => loc.includes(nonUS))) return false;
            // Include if matches US locations or contains Remote (assuming US remote)
            if (loc.includes('remote') && !NON_US_LOCATIONS.some(nonUS => loc.includes(nonUS))) return true;
            return US_LOCATIONS.some(usLoc => loc.includes(usLoc));
        }

        // Filter jobs by location (US only)
        function filterByLocation(jobs, location) {
            // First filter to US-only
            let usJobs = jobs.filter(job => isUSLocation(job.location));

            if (!location || location === 'us') return usJobs;

            return usJobs.filter(job => {
                const loc = job.location.toLowerCase();
                if (location === 'remote') return loc.includes('remote');
                if (location === 'bayarea') {
                    return loc.includes('san francisco') || loc.includes('san jose') || loc.includes('milpitas') ||
                           loc.includes('sunnyvale') || loc.includes('mountain view') || loc.includes('palo alto') ||
                           loc.includes('cupertino') || loc.includes('santa clara') || loc.includes('fremont') ||
                           loc.includes('oakland') || loc.includes('berkeley') || loc.includes('bay area') ||
                           loc.includes('california') || loc.includes(', ca');
                }
                if (location === 'texas') {
                    return loc.includes('texas') || loc.includes(', tx') || loc.includes('austin') ||
                           loc.includes('dallas') || loc.includes('houston') || loc.includes('san antonio');
                }
                if (location === 'florida') {
                    return loc.includes('florida') || loc.includes(', fl') || loc.includes('miami') ||
                           loc.includes('tampa') || loc.includes('orlando') || loc.includes('jacksonville');
                }
                if (location === 'nc') {
                    return loc.includes('north carolina') || loc.includes(', nc') || loc.includes('raleigh') ||
                           loc.includes('charlotte') || loc.includes('durham') || loc.includes('research triangle');
                }
                if (location === 'ny') {
                    return loc.includes('new york') || loc.includes('nyc') || loc.includes(', ny') ||
                           loc.includes('brooklyn') || loc.includes('manhattan');
                }
                if (location === 'seattle') {
                    return loc.includes('seattle') || loc.includes('washington') || loc.includes(', wa') ||
                           loc.includes('bellevue') || loc.includes('redmond');
                }
                return true;
            });
        }

        // Search jobs
        function searchJobs(jobs, query) {
            if (!query) return jobs;
            const terms = query.toLowerCase().split(' ');
            return jobs.filter(job => {
                const searchText = `${job.title} ${job.company} ${job.department} ${job.location} ${job.description}`.toLowerCase();
                return terms.every(term => searchText.includes(term));
            });
        }

        // Render company tags
        function renderCompanyTags() {
            const companyCounts = {};
            allJobs.forEach(job => {
                companyCounts[job.company] = (companyCounts[job.company] || 0) + 1;
            });

            const sortedCompanies = Object.entries(companyCounts)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 15);

            const tagsHtml = sortedCompanies.map(([company, count]) => `
                <div class="company-tag ${activeCompanyFilter === company ? 'active' : ''}" data-company="${company}">
                    ${company}
                    <span class="count">${count}</span>
                </div>
            `).join('');

            document.getElementById('company-tags').innerHTML = tagsHtml;

            // Add click handlers
            document.querySelectorAll('.company-tag').forEach(tag => {
                tag.addEventListener('click', () => {
                    const company = tag.dataset.company;
                    activeCompanyFilter = activeCompanyFilter === company ? null : company;
                    applyFilters();
                    renderCompanyTags();
                });
            });
        }

        // Render jobs table
        function renderJobs() {
            const tbody = document.getElementById('jobs-tbody');
            const start = (currentPage - 1) * jobsPerPage;
            const end = start + jobsPerPage;
            const pageJobs = filteredJobs.slice(start, end);

            if (pageJobs.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7">
                            <div class="empty-state">
                                <i class="fas fa-search"></i>
                                <h3>No jobs found</h3>
                                <p>Try adjusting your search or filters</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            tbody.innerHTML = pageJobs.map(job => {
                const isRemote = job.location.toLowerCase().includes('remote');
                const daysAgo = Math.floor((new Date() - job.postedDate) / (1000 * 60 * 60 * 24));
                const dateClass = daysAgo <= 1 ? 'date-new' : 'date-text';
                const dateText = daysAgo === 0 ? 'Today' : daysAgo === 1 ? 'Yesterday' : `${daysAgo} days ago`;

                return `
                    <tr>
                        <td class="col-role">
                            <span class="role-title">${escapeHtml(job.title)}</span>
                            ${job.department ? `<span class="role-dept">${escapeHtml(job.department)}</span>` : ''}
                        </td>
                        <td class="col-company">
                            <span class="company-name">
                                <img src="${job.companyLogo}" alt="${job.company}" class="company-logo" onerror="this.style.display='none'">
                                ${escapeHtml(job.company)}
                            </span>
                        </td>
                        <td class="col-location">
                            <span class="location-text">
                                <i class="fas fa-map-marker-alt"></i>
                                ${escapeHtml(job.location.substring(0, 30))}
                            </span>
                            ${isRemote ? '<span class="remote-badge">Remote</span>' : ''}
                        </td>
                        <td class="col-distance">
                            <span class="distance-badge priority-${getDistancePriority(job.location)}">${getDistanceLabel(getDistancePriority(job.location))}</span>
                        </td>
                        <td class="col-date">
                            <span class="${dateClass}">${dateText}</span>
                        </td>
                        <td class="col-description">
                            <span class="description-text">${escapeHtml(generateJobSummary(job))}</span>
                        </td>
                        <td class="col-apply">
                            <div class="apply-actions">
                                <a href="${job.url}" target="_blank" class="apply-btn">
                                    Apply <i class="fas fa-external-link-alt"></i>
                                </a>
                                <button class="cover-letter-btn" onclick="downloadCoverLetter(jobsMap['${job.id}'])" title="Download Cover Letter">
                                    <i class="fas fa-file-alt"></i>
                                </button>
                                <button class="resume-btn" onclick="downloadResume(jobsMap['${job.id}'])" title="Download Tailored Resume">
                                    <i class="fas fa-file-download"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');

            // Store jobs in map for cover letter access
            pageJobs.forEach(job => {
                jobsMap[job.id] = job;
            });

            renderPagination();
        }

        // Escape HTML
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Render pagination
        function renderPagination() {
            const totalPages = Math.ceil(filteredJobs.length / jobsPerPage);
            const pagination = document.getElementById('pagination');

            if (totalPages <= 1) {
                pagination.style.display = 'none';
                return;
            }

            pagination.style.display = 'flex';

            document.getElementById('showing-start').textContent = (currentPage - 1) * jobsPerPage + 1;
            document.getElementById('showing-end').textContent = Math.min(currentPage * jobsPerPage, filteredJobs.length);
            document.getElementById('showing-total').textContent = filteredJobs.length;

            let btnsHtml = `<button class="page-btn" ${currentPage === 1 ? 'disabled' : ''} onclick="changePage(${currentPage - 1})">Prev</button>`;

            for (let i = 1; i <= Math.min(5, totalPages); i++) {
                btnsHtml += `<button class="page-btn ${currentPage === i ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }

            if (totalPages > 5) {
                btnsHtml += `<span style="padding: 0.5rem;">...</span>`;
                btnsHtml += `<button class="page-btn ${currentPage === totalPages ? 'active' : ''}" onclick="changePage(${totalPages})">${totalPages}</button>`;
            }

            btnsHtml += `<button class="page-btn" ${currentPage === totalPages ? 'disabled' : ''} onclick="changePage(${currentPage + 1})">Next</button>`;

            document.getElementById('pagination-btns').innerHTML = btnsHtml;
        }

        // Change page
        function changePage(page) {
            currentPage = page;
            renderJobs();
            window.scrollTo({ top: document.querySelector('.jobs-table-wrapper').offsetTop - 100, behavior: 'smooth' });
        }

        // Apply all filters
        function applyFilters() {
            const searchQuery = document.getElementById('search-input').value;
            const locationFilter = document.getElementById('location-filter').value;
            const dateFilter = document.getElementById('date-filter').value;

            filteredJobs = [...allJobs];

            // Apply company filter
            if (activeCompanyFilter) {
                filteredJobs = filteredJobs.filter(job => job.company === activeCompanyFilter);
            }

            // Apply date filter
            filteredJobs = filterByDate(filteredJobs, dateFilter);

            // Apply location filter
            filteredJobs = filterByLocation(filteredJobs, locationFilter);

            // Apply search
            filteredJobs = searchJobs(filteredJobs, searchQuery);

            // Sort by distance from San Jose (closest first), then by date
            filteredJobs.sort((a, b) => {
                const distA = getDistancePriority(a.location);
                const distB = getDistancePriority(b.location);
                if (distA !== distB) return distA - distB;
                return b.postedDate - a.postedDate; // Tiebreaker: newest first
            });

            currentPage = 1;
            updateStats();
            renderJobs();
        }

        // Update stats
        function updateStats() {
            document.getElementById('total-jobs').textContent = filteredJobs.length;
            const companies = new Set(filteredJobs.map(j => j.company));
            document.getElementById('total-companies').textContent = companies.size;
            document.getElementById('last-updated').textContent = new Date().toLocaleTimeString();
        }

        // Fetch all jobs with batching to avoid overwhelming APIs
        async function fetchAllJobs() {
            const tbody = document.getElementById('jobs-tbody');
            tbody.innerHTML = `
                <tr class="loading-row">
                    <td colspan="7">
                        <span class="loading-spinner"></span>
                        Loading jobs from ${COMPANIES.length} company career portals...
                    </td>
                </tr>
            `;

            document.getElementById('refresh-btn').classList.add('loading');

            try {
                // Batch requests to avoid rate limiting (20 at a time)
                const batchSize = 20;
                let allResults = [];

                for (let i = 0; i < COMPANIES.length; i += batchSize) {
                    const batch = COMPANIES.slice(i, i + batchSize);
                    const batchPromises = batch.map(company => {
                        if (company.type === 'greenhouse') {
                            return fetchGreenhouseJobs(company);
                        } else {
                            return fetchLeverJobs(company);
                        }
                    });

                    const batchResults = await Promise.allSettled(batchPromises);
                    allResults = allResults.concat(batchResults);

                    // Small delay between batches
                    if (i + batchSize < COMPANIES.length) {
                        await new Promise(r => setTimeout(r, 100));
                    }
                }

                allJobs = allResults
                    .filter(r => r.status === 'fulfilled')
                    .flatMap(r => r.value || [])
                    .filter(job => job && isRelevantJob(job));

            } catch (e) {
                console.error('Error fetching jobs:', e);
                allJobs = [];
            }

            document.getElementById('refresh-btn').classList.remove('loading');

            // Update the fresh jobs ticker with newest jobs
            updateFreshJobsTicker();

            renderCompanyTags();
            applyFilters();
        }

        // Update the scrolling ticker with jobs from last 6 hours
        function updateFreshJobsTicker() {
            const ticker = document.getElementById('freshJobsTicker');
            if (!ticker || allJobs.length === 0) {
                ticker.innerHTML = '<span class="ticker-item">No fresh jobs found. Check back later!</span>';
                return;
            }

            // Filter to only jobs posted in the last 6 hours
            const sixHoursAgo = new Date(Date.now() - 6 * 60 * 60 * 1000);
            const freshJobs = [...allJobs]
                .filter(job => job.postedDate >= sixHoursAgo)
                .sort((a, b) => b.postedDate - a.postedDate);

            // If no jobs in last 6 hours, show message
            if (freshJobs.length === 0) {
                ticker.innerHTML = '<span class="ticker-item">No jobs posted in the last 6 hours. Showing jobs from selected date range below.</span>';
                return;
            }

            // Format time ago
            function timeAgo(date) {
                const now = new Date();
                const diffMs = now - date;
                const diffMins = Math.floor(diffMs / (1000 * 60));
                const diffHours = Math.floor(diffMs / (1000 * 60 * 60));

                if (diffMins < 5) return 'Just now';
                if (diffMins < 60) return `${diffMins}m ago`;
                return `${diffHours}h ago`;
            }

            // Create ticker items (duplicate for seamless loop)
            const tickerItems = freshJobs.map(job => `
                <span class="ticker-item">
                    <a href="${job.url}" target="_blank">
                        <span class="company">${job.company}</span>
                        <span class="title">${job.title}</span>
                        <span class="time">${timeAgo(job.postedDate)}</span>
                    </a>
                </span>
            `).join('');

            // Duplicate content for seamless infinite scroll
            ticker.innerHTML = tickerItems + tickerItems;
        }

        // Event listeners
        document.getElementById('search-input').addEventListener('input', debounce(applyFilters, 300));
        document.getElementById('location-filter').addEventListener('change', applyFilters);
        document.getElementById('date-filter').addEventListener('change', applyFilters);
        document.getElementById('refresh-btn').addEventListener('click', fetchAllJobs);

        // Sortable columns
        document.querySelectorAll('.sortable').forEach(th => {
            th.addEventListener('click', () => {
                const sortKey = th.dataset.sort;
                filteredJobs.sort((a, b) => {
                    if (sortKey === 'distance') {
                        const distA = getDistancePriority(a.location);
                        const distB = getDistancePriority(b.location);
                        if (distA !== distB) return distA - distB;
                        return b.postedDate - a.postedDate;
                    }
                    if (sortKey === 'date') return b.postedDate - a.postedDate;
                    if (sortKey === 'title') return a.title.localeCompare(b.title);
                    if (sortKey === 'company') return a.company.localeCompare(b.company);
                    return 0;
                });
                renderJobs();
            });
        });

        // Debounce function
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // ========================================
        // DOCUMENT MANAGER
        // ========================================

        let documentsManifest = null;
        let manifestSha = null; // Store the SHA for updates

        // GitHub Configuration
        const GITHUB_OWNER = 'schundu007';
        const GITHUB_REPO = 'chundu';
        const MANIFEST_PATH = 'assets/resume/manifest.json';

        // GitHub Token Functions
        function getGithubToken() {
            return localStorage.getItem('github_token') || '';
        }

        function saveGithubToken() {
            const inputEl = document.getElementById('github-token');
            const token = inputEl.value.trim();

            // Only save if a new token is entered (not empty)
            if (token && token.startsWith('ghp_')) {
                localStorage.setItem('github_token', token);
                updateTokenStatus();
                alert('GitHub token saved! It will persist across sessions.');
            } else if (token) {
                alert('Invalid token format. GitHub tokens start with "ghp_"');
            }
            // If empty, do nothing (keep existing token)
        }

        function updateTokenStatus() {
            const token = getGithubToken();
            const statusEl = document.getElementById('token-status');
            const inputEl = document.getElementById('github-token');

            if (token) {
                statusEl.textContent = 'Configured';
                statusEl.className = 'token-status configured';
                // Clear input and show placeholder instead of masked token
                if (inputEl) {
                    inputEl.value = '';
                    inputEl.placeholder = 'Token saved (' + token.substring(0, 4) + '...' + token.substring(token.length - 4) + ')';
                }
            } else {
                statusEl.textContent = 'Not Configured';
                statusEl.className = 'token-status not-configured';
                if (inputEl) inputEl.placeholder = 'ghp_xxxxxxxxxxxxxxxxxxxx';
            }
        }

        function toggleGithubSettings() {
            const content = document.getElementById('github-settings-content');
            const chevron = document.getElementById('settings-chevron');
            content.classList.toggle('show');
            chevron.style.transform = content.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        // Upload Section Functions
        let selectedFile = null;
        let selectedFileBase64 = null;

        function toggleUploadSection() {
            const content = document.getElementById('upload-section-content');
            const chevron = document.getElementById('upload-chevron');
            content.classList.toggle('show');
            chevron.style.transform = content.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
        }

        function handleFileSelect(input) {
            const file = input.files[0];
            if (!file) {
                selectedFile = null;
                selectedFileBase64 = null;
                document.getElementById('btn-upload').disabled = true;
                return;
            }

            // Check file type
            const validTypes = ['.pdf', '.doc', '.docx'];
            const fileName = file.name.toLowerCase();
            const isValid = validTypes.some(type => fileName.endsWith(type));

            if (!isValid) {
                alert('Please select a PDF, DOC, or DOCX file.');
                input.value = '';
                return;
            }

            selectedFile = file;

            // Auto-generate display name from filename
            const nameInput = document.getElementById('upload-name');
            if (!nameInput.value) {
                // Remove extension and format nicely
                let displayName = file.name.replace(/\.(pdf|docx?)/i, '');
                displayName = displayName.replace(/[_-]/g, ' ');
                displayName = displayName.replace(/\b\w/g, c => c.toUpperCase());
                nameInput.value = displayName;
            }

            // Read file as base64
            const reader = new FileReader();
            reader.onload = function(e) {
                // Remove the data:...;base64, prefix
                const base64 = e.target.result.split(',')[1];
                selectedFileBase64 = base64;
                document.getElementById('btn-upload').disabled = false;
            };
            reader.readAsDataURL(file);
        }

        function showUploadStatus(message, type) {
            const statusEl = document.getElementById('upload-status');
            statusEl.className = 'upload-status show ' + type;

            if (type === 'error') {
                statusEl.innerHTML = `<i class="fas fa-exclamation-circle"></i><span>${message}</span>`;
            } else if (type === 'success') {
                statusEl.innerHTML = `<i class="fas fa-check-circle"></i><span>${message}</span>`;
            } else {
                statusEl.innerHTML = `<i class="fas fa-spinner fa-spin"></i><span>${message}</span>`;
            }
        }

        function hideUploadStatus() {
            document.getElementById('upload-status').className = 'upload-status';
        }

        async function uploadDocument() {
            const token = getGithubToken();
            if (!token) {
                alert('Please configure your GitHub token first in the "GitHub Auto-Sync Settings" above.');
                return;
            }

            if (!selectedFile || !selectedFileBase64) {
                alert('Please select a file to upload.');
                return;
            }

            const displayName = document.getElementById('upload-name').value.trim();
            if (!displayName) {
                alert('Please enter a display name for the document.');
                return;
            }

            const docType = document.getElementById('upload-type').value;
            const fileName = selectedFile.name;

            // Disable upload button
            document.getElementById('btn-upload').disabled = true;
            showUploadStatus('Uploading file to GitHub...', 'loading');

            try {
                // Step 1: Upload the file to GitHub
                const filePath = `assets/resume/${fileName}`;

                // Check if file already exists to get its SHA
                let existingSha = null;
                try {
                    const checkResponse = await fetch(
                        `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                        {
                            headers: {
                                'Authorization': `token ${token}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    if (checkResponse.ok) {
                        const existing = await checkResponse.json();
                        existingSha = existing.sha;
                    }
                } catch (e) {
                    // File doesn't exist, that's fine
                }

                // Upload the file
                const uploadBody = {
                    message: `Add ${docType === 'resume' ? 'resume' : 'cover letter'}: ${displayName}`,
                    content: selectedFileBase64
                };
                if (existingSha) {
                    uploadBody.sha = existingSha;
                }

                const uploadResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(uploadBody)
                    }
                );

                if (!uploadResponse.ok) {
                    const error = await uploadResponse.json();
                    throw new Error(error.message || 'Failed to upload file');
                }

                showUploadStatus('Updating manifest...', 'loading');

                // Step 2: Add to manifest
                const newEntry = {
                    name: displayName,
                    file: fileName,
                    active: false
                };

                if (docType === 'resume') {
                    // Check if already exists
                    const exists = documentsManifest.resumes.some(r => r.file === fileName);
                    if (!exists) {
                        documentsManifest.resumes.push(newEntry);
                    } else {
                        // Update existing entry
                        const idx = documentsManifest.resumes.findIndex(r => r.file === fileName);
                        documentsManifest.resumes[idx].name = displayName;
                    }
                } else {
                    // Check if already exists
                    const exists = documentsManifest.coverLetters.some(c => c.file === fileName);
                    if (!exists) {
                        documentsManifest.coverLetters.push(newEntry);
                    } else {
                        // Update existing entry
                        const idx = documentsManifest.coverLetters.findIndex(c => c.file === fileName);
                        documentsManifest.coverLetters[idx].name = displayName;
                    }
                }

                // Step 3: Update manifest on GitHub
                const manifestResult = await updateManifestOnGitHub();
                if (!manifestResult.success) {
                    throw new Error('File uploaded but manifest update failed: ' + manifestResult.message);
                }

                showUploadStatus('Upload complete! Changes will be live in ~1 minute.', 'success');

                // Reset form
                document.getElementById('upload-file').value = '';
                document.getElementById('upload-name').value = '';
                selectedFile = null;
                selectedFileBase64 = null;

                // Refresh document list
                renderDocumentManager();

                // Hide status after 5 seconds
                setTimeout(hideUploadStatus, 5000);

            } catch (error) {
                console.error('Upload error:', error);
                showUploadStatus('Error: ' + error.message, 'error');
            } finally {
                document.getElementById('btn-upload').disabled = false;
            }
        }

        // Delete Document Functions
        let pendingDelete = null;

        function confirmDelete(type, filename, displayName) {
            pendingDelete = { type, filename, displayName };

            const overlay = document.createElement('div');
            overlay.className = 'delete-confirm-overlay';
            overlay.id = 'delete-confirm-overlay';
            overlay.innerHTML = `
                <div class="delete-confirm-dialog">
                    <h3><i class="fas fa-exclamation-triangle"></i> Delete Document</h3>
                    <p>Are you sure you want to permanently delete this ${type === 'resume' ? 'resume' : 'cover letter'}?</p>
                    <div class="filename">${displayName}<br><small>${filename}</small></div>
                    <p style="color: #dc2626; font-weight: 600;">This action cannot be undone!</p>
                    <div class="delete-confirm-buttons">
                        <button class="btn-cancel" onclick="cancelDelete()">Cancel</button>
                        <button class="btn-confirm-delete" onclick="executeDelete()">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(overlay);
        }

        function cancelDelete() {
            pendingDelete = null;
            const overlay = document.getElementById('delete-confirm-overlay');
            if (overlay) overlay.remove();
        }

        async function executeDelete() {
            if (!pendingDelete) return;

            const { type, filename, displayName } = pendingDelete;
            const overlay = document.getElementById('delete-confirm-overlay');

            // Update dialog to show loading
            overlay.querySelector('.delete-confirm-dialog').innerHTML = `
                <div style="padding: 1rem;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #dc2626;"></i>
                    <p style="margin-top: 1rem; color: #4b5563;">Deleting from GitHub...</p>
                </div>
            `;

            const token = getGithubToken();
            if (!token) {
                alert('Please configure your GitHub token first.');
                cancelDelete();
                return;
            }

            try {
                // Step 1: Try to get the file SHA from GitHub
                const filePath = `assets/resume/${filename}`;
                let fileExistsOnGitHub = false;

                const getResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                    {
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (getResponse.ok) {
                    const fileData = await getResponse.json();
                    fileExistsOnGitHub = true;

                    // Step 2: Delete the file from GitHub
                    const deleteResponse = await fetch(
                        `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${filePath}`,
                        {
                            method: 'DELETE',
                            headers: {
                                'Authorization': `token ${token}`,
                                'Accept': 'application/vnd.github.v3+json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                message: `Delete ${type === 'resume' ? 'resume' : 'cover letter'}: ${displayName}`,
                                sha: fileData.sha
                            })
                        }
                    );

                    if (!deleteResponse.ok) {
                        const error = await deleteResponse.json();
                        throw new Error(error.message || 'Failed to delete file');
                    }
                }

                // Step 3: Remove from manifest (even if file wasn't on GitHub)
                if (type === 'resume') {
                    documentsManifest.resumes = documentsManifest.resumes.filter(r => r.file !== filename);
                } else {
                    documentsManifest.coverLetters = documentsManifest.coverLetters.filter(c => c.file !== filename);
                }

                // Step 4: Update manifest on GitHub
                const manifestResult = await updateManifestOnGitHub();
                if (!manifestResult.success) {
                    console.warn('File deleted but manifest update failed:', manifestResult.message);
                }

                // Success - close overlay and refresh
                cancelDelete();
                renderDocumentManager();

                if (fileExistsOnGitHub) {
                    alert('Document deleted successfully! Changes will be live in ~1 minute.');
                } else {
                    alert('Entry removed from manifest. (File was not found on GitHub - may have been deleted already)');
                }

            } catch (error) {
                console.error('Delete error:', error);
                cancelDelete();
                alert('Error deleting document: ' + error.message);
            }
        }

        // GitHub API: Update manifest.json
        async function updateManifestOnGitHub() {
            const token = getGithubToken();
            if (!token) {
                return { success: false, message: 'GitHub token not configured' };
            }

            try {
                // First, get the current file to get its SHA
                const getResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${MANIFEST_PATH}`,
                    {
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );

                if (!getResponse.ok) {
                    throw new Error('Failed to fetch current manifest');
                }

                const fileData = await getResponse.json();
                manifestSha = fileData.sha;

                // Prepare the new content
                const newContent = JSON.stringify(documentsManifest, null, 2) + '\n';
                const encodedContent = btoa(unescape(encodeURIComponent(newContent)));

                // Update the file
                const updateResponse = await fetch(
                    `https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/contents/${MANIFEST_PATH}`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: 'Update active documents via Document Manager',
                            content: encodedContent,
                            sha: manifestSha
                        })
                    }
                );

                if (!updateResponse.ok) {
                    const error = await updateResponse.json();
                    throw new Error(error.message || 'Failed to update manifest');
                }

                return { success: true, message: 'Manifest updated on GitHub!' };
            } catch (error) {
                console.error('GitHub API Error:', error);
                return { success: false, message: error.message };
            }
        }

        async function loadDocumentManifest() {
            try {
                const response = await fetch('../assets/resume/manifest.json');
                documentsManifest = await response.json();
                renderDocumentManager();
            } catch (error) {
                console.error('Error loading document manifest:', error);
                document.getElementById('doc-manager-content').innerHTML = `
                    <p style="color: #dc2626; text-align: center;">
                        <i class="fas fa-exclamation-triangle"></i> Error loading documents
                    </p>
                `;
            }
        }

        function renderDocumentManager() {
            const container = document.getElementById('doc-manager-content');
            if (!documentsManifest) return;

            let html = `
                <!-- Resumes Section -->
                <h4 style="margin: 0 0 1rem; color: var(--dark); font-size: 1rem;">
                    <i class="fas fa-file-alt" style="color: var(--primary); margin-right: 0.5rem;"></i>
                    Resumes <span style="color: var(--text-muted); font-weight: 400;">(${documentsManifest.resumes.length} available)</span>
                </h4>
                <div style="display: grid; gap: 0.5rem; margin-bottom: 1.5rem;">
            `;

            documentsManifest.resumes.forEach(resume => {
                const isActive = resume.active;
                html += `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem 1rem;
                         background: ${isActive ? 'rgba(22, 163, 74, 0.05)' : 'var(--light)'};
                         border: 1px solid ${isActive ? '#16a34a' : 'var(--border)'};
                         border-radius: 8px;">
                        <i class="fas ${isActive ? 'fa-check-circle' : 'fa-file-alt'}"
                           style="color: ${isActive ? '#16a34a' : 'var(--primary)'}; font-size: 1.25rem;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--dark); font-size: 0.9rem;">${resume.name}</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">${resume.file}</div>
                        </div>
                        <a href="../assets/resume/${resume.file}" target="_blank"
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-eye"></i> View
                        </a>
                        <a href="../assets/resume/${resume.file}" download
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-download"></i>
                        </a>
                        ${isActive ? `
                            <span style="background: #16a34a; color: white; padding: 0.25rem 0.6rem; border-radius: 50px; font-size: 0.7rem; font-weight: 600;">
                                ACTIVE
                            </span>
                        ` : `
                            <button onclick="setActiveResume('${resume.file}')"
                                    style="background: var(--primary); color: white; border: none; padding: 0.4rem 0.75rem; border-radius: 6px; font-size: 0.75rem; cursor: pointer;">
                                Set Active
                            </button>
                        `}
                        <button class="btn-delete" onclick="confirmDelete('resume', '${resume.file}', '${resume.name.replace(/'/g, "\\'")}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
            });

            html += `
                </div>

                <!-- Cover Letters Section -->
                <h4 style="margin: 0 0 1rem; color: var(--dark); font-size: 1rem;">
                    <i class="fas fa-envelope-open-text" style="color: #a855f7; margin-right: 0.5rem;"></i>
                    Cover Letters <span style="color: var(--text-muted); font-weight: 400;">(${documentsManifest.coverLetters.length} available)</span>
                </h4>
                <div style="display: grid; gap: 0.5rem;">
            `;

            documentsManifest.coverLetters.forEach(letter => {
                const isActive = letter.active;
                html += `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem 1rem;
                         background: ${isActive ? 'rgba(168, 85, 247, 0.05)' : 'var(--light)'};
                         border: 1px solid ${isActive ? '#a855f7' : 'var(--border)'};
                         border-radius: 8px;">
                        <i class="fas ${isActive ? 'fa-check-circle' : 'fa-envelope-open-text'}"
                           style="color: ${isActive ? '#a855f7' : '#a855f7'}; font-size: 1.25rem;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; color: var(--dark); font-size: 0.9rem;">${letter.name}</div>
                            <div style="font-size: 0.75rem; color: var(--text-muted);">${letter.file}</div>
                        </div>
                        <a href="../assets/resume/${letter.file}" target="_blank"
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-eye"></i> View
                        </a>
                        <a href="../assets/resume/${letter.file}" download
                           class="btn btn-secondary" style="font-size: 0.75rem; padding: 0.4rem 0.75rem;">
                            <i class="fas fa-download"></i>
                        </a>
                        ${isActive ? `
                            <span style="background: #a855f7; color: white; padding: 0.25rem 0.6rem; border-radius: 50px; font-size: 0.7rem; font-weight: 600;">
                                ACTIVE
                            </span>
                        ` : `
                            <button onclick="setActiveCoverLetter('${letter.file}')"
                                    style="background: #a855f7; color: white; border: none; padding: 0.4rem 0.75rem; border-radius: 6px; font-size: 0.75rem; cursor: pointer;">
                                Set Active
                            </button>
                        `}
                        <button class="btn-delete" onclick="confirmDelete('coverLetter', '${letter.file}', '${letter.name.replace(/'/g, "\\'")}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        async function setActiveResume(filename) {
            // Update manifest in memory
            documentsManifest.resumes.forEach(r => r.active = (r.file === filename));
            renderDocumentManager();

            // Show updating indicator
            const container = document.getElementById('doc-manager-content');
            const indicator = document.createElement('div');
            indicator.className = 'updating-indicator';
            indicator.innerHTML = '<i class="fas fa-sync-alt"></i> Syncing to GitHub...';
            indicator.style.marginTop = '1rem';
            container.appendChild(indicator);

            // Try to update on GitHub
            const result = await updateManifestOnGitHub();
            indicator.remove();

            if (result.success) {
                alert('Active resume updated and synced to GitHub! Changes will be live in ~1 minute.');
            } else if (result.message === 'GitHub token not configured') {
                alert('Active resume updated locally. To auto-sync, configure your GitHub token in settings above.');
            } else {
                alert('Active resume updated locally. GitHub sync failed: ' + result.message);
            }
        }

        async function setActiveCoverLetter(filename) {
            // Update manifest in memory
            documentsManifest.coverLetters.forEach(c => c.active = (c.file === filename));
            renderDocumentManager();

            // Show updating indicator
            const container = document.getElementById('doc-manager-content');
            const indicator = document.createElement('div');
            indicator.className = 'updating-indicator';
            indicator.innerHTML = '<i class="fas fa-sync-alt"></i> Syncing to GitHub...';
            indicator.style.marginTop = '1rem';
            container.appendChild(indicator);

            // Try to update on GitHub
            const result = await updateManifestOnGitHub();
            indicator.remove();

            if (result.success) {
                alert('Active cover letter updated and synced to GitHub! Changes will be live in ~1 minute.');
            } else if (result.message === 'GitHub token not configured') {
                alert('Active cover letter updated locally. To auto-sync, configure your GitHub token in settings above.');
            } else {
                alert('Active cover letter updated locally. GitHub sync failed: ' + result.message);
            }
        }

        // Load document manager and initialize token status
        loadDocumentManifest();
        updateTokenStatus();

        // Initialize - load jobs
        fetchAllJobs();
    </script>
    <!-- Neural Network Background -->
    <script src="../assets/js/neural-bg.js"></script>
</body>
</html>
